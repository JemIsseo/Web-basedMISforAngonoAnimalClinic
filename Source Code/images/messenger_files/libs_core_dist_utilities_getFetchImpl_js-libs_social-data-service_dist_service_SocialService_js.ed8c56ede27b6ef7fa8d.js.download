"use strict";(self.webpackChunk_msnews_msnews_experiences=self.webpackChunk_msnews_msnews_experiences||[]).push([["libs_core_dist_utilities_getFetchImpl_js-libs_social-data-service_dist_service_SocialService_js","msnews/publishers-service-client"],{88096:function(e,t,i){i.d(t,{j:function(){return r}});var n=i(32050),o=i(33379);function r(){return(0,o.N)()?window.fetch.bind(window):n.br}},55128:function(e,t,i){var n;i.d(t,{S:function(){return n},PublisherServiceClient:function(){return f}}),function(e){e.More="More",e.Mute="Mute"}(n||(n={}));var o=i(33940),r=i(84169),s=i(73252),a=i(63535),c=i(19809),d=i(87298),l=i(17157),u=i(65019),m=i(11380),p=i(81866),v=i(51125),g=i(33799),y=i(51671);class f{constructor(e,t=!0){this.fetchImpl=e,this.addPageInfoToOcid=t,this.followedPublishersEndpoint="v1/News/Users/Me/PreferredProviders",this.followedSourcesEndpoint="msn/sources",this.publishersServiceEndpoint="Msn/Providers",this.actionsServiceEndpoint="Graph/Actions",this.followActionSourceEndpoint="community/follows",this.ocid="feeds"}getUserMutedPublishers(){return(0,o.mG)(this,void 0,void 0,(function*(){const e=yield this.getUserActions(n.Mute);if(!e||!e.value)return null;if(!e.value.length)return[];const t=e.value.reduce(((e,t)=>(e[t.targetId]=t,e)),{}),i=yield this.getPublisherDetails(Object.keys(t));if(!i||!i.value||!i.value.length)return null;return i.value.map((e=>{const i={createdDateTime:t[e.id].createdDateTime};return Object.assign(Object.assign({},e),i)}))}))}getUserFollowedPublishers(e=100){return(0,o.mG)(this,void 0,void 0,(function*(){const t=yield this.getRequestInit(),i=[...yield this.getCommonParams(),{key:"$top",value:`${e}`}],n=(0,a.PH)(this.followedPublishersEndpoint);this.appendQs(i,n),(0,l.wq)()||(0,v.s6)(n);const o=yield this.sendRequest(decodeURIComponent(n.href),t,"getFollowedPublishers");return null==o?void 0:o.value}))}getUserFollowedSources(e=100){var t,i;return(0,o.mG)(this,void 0,void 0,(function*(){const n=yield this.getRequestInit(),o=[...yield this.getCommonParams(),{key:"$top",value:`${e}`},{key:"queryType",value:"MyFeed"}],r=(0,a.PH)(this.followedSourcesEndpoint);this.appendQs(o,r),(0,l.wq)()||(0,v.s6)(r);const s=yield this.sendRequest(decodeURIComponent(r.href),n,"getFollowedSources");return(null===(t=null==s?void 0:s.value)||void 0===t?void 0:t.length)>0?null===(i=null==s?void 0:s.value[0])||void 0===i?void 0:i.subCards.map((e=>{var t;const i=e.intAttributes&&1==e.intAttributes.disableProfile;return Object.assign(Object.assign({},e),{profileId:i?null:e.profileId,displayName:e.name,logos:[{imageLink:{href:null===(t=e.image)||void 0===t?void 0:t.url}}]})})):[]}))}publisherUserAction(e,t,i){return(0,o.mG)(this,void 0,void 0,(function*(){if(!e||!t)return null;const n=yield this.getRequestInit();n.method=i;let o=yield this.getCommonParams();"POST"===i?n.body=JSON.stringify({actionType:t,targetId:e,targetType:"SourceProvider"}):"DELETE"===i&&(o=[...o,{key:"$filter",value:`actionType eq '${t}' and targetId eq '${e}'`}]);const r=(0,a.PH)(this.actionsServiceEndpoint);this.appendQs(o,r);const s=yield this.sendRequest(decodeURIComponent(r.href),n,`deleteUserAction ${t}`,!0,!0);if(s.status>=400){const i=`OneService returned error response. Status: ${s.status} for actionType: ${t}, targetId: ${e}`;throw new Error(i)}return s}))}updateSourceFollowState(e,t){return(0,o.mG)(this,void 0,void 0,(function*(){if(!e)return null;const i=yield this.getRequestInit();let n=yield this.getCommonParams();n=[...n],t?(i.method="POST",i.body=JSON.stringify({targetId:e})):(i.method="DELETE",n=[...n,{key:"targetId",value:e}]);const o=(0,a.PH)(this.followActionSourceEndpoint);this.appendQs(n,o);const r=t?"follow":"unfollow";try{return yield this.sendRequest(decodeURIComponent(o.href),i,`updateSourceFollowState ${r}`,!0,!0)}catch(t){throw new Error(`OneService returned error response. Community follow service  for targetId: ${e}, action: ${r}`)}}))}getUserPublisherStatus(e,t){var i;return(0,o.mG)(this,void 0,void 0,(function*(){const n=yield this.getRequestInit();n.method="GET";const o=[...yield this.getCommonParams(),{key:"$filter",value:`actionType eq '${t}' and targetId eq '${e}'`}],r=(0,a.PH)(this.actionsServiceEndpoint);this.appendQs(o,r),(0,l.wq)()||(0,v.s6)(r);const s=yield this.sendRequest(decodeURIComponent(r.href),n,`getUserPublisherStatus ${t}`);return!!(null===(i=s.value)||void 0===i?void 0:i.length)}))}getUserActions(e,t=100){return(0,o.mG)(this,void 0,void 0,(function*(){const i=yield this.getRequestInit(),n=[...yield this.getCommonParams(),{key:"$filter",value:`actionType eq '${e}' and deleted eq false and targetType eq 'SourceProvider'`},{key:"$top",value:`${t}`}],o=(0,a.PH)(this.actionsServiceEndpoint);return this.appendQs(n,o),(0,l.wq)()||(0,v.s6)(o),yield this.sendRequest(decodeURIComponent(o.href),i,`getUserActions ${e}`)}))}getPublisherDetails(e){return(0,o.mG)(this,void 0,void 0,(function*(){const t=yield this.getRequestInit(),i=(0,a.PH)(this.publishersServiceEndpoint),n=[...c.$.getOneServiceParamsWithoutAuth(null,this.ocid,this.addPageInfoToOcid),{key:"ids",value:e.join(",")}];return this.appendQs(n,i),yield this.sendRequest(decodeURIComponent(i.href),t,"getPublisherDetails")}))}getCommonParams(){return(0,o.mG)(this,void 0,void 0,(function*(){if("winWidgets"===r.jG.AppType&&(this.ocid="winp2",this.addPageInfoToOcid=!1),(0,l.wq)())return this.getSapphireQueryParams();return(yield this.isUserSignedIn())?c.$.getOneServiceParamsWithAuth(r.jG.UserId||r.jG.ActivityId,this.ocid,this.addPageInfoToOcid):c.$.getOneServiceParamsWithoutAuth(r.jG.UserId||r.jG.ActivityId,this.ocid,this.addPageInfoToOcid)}))}getSapphireQueryParams(){const e=c.$.getOneServiceNonDynamicParamsWithoutAuth(this.ocid,this.addPageInfoToOcid),t=(0,u._4)();return t&&(e.push({key:r.jG.OneServiceContentMarketQspKey,value:t.market}),r.jG.ShouldUseFdheadQsp&&e.push({key:"fdhead",value:t.features}),e.push({key:"activityId",value:t.activityId}),t.latitude&&t.longitude&&e.push({key:"location",value:`${t.latitude}|${t.longitude}`})),e}getRequestInit(e=null){return(0,o.mG)(this,void 0,void 0,(function*(){return null==e&&(e={method:"GET"}),(yield this.isUserSignedIn())&&(e.credentials="include"),e.headers=(0,l.wq)()?yield(0,m.dG)():yield c.$.getOneServiceHeaders(),e}))}isUserSignedIn(){return(0,o.mG)(this,void 0,void 0,(function*(){const e=(0,s.nP)().UserIsSignedIn;if(void 0!==e)return e;return(yield(0,y.XJ)())===g.Hy.SignedIn}))}sendRequest(e,t,i,n,r){return(0,o.mG)(this,void 0,void 0,(function*(){return(0,l.wq)()?yield this.sapphireRequest(decodeURIComponent(e),t):yield this.networkRequest(decodeURIComponent(e),t,i,n,r)}))}sapphireRequest(e,t){return(0,o.mG)(this,void 0,void 0,(function*(){const i={url:e,headers:t.headers,body:t.body,refresh:!0};let n;switch(t.method){case"POST":n=yield(0,p.Ef)(i);break;case"DELETE":n=yield(0,p.o9)(i);break;default:n=yield(0,p.FM)(i)}return JSON.parse(n||"{}")}))}networkRequest(e,t,i,n,r){return(0,o.mG)(this,void 0,void 0,(function*(){return(0,d.w)((()=>(0,o.mG)(this,void 0,void 0,(function*(){const i=yield this.fetchImpl(e,t);if(!i.ok)throw Error(i.statusText);return n&&(0,v.T1)(),r?i:i.json()}))),i)}))}appendQs(e,t){e.forEach((e=>{e.value&&t.searchParams.set(e.key,e.value)}))}}},72406:function(e,t,i){i.d(t,{k:function(){return f}});var n=i(84169),o=i(65337),r=i(2040),s=i(29921),a=i(77223),c=i(12884),d=i(85281);function l(e){return"User"===e.type}function u(e){return"Achievement"===e.type}function m(e){return"Reaction"===e.type}function p(e){return"Content"===e.type}function v(e){return"Comment"===e.type}function g(e){return"ModerationRecord"===e.type}const y=e=>null!=e;class f{static convertContent(e){if(!e)return null;const t=s.k.binaryReactionOrder,i={};t.map((t=>{e&&(e.reactionSummary?i[t]=(e.reactionSummary.subReactionSummaries.find((e=>e.type.toLowerCase()==t))||{totalCount:0}).totalCount:i[t]=0)}));const n=!e.cmsId&&e.id?e.id.replace(`_${e.market}`,""):e.id;return Object.assign(Object.assign(Object.assign({comments:{skip:0,top:0,moreCount:0,list:[]}},e),{id:n,reactionStatus:e.reactionStatus?e.reactionStatus.toLowerCase():"on",commentStatus:e.commentStatus?e.commentStatus.toLowerCase():"on"}),{totalCommentCount:e.commentSummary?e.commentSummary.totalCount:0,reactionCounts:i})}static convertUser(e){if(e){let t;t=e.isSocialUser?s.k.userStateType.existingUser:e.id&&!e.id.startsWith("m-")?s.k.userStateType.newUser:s.k.userStateType.anonymous;let i=e.nameStatus&&"Unknown"!==e.nameStatus?e.nameStatus:s.k.userNameStatusType.normal;return t!=s.k.userStateType.newUser||null!=e.primaryName&&""!==e.primaryName.trim()||(i=s.k.userNameStatusType.notAllow),"vid-ksdbkre0pxrdbnxqmr5xbyu056sdgdim5cna8urvbu45yi3x7jqs"==e.id&&(e.coverImageUrl="https://assets.msn.com/staticsb/statics/latest/community/img/premium-profile-promo-card/LA-cover-banner-image.png"),Object.assign(Object.assign({},e),{name:e.primaryName,avatarUrl:e.notUseAvatar||!e.primaryAvatar?void 0:e.primaryAvatar,likesCount:e.reactionSummary?e.reactionSummary.totalCount:0,postsCount:e.commentSummary?e.commentSummary.totalCount:0,followersCount:(e.followSummary&&e.followSummary.subFollowSummaries.find((e=>"FollowBy"==e.type))||{totalCount:0}).totalCount,followingCount:(e.followSummary&&e.followSummary.subFollowSummaries.find((e=>"Follow"==e.type))||{totalCount:0}).totalCount,reactionsCount:e.reactionSummary&&e.reactionSummary.totalCount||0,badge:"Commenter",state:t,avatarStatus:e.avatarStatus||s.k.userAvatarStatusType.normal,nameStatus:i,ageGroup:e.ageGroup||s.k.userAgeGroup.above18,banLevel:e.banLevel})}return{state:s.k.userStateType.anonymous}}static convertUserList(e){return e?{skip:e.skip,top:e.top,hasMore:e.hasMore,moreCount:e.totalCount-(e.top+e.skip),totalCount:e.totalCount,list:e.items.map((e=>this.convertUser(e.links.length>0&&e.links.find((e=>"User"==e.type)).item||null)))}:null}static convertComment(e){if(!e)return null;let t=null,i=null;if(e.links){const n=e.links.find((t=>"User"==t.type&&t.item.id==e.createdBy));t=n?f.convertUser(n.item):null;const o=e.links.find((e=>"Content"==e.type));i=o?f.convertContent(o.item):null}const n=e.visibleStatus!=s.k.visibleStatusType.Normal,o=e.visibleStatus==s.k.visibleStatusType.InReview,r=[s.k.visibleStatusType.DeletedByAI,s.k.visibleStatusType.DeletedByHI,s.k.visibleStatusType.DeletedByUser].includes(e.visibleStatus),a={};return s.k.reactionOrder.map((t=>{e.reactionSummary?a[t]=(e.reactionSummary.subReactionSummaries.find((e=>e.type.toLowerCase()==t))||{totalCount:0}).totalCount:a[t]=0})),Object.assign(Object.assign({},e),{ownerId:e.createdBy,text:e.body,createDatetime:e.createdTime,reactionCounts:a,user:t,content:i,isHidden:n,isInReview:o,isDeleted:r,replies:[],replyCount:e.commentSummary?e.commentSummary.totalCount:0})}static convertCommentList(e){return e?{commentStatus:"On",skip:e.skip,top:e.top,hasMore:e.hasMore,hasPrevious:e.hasPrevious,asc:e.asc,orderby:e.orderby,moreCount:e.totalCount-(e.top-1+e.skip-1+2),totalCount:e.totalCount,list:e.items.map((e=>f.convertComment(e)))}:null}static convertPost(e){return e&&e.postId?Object.assign({},e):null}static convertPostList(e){return e?e.map((e=>f.convertPost(e))):null}static convertReactionsResponseToReactionBreakdownData(e,t){if(!e)return null;const i=e.items;let n;try{n=e.links.find((e=>"Content"==e.type||"Comment"==e.type)).item.reactionSummary.subReactionSummaries}catch(e){n=null}const o={reactionCounts:{all:0},items:{all:[]},content:null};if(s.k.reactionOrder.map((e=>{o.reactionCounts[e]=0,o.items[e]=[]})),n&&n.map((e=>{o.reactionCounts[e.type.toLowerCase()]=e.totalCount,o.reactionCounts.all+=e.totalCount})),i&&i.filter((e=>s.k.reactionOrder.includes(e.subType.toLowerCase()))).map((e=>{const t=e.subType.toLowerCase(),i=e.links.find((e=>"User"==e.type))?e.links.find((e=>"User"==e.type)).item:{state:s.k.userStateType.anonymous,primaryName:"You"};i.isFollowingFetched=!0,i.isFollowing=!!e.links.find((e=>"Follow"==e.type)),o.items[e.subType.toLowerCase()].push({user:i,rateValue:t}),o.items.all.push({user:i,rateValue:t})})),e.links&&e.links.length>0){const t=e.links.filter((e=>"content"==e.type.toLowerCase()));t.length>0&&(o.content=t[0].item)}return o}static convertRatingToRateValue(e){e&&e.items&&(e=e.items[0]);return e&&e.subType?e.subType.toLowerCase():null}static convertUserStrikeActivities(e){var t,i,n,o;return{Warning:null===(t=e.items.map((e=>e.links.find(g))).filter(y).find((e=>e.item.subType==s.k.accountModerationStatus.warning)))||void 0===t?void 0:t.item.createdDateTime,FirstStrike:null===(i=e.items.map((e=>e.links.find(g))).filter(y).find((e=>e.item.subType==s.k.accountModerationStatus.firstStrike)))||void 0===i?void 0:i.item.createdDateTime,SecondStrike:null===(n=e.items.map((e=>e.links.find(g))).filter(y).find((e=>e.item.subType==s.k.accountModerationStatus.secondStrike)))||void 0===n?void 0:n.item.createdDateTime,Ban:null===(o=e.items.map((e=>e.links.find(g))).filter(y).find((e=>e.item.subType==s.k.accountModerationStatus.ban)))||void 0===o?void 0:o.item.createdDateTime}}static convertUserActivities(e){if(!e)return null;const t=e.items.map((e=>{var t;const i=null===(t=e.links.find(g))||void 0===t?void 0:t.item;if(i)return"ApproveCommentAppeal"===i.subType?{targetId:i.targetId,createdDateTime:i.createdDateTime}:void 0})).filter(y),i=e.items.map((e=>{var t;const i=null===(t=e.links.find(g))||void 0===t?void 0:t.item;if(i)return"RejectCommentAppeal"===i.subType?{targetId:i.targetId,createdDateTime:i.createdDateTime}:void 0})).filter(y);return e.items.map((e=>{var o;const r=null===(o=e.links.find(g))||void 0===o?void 0:o.item;r&&("Takedown"===r.subType&&t.map((e=>{e.targetId.includes(r.targetId)&&(r.appealResult="approved",r.appealResponseDate=new Date(e.createdDateTime).toLocaleDateString(n.jG.CurrentMarket,{day:"2-digit",month:"long",year:"numeric"}))})),"Takedown"===r.subType&&i.map((e=>{e.targetId.includes(r.targetId)&&(r.appealResult="denied",r.appealResponseDate=new Date(e.createdDateTime).toLocaleDateString(n.jG.CurrentMarket,{day:"2-digit",month:"long",year:"numeric"}))})))})),{skip:e.skip,top:e.top,hasMore:e.hasMore,moreCount:e.totalCount-(e.top-1+e.skip-1+2),list:e.items.map((e=>this.convertUserActivity(e))).filter(y)}}static convertUserActivity(e){if(!e)return null;const t={id:e.id,type:e.type,datetime:e.createdDateTime,isSeen:e.read,notification:e.notification};switch(e.type){case s.k.activityType.follow:{const i=e.links.find(l);return i?Object.assign(Object.assign({},t),{user:this.convertUser(i.item)}):null}case s.k.activityType.badge:{const i=e.links.find(u);return Object.assign(Object.assign({},t),{badgeType:i?i.item.subType:void 0})}case s.k.activityType.reply:{const i=e.links.find(l),n=e.links.find(p),o=e.links.find(v);return i&&o?Object.assign(Object.assign({},t),{user:this.convertUser(i.item),target:{url:null==n?void 0:n.item.url,body:o.item.body,comment:this.convertComment(o.item)}}):null}case s.k.activityType.reaction:{const i=e.links.find(l),n=e.links.find(p),o=e.links.find(v),r=e.links.find(m),s=r&&"Comment"==r.item.targetType?this.convertSubReactionSummariesToReactionCounts(o&&o.item.reactionSummary&&o.item.reactionSummary.subReactionSummaries):this.convertSubReactionSummariesToReactionCounts(n&&n.item.reactionSummary&&n.item.reactionSummary.subReactionSummaries),a=r&&"Comment"==r.item.targetType?o&&o.item.body:n&&n.item.title;return i&&a?Object.assign(Object.assign({},t),{user:this.convertUser(i&&i.item),target:{url:n&&n.item.url,reactionCounts:s,body:a,comment:o&&this.convertComment(o.item)}}):null}case s.k.activityType.moderation:{const i=e.links.find(p),n=e.links.find(v),o=e.links.find(g),r=o?o.item.subType:void 0,a=o&&"Takedown"===o.item.subType&&o.item.reasons[0];return r?Object.assign(Object.assign({},t),{moderationErrorType:r,message:s.k.activityModerationErrorTypeStringKeyMap[r]||"",reason:a&&s.k.moderationTakedownReasonStringKeyMap[a]||"",appealResult:o&&o.item.appealResult,appealResponseDate:o&&o.item.appealResponseDate,target:n&&{url:i&&i.item.url,id:n.item.id,body:n.item.body,comment:n&&this.convertComment(n.item)}}):null}}return t}static convertSubReactionSummariesToReactionCounts(e){if(!e)return null;const t={all:0};return s.k.reactionOrder.map((e=>{t[e]=0})),e.map((e=>{t[e.type.toLowerCase()]=e.totalCount})),t}static mapFeedResponseToSocialBarData(e,t,i,n,o,r,a){const d=(0,c.l4)();if(d&&d.indexOf("reactionstest")>-1){try{n={totalCount:0,subCommentSummaries:[]},(i={totalCount:0,subReactionSummaries:[]}).totalCount=Math.floor(1e4*Math.random()),n.totalCount=Math.floor(1e4*Math.random());["angry","like","love","sad","surprised","thinking","upvote","downvote"].sort((()=>.5-Math.random())).slice(0,Math.floor(3*Math.random())).forEach((e=>i.subReactionSummaries.push({totalCount:Math.floor(10*Math.random()),type:e})))}catch(e){}if(n.totalCount>0)try{const e=[{id:"82ccfa9b-56ac-41ca-9546-9f3910ec3cec"},{id:"f21a5f91-a6a9-4e80-bb59-3839e296773f"},{id:"c400d1c0-2f0d-469f-986c-8bebe2de1060"},{id:"1be1cb2b-6210-43b4-b962-ce1df9b524d0"},{id:"4e19e02f-f6fc-405d-8f99-1f007ce7f5df"}],t=Math.floor(5*Math.random());o=e.slice(t,t+1)}catch(e){}}const l=i&&i.subReactionSummaries?i.subReactionSummaries:[],u=s.k.binaryReactionOrder,m={};u.map((e=>{m[e]=(e=>{if(Array.isArray(l)){const t=l.find((t=>t&&t.type&&"string"==typeof t.type&&t.type.toLowerCase()===e));return t?t.totalCount:0}})(e)}));const p=!t&&f.getLocalContentReaction(e,a);p&&m[t=p]++;const v=!i,g=!n;return{id:e,reactionStatus:r&&r.reactionStatus?r.reactionStatus.toLowerCase():"on",commentStatus:r&&r.commentStatus?r.commentStatus.toLowerCase():"on",reactionsOptedOut:v,commentsOptedOut:g,reactionCounts:m,totalCommentsCount:n&&n.totalCount,myReaction:t&&t.toLowerCase(),topComments:o}}static getLocalContentReaction(e,t){if(t)return t(e);if((0,o.$o)().supported){const t=(0,d.z_)();return(0,o.$o)().getItem((0,d.xp)(t,e))}return null}static convertCommentToTopCommentData(e,t,i){return e&&e.user?{market:i,username:e.user.primaryName,avatarUrl:e.user.notUseAvatar||!e.user.primaryAvatar?void 0:e.user.primaryAvatar,profileUrl:(0,a.B_)(`${s.k.externalUrls.profilePage}${e.user.id}`,i),commentUrl:(0,a.B_)(t,i,e.id),commentBody:e.text,contentUrl:`${t}#comments`,replyCount:e.replyCount,reactionCounts:e.reactionCounts,reactionSummary:e&&e.reactionSummary,createDatetime:e.createDatetime,commentId:e.id}:null}static convertPublisherFeed(e){var t,i,n;if(!(null==e?void 0:e.sections))return;const o=null===(t=null==e?void 0:e.sections[0])||void 0===t?void 0:t.cards;if(!o||o.length<1)return;const r=null===(i=o[0])||void 0===i?void 0:i.provider;return{items:null===(n=o[0])||void 0===n?void 0:n.subCards.map((e=>Object.assign(Object.assign({},e),{provider:r})))}}static convertTopCommentedToPublisherCarouselData(e,t){return e.filter((e=>{const i=t[e.cmsId];return i.imageResources&&i.imageResources.length>0||i.thumbnail})).map((e=>{const i=t[e.cmsId];let n;return n=i.imageResources&&i.imageResources.length>0?i.imageResources.map((e=>({width:e.width,height:e.height,url:e.url,attribution:e.attribution,title:e.title,quality:e.quality,focalRegion:e.focalRegion,source:e.source}))):[{width:i.thumbnail.image.width,height:i.thumbnail.image.height,url:i.thumbnail.image.url,attribution:i.thumbnail.image.attribution,title:i.thumbnail.image.title,quality:i.thumbnail.image.quality,source:i.thumbnail.image.source}],{id:e.cmsId,type:"article",clickUrl:e.url,title:e.title,category:i.categories[0].product,readTimeMin:i.readTimeMin,reactionSummary:e.reactionSummary,images:n,publishedDateTime:e.createdTime,commentCount:e.commentSummary.totalCount,provider:{id:i.provider.id,name:i.provider.name,logoUrl:i.provider.logo.url,profileId:i.provider.publisherProfileId},subscriptionProductType:r.Cd[i.subscriptionProductType],url:e.url,locale:i.locale}}))}static convertMarketSettings(e){return{conversationTitles:e.conversationTitles,commentReportingTraits:e.reportingTraits.comment,starRatingStatus:e.starRatingStatus,userNameReportingTraits:e.reportingTraits.userName,userPictureReportingTraits:e.reportingTraits.userPicture}}}},4456:function(e,t,i){var n,o,r;i.d(t,{FE:function(){return o},H:function(){return n}}),function(e){e.like="like",e.love="love",e.surprised="surprised",e.thinking="thinking",e.sad="sad",e.angry="angry",e.share="share"}(n||(n={})),function(e){e.upvote="upvote",e.downvote="downvote"}(o||(o={})),function(e){e.star1="star1",e.star2="star2",e.star3="star3",e.star4="star4",e.star5="star5"}(r||(r={}))},26155:function(e,t,i){i.d(t,{_Q:function(){return T},VK:function(){return O},PR:function(){return j}});var n=i(33940);function o(){return(0,n.mG)(this,void 0,void 0,(function*(){return new Promise(((e,t)=>{if(window.AzureStorage)return e(window.AzureStorage);!function(e,t,i){const n=document,o="script";if(!n.getElementById(t)){const r=n.getElementsByTagName(o)[0],s=n.createElement(o);s.id=t,s.src=e,s.onload=i,r.parentNode.insertBefore(s,r)}}("https://assets.msn.com/labs/views/CommentWidget/js/azure-storage.blob.min.js","azure-storage-blob-jssdk",(()=>window.AzureStorage?e(window.AzureStorage):t()))}))}))}var r=i(26415);const s={unknown:r.xQV,contents:r.ic4,users:r.VWS,comments:r.E7H};var a=i(33954);const c=new class{constructor(){this.onAppError=void 0}log(e){if(this.onAppError)try{this.onAppError(e)}catch(e){a.k.logError(e)}}setOnAppError(e){this.onAppError=e}};var d,l,u=i(3755),m=i(85281),p=i(791),v=i(84169),g=i(9375),y=i(5633),f=i(58155),h=i(32050),k=i(65337),b=i(19809),P=i(63535),w=i(55128);!function(e){e[e.NoProfile=0]="NoProfile",e[e.RewardsUser=1]="RewardsUser",e[e.MuidUser=2]="MuidUser"}(d||(d={})),function(e){e[e.Tipping=1]="Tipping",e[e.Subscription=2]="Subscription",e[e.BackupPaymentSubscription=3]="BackupPaymentSubscription"}(l||(l={}));var T,S,A=i(4456),R=i(12884),C=i(72406),M=i(65135),I=i(29921),G=i(51671),E=i(87298);function U(e,t){return(0,E.O)(e,t,6e4)}class O{static get msaAccessToken(){return(0,u.X)("msaAccessToken")}static get muid(){const e=(0,u.X)("muid");return e?"m-"+e:null}static get isWinWidgetsAppType(){return"winWidgets"===v.jG.AppType||"windowsNewsPlus"===v.jG.AppType}static get isApiModerationVertical(){var e;return null===(e=I.k.moderationSourceOverrideVerticals)||void 0===e?void 0:e.includes(v.jG.AppType)}static get ocid(){return this.isWinWidgetsAppType?"winp2":(0,u.X)("ocid")||(0,g.ku)()||b.$.getOneServiceOCID(v.jG.TrackInfo,"")}static setAdditionalHeaders(e){O.additionalHeaders=e}static setAdditionalParameters(e){O.additionalParameters=e}static setDomain(e){this.domain=e,this.endpoints=Object.assign(Object.assign({},this.endpoints),{contents:O.domain.concat("urls/"),providerContents:O.domain.concat("contents"),comments:O.domain.concat("comments/"),posts:O.domain.concat("posts/"),users:O.domain.concat("users/"),follows:O.domain.concat("follows/")})}static configureAbortableFetch(e,t=500){O.shouldUseAbortableFetch=e,O.abortableFetchTimeout=t}static fetchMe(e){return(0,n.mG)(this,void 0,void 0,(function*(){const t=yield O.getUserById("me",e);return(0,m.yp)(t.id),t}))}static getUserById(e,t=!1){return(0,n.mG)(this,void 0,void 0,(function*(){return O.GET(O.endpoints.users+e,{version:"1.1",profile:"social",verify:t,market:v.jG.CurrentMarket}).then((e=>C.k.convertUser(e||null)))}))}static createUser(e){return(0,n.mG)(this,void 0,void 0,(function*(){const t={notUseAvatar:e||!1,market:v.jG.CurrentMarket};return O.POST(O.endpoints.users+"me",t,{profile:"social"}).then((e=>C.k.convertUser(e||null))).catch((e=>e.json().then((e=>{throw e}))))}))}static getUserProfile(e){return(0,n.mG)(this,void 0,void 0,(function*(){let t={followers:void 0,following:void 0,comments:void 0};try{const i=yield O.GET(O.endpoints.users+e,{version:"1.1",profile:"social",market:v.jG.CurrentMarket});t=Object.assign(Object.assign({},t),C.k.convertUser(i||null))}catch(e){return t}return Promise.all([O.getFollowersByUserId(e).then((e=>{t.followers=e})),O.getFollowingsByUserId(e).then((e=>{t.following=e})),O.getCommentsByUserId(e).then((e=>{t.comments=e}))]).then((e=>t)).catch((t=>{a.k.logError("Error getting user profile: "+t.statusText),M.M0.sendAppErrorEvent(Object.assign(Object.assign({},r.lnl),{message:`error getting user profile data ${e} ${JSON.stringify(t)}`}))}))}))}static getUserContents(e,t,i,o,r={}){return(0,n.mG)(this,void 0,void 0,(function*(){const n=Object.assign({market:t,query:i,$top:r.top||20,$skip:r.skip||0,$orderby:r.orderBy||"Time"},o&&{productType:"premium"});return O.GET(O.endpoints.users+e+"/contents",n)}))}static updateUserSettings(e,t){return(0,n.mG)(this,void 0,void 0,(function*(){const i={};return i[e]={isPrivateProfile:t},O.PUT(O.endpoints.users+e+"/settings",i,{})}))}static deleteMyData(e){return(0,n.mG)(this,void 0,void 0,(function*(){const t=Object.assign(Object.assign({},e),{profile:"social"});return O.DELETE(O.endpoints.users+"me/",t)}))}static getFollowersByUserId(e,t=10,i=0){return(0,n.mG)(this,void 0,void 0,(function*(){const n={$top:t,$skip:i};return O.GET(O.endpoints.users+e+"/followers",n).then((e=>C.k.convertUserList(e)))}))}static getFollowingsByUserId(e,t=10,i=0){return(0,n.mG)(this,void 0,void 0,(function*(){const n={$top:t,$skip:i};return O.GET(O.endpoints.users+e+"/followings",n).then((e=>C.k.convertUserList(e)))}))}static followUser(e,t,i){return(0,n.mG)(this,void 0,void 0,(function*(){if(i){const e=new w.PublisherServiceClient(U),i=yield e.getUserMutedPublishers(),n=i&&i.find((e=>e.profileId===t));n&&e.publisherUserAction(n.id,w.S.Mute,"DELETE")}return O.POST(O.endpoints.follows,{targetId:t},{})}))}static unfollowUser(e,t){return(0,n.mG)(this,void 0,void 0,(function*(){return O.DELETE(O.endpoints.follows,{targetId:t})}))}static getUserIsFollowed(e,t){return(0,n.mG)(this,void 0,void 0,(function*(){return new Promise(((e,i)=>{O.GET(O.endpoints.follows,{targetId:t,queryType:"follow"}).then((t=>e(!0))).catch((t=>e(!1)))}))}))}static fetchUserCommunitySettings(){var e;return(0,n.mG)(this,void 0,void 0,(function*(){const t={};O.msaAccessToken&&(t.UserTicketType="2",t.UserAuthToken=O.msaAccessToken,t.SiteName="api.msn.com"),O.muid&&(t.muid=O.muid);const i=yield p.N.getPdpUserPreference(!1,t,O.muid);return(null===(e=null==i?void 0:i.value)||void 0===e?void 0:e.length)>0&&i.value[0].communitySettings||null}))}static appealMe(){return(0,n.mG)(this,void 0,void 0,(function*(){return O.POST(O.endpoints.users+"me/appeals",{})}))}static appealMyPicture(){return(0,n.mG)(this,void 0,void 0,(function*(){return O.POST(O.endpoints.users+"me/pictureAppeals",{})}))}static reportUser(e,t,i,o){return(0,n.mG)(this,void 0,void 0,(function*(){const n="ProfilePicture"==t?"PictureAbusereports":"NameAbusereports",{reportMessage:r,intellectualPropertyDetails:s}=o||{},c={ReportType:i.charAt(0).toUpperCase()+i.slice(1),ReportMessage:r||"",IntellectualPropertyDetails:s};try{return O.POST(O.endpoints.users+e+"/"+n,c,{version:"1.1"})}catch(e){a.k.logError(e)}}))}static getUserActivities(e,t){return(0,n.mG)(this,void 0,void 0,(function*(){const i={$top:e||50,$skip:t||0,version:"1.1"},n=yield O.GET(O.endpoints.users+"me/activities",i);return C.k.convertUserActivities(n)}))}static getUserStrikeActivities(){return(0,n.mG)(this,void 0,void 0,(function*(){const e=yield O.GET(O.endpoints.users+"me/activities",{onlyStrikeHistory:!0,version:"1.1"});return C.k.convertUserStrikeActivities(e)}))}static updateUserActivityStatus(e,t=!0){return(0,n.mG)(this,void 0,void 0,(function*(){const i={id:e,read:t};return O.POST(O.endpoints.users+"me/activities",i,{version:"1.1"})}))}static getUserNotifications(){return(0,n.mG)(this,void 0,void 0,(function*(){const e=yield O.GET(`${O.endpoints.users}me/activities`,{onlynotification:!0,read:!1,$top:5,$skip:0,version:"1.1"});return C.k.convertUserActivities(e)}))}static getProviderFullPageData(e,t){return(0,n.mG)(this,void 0,void 0,(function*(){const i={market:v.jG.CurrentMarket,CommunityProfileId:e,ocid:"Peregrine",query:t};try{const t=yield O.GET(O.endpoints.providerFullPage,i);return t&&0!==t.sections.length||M.M0.sendAppErrorEvent(Object.assign(Object.assign({},r.KyA),{message:`feed data is empty for publisher ${e}`})),t}catch(t){M.M0.sendAppErrorEvent(Object.assign(Object.assign({},r.KyA),{message:`feed data is empty for publisher ${e}`}))}}))}static getCreatorHubFullPageData(){return(0,n.mG)(this,void 0,void 0,(function*(){const e=window.location.hash.substring(1).toLowerCase(),t={market:v.jG.CurrentMarket,ocid:"Peregrine",query:"discover"==e.toLowerCase()?"":`msn_${e}`};return O.GET(O.endpoints.creatorHubFullPage,t)}))}static getProviderContents(e,t,i,n,o={}){const r=Object.assign(Object.assign({providerId:e,market:t,apiKey:v.jG.OneServiceApiKey,$top:o.top||20,$skip:o.skip||0,$orderby:o.orderBy||"Time desc"},i&&{contentType:i}),n&&{partnerTag:n});return O.GET(O.endpoints.providerContents,r)}static getPublisherFeed(e,t){return(0,n.mG)(this,void 0,void 0,(function*(){const i={contentType:"article,video,slideshow,webcontent",market:t,apikey:v.jG.OneServiceApiKey,ocid:"Peregrine"};try{const t=yield O.GET(O.endpoints.publisherFeed,i);return t&&0!==t.sections.length||M.M0.sendAppErrorEvent(Object.assign(Object.assign({},r.KyA),{message:`feed data is empty for publisher ${e}`})),C.k.convertPublisherFeed(t)}catch(t){M.M0.sendAppErrorEvent(Object.assign(Object.assign({},r.KyA),{message:`feed data is empty for publisher ${e}`}))}}))}static getTopCommentedContent(e,t){return(0,n.mG)(this,void 0,void 0,(function*(){const i=v.jG.CurrentMarket,o={queryType:"TopCommented",timePeriod:e,$top:t,market:i},r=(yield O.GET(O.endpoints.contents,o)).items,s=r.map((e=>e.cmsId)),a={};return yield Promise.all(s.map((e=>(0,n.mG)(this,void 0,void 0,(function*(){const t=yield fetch(`https://assets.msn.com/content/view/v2/Detail/${i}/${e}`,{method:"GET"});a[e]=yield t.json()}))))),C.k.convertTopCommentedToPublisherCarouselData(r,a)}))}static observeRewardsInfo(e){this.rewardsInfoObservers.push(e);const t=this.rewardsInfoObservers.length-1;return()=>this.rewardsInfoObservers[t]=void 0}static notifyRewardsInfoObservers(){return(0,n.mG)(this,void 0,void 0,(function*(){this.getRewardsInfo()}))}static getRewardsInfo(e){var t,i,o,r,s,a;return(0,n.mG)(this,void 0,void 0,(function*(){const n={version:"2",scope:e,ocid:"Peregrine"};let c;try{const u=yield this.makeOneServiceRequest("news/users/me/rewards","GET",n),m=u.userType===d.RewardsUser,p=null===(i=null===(t=u.tokens)||void 0===t?void 0:t.find((e=>e.tokenType===l.Tipping)))||void 0===i?void 0:i.token,v=null===(r=null===(o=u.tokens)||void 0===o?void 0:o.find((e=>e.tokenType===l.Subscription)))||void 0===r?void 0:r.token,g=!!p,y=!m&&u.eligibleFreeTipping,f=g||y,h=!!v,k=!m&&u.eligibleFreeSubscription.includes(e),b=h||k,P=u.eligibleBackupPayment&&(null===(a=null===(s=u.tokens)||void 0===s?void 0:s.find((e=>e.tokenType===l.BackupPaymentSubscription)))||void 0===a?void 0:a.token);c=Object.assign(Object.assign({},u),{isRewardsUser:m,freeTippingOfferToken:p,freeSubscriptionOfferToken:v,backupPaymentToken:P,isFreeTippingEligibleRewardsUser:g,isFreeTippingEligibleNonRewardsUser:y,isFreeTippingEligibleUser:f,isFreeSubscriptionEligibleRewardsUser:h,isFreeSubscriptionEligibleNonRewardsUser:k,isFreeSubscriptionEligibleUser:b})}catch(e){c={isRewardsUser:!1}}return this.rewardsInfoObservers.forEach((e=>{e&&e(c)})),c}))}static createRewardsUser(e){var t;return(0,n.mG)(this,void 0,void 0,(function*(){const i={market:v.jG.CurrentMarket,source:e,ocid:"Peregrine"};try{const e=yield this.makeOneServiceRequest("news/users/me/rewards","POST",i);return this.notifyRewardsInfoObservers(),{isUserCreated:!0,message:e.Message||""}}catch(e){try{const i="User already exists.";if((null==e?void 0:e.Message)===i||(null===(t=yield null==e?void 0:e.json())||void 0===t?void 0:t.Message)===i)return{isUserCreated:!0,message:i}}catch(e){}return{isUserCreated:!1,message:e.message||e.Message||""}}}))}static getXpaySubscriptionPaymentOptions(e){return(0,n.mG)(this,void 0,void 0,(function*(){if(!["vid-ksdbkre0pxrdbnxqmr5xbyu056sdgdim5cna8urvbu45yi3x7jqs"].includes(e)||"en-us"!=v.jG.CurrentMarket)return[];const t=v.jG&&v.jG.CurrentMarket&&v.jG.CurrentMarket.split("-");return O.GET(O.endpoints.paymentOptions,{publisherIdFromMsn:e,market:t[1]}).then((e=>{var t;return(null===(t=null==e?void 0:e.paymentOptionGroups[0])||void 0===t?void 0:t.paymentOptions)||[]})).catch((e=>(console.error("error occured while trying to get subscription payment options: ",e),[])))}))}static getXPayTokenInfo(){return(0,n.mG)(this,void 0,void 0,(function*(){return v.jG.Environment===y.q.int?O.GET(I.k.externalUrls.ppeApi+"xpaytoken"):O.GET(O.domain+"xpaytoken")}))}static getMarketSettings(){return(0,n.mG)(this,void 0,void 0,(function*(){return O.GET(O.endpoints.marketsettings,{market:v.jG.CurrentMarket}).then((e=>C.k.convertMarketSettings(e||null)))}))}static getContentById({cmsId:e,market:t,url:i}){return(0,n.mG)(this,void 0,void 0,(function*(){const n=e&&this.isURL(e)?e:null,o={cmsid:e,market:t,version:"1.1"};return i&&(o.url=i),n&&(delete o.cmsid,o.url=n),t||delete o.market,O.GET(O.endpoints.contents,o).then((e=>C.k.convertContent(e||null)))}))}static getAllowAndBlockList(e,t){return(0,n.mG)(this,void 0,void 0,(function*(){return O.contentAllowBlockListMap[t]||(O.contentAllowBlockListMap[t]=O.getContentById({cmsId:e,market:t})),O.contentAllowBlockListMap[t]}))}static isURL(e){return!(!e||!e.includes("."))&&/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:[/?#]\S*)?$/i.test(e)}static getCommentById(e){return(0,n.mG)(this,void 0,void 0,(function*(){return O.GET(O.endpoints.comments+e).then((e=>C.k.convertComment(e||null)))}))}static getCommentsByContentId(e,t){return(0,n.mG)(this,void 0,void 0,(function*(){const i={contentId:e,$top:t.top||50,$skip:t.skip||0,$orderby:t.orderBy||t.sortType||"Rating"};return O.GET(O.endpoints.comments,i).then((e=>{let t="On";try{t=e.links.find((e=>"Content"==e.type)).item.commentStatus||t}catch(e){a.k.logError("Invalid content data in comments response.")}try{const i=C.k.convertCommentList(e||null);return i.commentStatus=t,i}catch(e){return a.k.logError("Invalid comment list data in comments response."),{commentStatus:"Off",list:[]}}}))}))}static getCommentsByParentId(e,t){return(0,n.mG)(this,void 0,void 0,(function*(){const i={parentId:e,$top:t.top||10,$skip:t.skip||0,$orderby:t.orderBy||"Time"};return O.GET(O.endpoints.comments,i).then((e=>C.k.convertCommentList(e||null)))}))}static getCommentsByAnchorCommentId(e,t){return(0,n.mG)(this,void 0,void 0,(function*(){const i={anchorId:e,$top:t.top||10,$skip:t.skip||0,$orderby:t.orderBy||"Time"};return O.GET(O.endpoints.comments,i).then((e=>C.k.convertCommentList(e||null)))}))}static getCommentsByUserId(e,t=10,i=0,o="Time"){return(0,n.mG)(this,void 0,void 0,(function*(){const n={userId:e,$top:t,$skip:i,$orderby:o};return O.GET(O.endpoints.comments,n).then((e=>C.k.convertCommentList(e||null))).catch((t=>{M.M0.sendAppErrorEvent(Object.assign(Object.assign({},r._yq),{message:`Error getting user comments ${e} ${JSON.stringify(t)}`}))}))}))}static postComment(e,t,i,o,r,s){return(0,n.mG)(this,void 0,void 0,(function*(){const t={ContentId:e,Body:i,parentId:o&&o!=e?o:void 0,mentionReply:r};let n={};return s&&(n.version=s),O.additionalParameters&&(n=Object.assign(Object.assign({},n),O.additionalParameters)),new Promise(((e,i)=>{O.POST(O.endpoints.comments,t,n).then((t=>{e(C.k.convertComment(t||null))}),(e=>{e.json().then((e=>{i(e)})).catch((t=>{a.k.logError("Error getting comment info: "+e.statusText),i()}))}))}))}))}static deleteComment(e){return(0,n.mG)(this,void 0,void 0,(function*(){return O.DELETE(O.endpoints.comments+e,{})}))}static appealComment(e){return(0,n.mG)(this,void 0,void 0,(function*(){return O.POST(O.endpoints.comments+e+"/appeals",{})}))}static reportComment(e,t,i){return(0,n.mG)(this,void 0,void 0,(function*(){const{reportMessage:n,intellectualPropertyDetails:o}=i||{},r={ReportType:t,ReportMessage:n||"",IntellectualPropertyDetails:o};try{return O.POST(O.endpoints.comments+e+"/abusereports",r,{version:"1.1"})}catch(e){a.k.logError(e)}}))}static uploadCopyrightFile(e){return(0,n.mG)(this,void 0,void 0,(function*(){const t=yield O.GET(O.endpoints.users+"me/UploadSasToken",{type:"ContentReport"}),i=yield o(),r=`https://${t.accountUrl.split("?")[0]}`,s=i.Blob.createBlobServiceWithSas(r,t.sasString);return new Promise(((i,o)=>{s.createBlockBlobFromBrowserFile(t.container,t.blobName,e,((e,r,s)=>(0,n.mG)(this,void 0,void 0,(function*(){return e?o(e):i(t.id)}))))}))}))}static prepareHubString(e){return e.replace(/-/g,"_")}static getSignalRConnectionInfo(e){return(0,n.mG)(this,void 0,void 0,(function*(){const t=this.prepareHubString(e);return O.POST(O.endpoints.typingUpdates+"RealtimeTypingNegotiate",{},{hub:t})}))}static broadcastCommentNotification(e,t,i){return(0,n.mG)(this,void 0,void 0,(function*(){const n=this.prepareHubString(e),o={type:"comment-notification",data:{commentId:t,commentParentId:i}};return O.POST(O.endpoints.typingUpdates+"RealtimeTypingBroadcast",o,{hub:n}).then((e=>{}),(e=>{}))}))}static broadcastTypingNotification(e,t,i,o){return(0,n.mG)(this,void 0,void 0,(function*(){const n=this.prepareHubString(e),r={type:"typing-notification",data:{id:t,name:i,profileImageUrl:o}};return O.POST(O.endpoints.typingUpdates+"RealtimeTypingBroadcast",r,{hub:n}).then((e=>{}),(e=>{}))}))}static sendReaction({id:e,item:t,localStorageSave:i,reactionType:o,url:r}){return(0,n.mG)(this,void 0,void 0,(function*(){let n={};r&&(n.url=r),O.additionalParameters&&(n=Object.assign(Object.assign({},n),O.additionalParameters));const s={subType:o};try{const r=yield O.POST(O.endpoints[t]+e+"/reactions",s,n);return D(e,o,!1,i),C.k.convertRatingToRateValue(r||null)}catch(e){return a.k.logError(e),o}}))}static sendResetReaction({id:e,item:t,localStorageSave:i,url:o}){return(0,n.mG)(this,void 0,void 0,(function*(){let n={};o&&(n=Object.assign(Object.assign({},n),{url:o})),O.additionalParameters&&(n=Object.assign(Object.assign({},n),O.additionalParameters));try{return D(e,null,!0,i),O.DELETE(O.endpoints[t]+e+"/reactions",n)}catch(e){a.k.logError(e)}}))}static getFriendRatings(e,t){return(0,n.mG)(this,void 0,void 0,(function*(){return O.GET(O.endpoints[e]+t+"/reactions",{friends:!0,$top:2})}))}static getRating(e,t){return(0,n.mG)(this,void 0,void 0,(function*(){return O.GET(O.endpoints[e]+t+"/reactions",{}).then((e=>C.k.convertRatingToRateValue(e||null)))}))}static getRatingBreakdown(e,t,i){return(0,n.mG)(this,void 0,void 0,(function*(){return O.GET(O.endpoints[e]+t+"/reactions",{others:!0}).then((e=>C.k.convertReactionsResponseToReactionBreakdownData(e||null,i)))}))}static sendContentStarRating(e,t,i,o){return(0,n.mG)(this,void 0,void 0,(function*(){const n={subType:i,surveyId:o};O.POST(O.endpoints.contents+e+"_"+t+"/starratings",n,{})}))}static sendResetContentStarRating(e,t,i){return(0,n.mG)(this,void 0,void 0,(function*(){const n={surveyId:i};O.DELETE(O.endpoints.contents+e+"_"+t+"/starratings",n)}))}static getContentStarRating(e,t,i){return(0,n.mG)(this,void 0,void 0,(function*(){const n={surveyId:i};return O.GET(O.endpoints.contents+e+"_"+t+"/starratings",n).then((e=>C.k.convertRatingToRateValue(e||null)))}))}static getContentStarRatingAverage(e,t){return(0,n.mG)(this,void 0,void 0,(function*(){const i=yield this.getStarRatingContentById(e,t);let n=0,o=0;for(const e in Object.keys(i.reactionCounts))switch(n+=i.reactionCounts[e],e){case A.H.angry:o+=1*i.reactionCounts[e];break;case A.H.like:o+=2*i.reactionCounts[e];break;case A.H.love:o+=3*i.reactionCounts[e];break;case A.H.sad:o+=4*i.reactionCounts[e];break;case A.H.surprised:o+=5*i.reactionCounts[e]}return i&&{contentId:i.id,averageStarRating:o/n}}))}static getStarRatingContentById(e,t){return(0,n.mG)(this,void 0,void 0,(function*(){return O.getContentById({cmsId:`https://assets.msn.com/labs/star-rating/${t}/${e}/rating`,market:t})}))}static getPostsByTopicId(e,t,i,o,s,a){return(0,n.mG)(this,void 0,void 0,(function*(){const n={topicId:e,postType:t||"",market:i||v.jG.CurrentMarket||"en-us",top:s||5,skip:a||0,orderBy:o||"Time"},c=f.c.getQueryParameterByName("isPpe",(0,R.l4)())?I.k.externalUrls.ppeApi.concat("posts/"):O.endpoints.posts;return O.GET(c,n).then((e=>C.k.convertPostList(e||null))).catch((t=>(M.M0.sendAppErrorEvent(Object.assign(Object.assign({},r.u$4),{message:`Error getting posts by topicId ${e} ${JSON.stringify(t)}`})),[])))}))}static getPostById(e){return(0,n.mG)(this,void 0,void 0,(function*(){const t={postId:e},i="true"===f.c.getQueryParameterByName("isPpe",(0,R.l4)())?I.k.externalUrls.ppeApi.concat("posts/"):O.endpoints.posts;return O.GET(i,t).then((e=>C.k.convertPost(e||null))).catch((t=>(M.M0.sendAppErrorEvent(Object.assign(Object.assign({},r.u$4),{message:`Error getting posts by id ${e} ${JSON.stringify(t)}`})),null)))}))}static SendGetRequest(e){return(0,n.mG)(this,void 0,void 0,(function*(){try{const t=yield this.fetchSocial(e,{method:"GET"});return yield t.json()}catch(e){return{}}}))}static GET(e,t){return(0,n.mG)(this,void 0,void 0,(function*(){const i={method:"GET",queryParams:t=t||{},body:void 0};return this.xhr(e,i)}))}static POST(e,t,i,o="POST"){return(0,n.mG)(this,void 0,void 0,(function*(){const n={method:o,queryParams:i=i||{},body:t};return this.xhr(e,n)}))}static PUT(e,t,i){return(0,n.mG)(this,void 0,void 0,(function*(){return O.POST(e,t,i,"PUT")}))}static DELETE(e,t){return(0,n.mG)(this,void 0,void 0,(function*(){const i={method:"DELETE",queryParams:t=t||{},body:void 0};return this.xhr(e,i)}))}static xhr(e,t={method:void 0,queryParams:void 0,body:void 0}){return(0,n.mG)(this,void 0,void 0,(function*(){let i="GET"!==t.method?{"Content-Type":"application/json"}:{};const n=yield b.$.getOneServiceHeaders(!1);i=Object.assign(Object.assign({},n),i),O.additionalHeaders&&(i=Object.assign(Object.assign({},i),O.additionalHeaders)),O.msaAccessToken&&(i.UserTicketType="2",i.UserAuthToken=O.msaAccessToken,i.SiteName="api.msn.com"),O.muid&&(i.muid=O.muid);b.$.getCommonParams2("social-peregrine").forEach((i=>{"user"===i.key&&e.startsWith(O.endpoints.posts)||i.value&&(t.queryParams[i.key]=i.value)})),t.queryParams.wrapodata="false",e.startsWith(O.domain)&&this.isApiModerationVertical&&(t.queryParams.source=`${v.jG.AppType}-community`);const o=(0,u.n)(t.queryParams),r={method:t.method||"GET",headers:i,credentials:e.match("xpay/subscription/paywall_nosign")?"same-origin":"include"};t.body&&(r.body=JSON.stringify(t.body));return(O.useCache?O.fetchCachedResponse(e+o,r):O.fetchSocial(e+o,r)).then((i=>{if(!(i.status>=200&&i.status<300||401==i.status))throw(i.status>499||400==i.status)&&this.onRequestError(e,t),i;if(204==i.status)return{};try{return i.clone().json().then((e=>(e.value&&(e=e.value[0]),e)))}catch(n){throw this.onRequestError(e,t),{status:i.status,statusText:"INVALID_RESPONSE"}}}))}))}static fetchCachedResponse(e,t){if(t&&"GET"==t.method&&e in O.cachedResponses)return O.cachedResponses[e];t&&"GET"!=t.method&&O.clearCache();const i=O.fetchSocial(e,t);return t&&"GET"==t.method&&(O.cachedResponses[e]=i,setTimeout((()=>{e in O.cachedResponses&&delete O.cachedResponses[e]}),2500)),i}static fetchSocial(e,t){return(0,n.mG)(this,void 0,void 0,(function*(){return O.shouldUseAbortableFetch?(0,h.Sm)(e,O.abortableFetchTimeout,t):U(e,t)}))}static clearCache(){O.cachedResponses={}}static onRequestError(e,t){const i=this.resourceForUrl(e),n=s[i]||s.unknown;c.log(Object.assign(Object.assign({},n),{message:"Request failed",pb:Object.assign(Object.assign({},n.pb),{customMessage:i,url:e,method:t.method})}))}static resourceForUrl(e){for(const[t,i]of Object.entries(T))if(e.indexOf(`/${i}`)>0)return i;return"unknown"}static makeOneServiceRequest(e,t,i,o){return(0,n.mG)(this,void 0,void 0,(function*(){const n=(0,P.PH)(e),r=(0,G.hC)()?b.$.getOneServiceParamsWithAuth(v.jG.UserId,"",!1):b.$.getOneServiceParamsWithoutAuth(v.jG.UserId,"",!1),s={};[...r,...Object.keys(i).map((e=>({key:e,value:i[e]}))),...[...n.searchParams.keys()].map((e=>({key:e,value:n.searchParams.get(e)})))].forEach((e=>{s[e.key]=e.value}));const a=n.origin+n.pathname;return"GET"===t?this.GET(a,s):this.POST(a,o,s)}))}}O.useCache=!0,O.domain=I.k.externalUrls.api,O.contentAllowBlockListMap={},O.shouldUseAbortableFetch=!1,O.abortableFetchTimeout=500,O.cachedResponses={},O.rewardsInfoObservers=[],O.endpoints={contents:O.domain.concat("urls/"),providerContents:O.domain.concat("contents"),comments:O.domain.concat("comments/"),posts:O.domain.concat("posts/"),users:O.domain.concat("users/"),follows:O.domain.concat("follows/"),marketsettings:O.domain.concat("marketsettings"),systags:"https://api.msn.com/graph/systags",typingUpdates:"https://assets.msn.com/labs/api/",publisherFeed:"https://api.msn.com/news/feed/pages/publisherfeed",paymentOptions:"https://assets.msn.com/xpay/subscription/paywall_nosign",providerFullPage:"https://assets.msn.com/service/news/feed/pages/providerfullpage",creatorHubFullPage:"https://assets.msn.com/service/news/feed/pages/creatorfullpage"},function(e){e.contents="contents",e.comments="comments",e.users="users"}(T||(T={})),function(e){e.article="article",e.slideshow="slideshow",e.video="video"}(S||(S={}));const j=e=>(0,n.mG)(void 0,void 0,void 0,(function*(){const t=(0,R.zp)().toLowerCase().indexOf(I.k.selectPpeParameter)>-1;if(v.jG.Environment!==y.q.int||t?v.jG.Environment===y.q.prod&&t&&console.warn("PPE environment must not be enabled in PROD environment for Subscription SDK to work"):console.warn("PPE environment will be used for xpay token JWT in INT environment for Subscription SDK to work"),N.supported){const t=v.jG.Environment===y.q.int?"int":"prod",i=`community_xpay_token_${e}_${t}`,n=`community_xpay_token_expires_${e}_${t}`,o=N.getItem(i);if(o){const e=N.getItem(n);if(e&&new Date(parseInt(e)).valueOf()-Date.now()>1e4)return o}const r=yield O.getXPayTokenInfo();return N.setItem(i,r.accessToken),N.setItem(n,(Date.now()+1e3*r.expiresIn).toString()),r.accessToken}return(yield O.getXPayTokenInfo()).accessToken})),N=(0,k.$o)(),D=(e,t,i,o)=>(0,n.mG)(void 0,void 0,void 0,(function*(){if(o)o(e,i?null:t);else if(N.supported){let n;if((0,G.hC)()&&(n=(0,m.z_)(),!n)){const e=yield O.fetchMe(!1);n=e.id}const o=(0,m.xp)(n,e),r=(0,m.nM)(n);if(i){N.setItem(o,""),N.removeItem(o);const t=N.getItem(r);let i=t?t.split(","):[];i=i.filter((t=>t!=e)),N.setItem(r,i.join(","))}else if(t){const i=N.getItem(r);let s=i?i.split(","):[];s.length>200&&(s=s.filter(((e,t)=>!(t<100)||(N.removeItem((0,m.xp)(n,e)),!1)))),s.push(e),N.setItem(o,t),N.setItem(r,s.join(","))}}}));!function(){(0,n.mG)(this,void 0,void 0,(function*(){if(N.supported){const e=N.getItem(m.JY);if(e){let t;if((0,G.hC)()){const e=yield O.fetchMe(!1);t=e.id}e.split(",").forEach((e=>{const i=N.getItem(`${m.oQ}${e}`);i&&(N.removeItem(`${m.oQ}${e}`),N.setItem((0,m.xp)(t,e),i))})),N.removeItem(m.JY),N.setItem((0,m.nM)(t),e)}}}))}(),(0,R.zp)().toLowerCase().indexOf(I.k.selectPpeParameter)>-1&&O.setDomain(I.k.externalUrls.ppeApi),v.jG.IsChinaCompliance&&O.setDomain(I.k.externalUrls.cnApi)},85281:function(e,t,i){i.d(t,{JY:function(){return u},nM:function(){return p},oQ:function(){return m},xp:function(){return v},yp:function(){return c},z_:function(){return d}});var n=i(65337),o=i(84169),r=i(51671);const s=(0,n.$o)(),a="community_latest_me_id";function c(e){e?s.setItem(a,e):e||l()}function d(){return s.getItem(a)}function l(){s.getItem(a)&&s.removeItem(a)}(0,r.hC)()||l();const u="myReactionIds",m="myReaction",p=e=>`myReactionIds_${e||o.jG.UserId}`,v=(e,t)=>`myReaction_${e||o.jG.UserId}_${t}`},3755:function(e,t,i){i.d(t,{X:function(){return o},n:function(){return r}});var n=i(33379);function o(e,t=null){return function(e){if(!(0,n.N)())return null;const t=window.location.hash.substring(1).split("&");for(let i=0;i<t.length;i++){const n=t[i].split("=");if(n[0].toLowerCase()==e.toLowerCase())return decodeURIComponent(n[1])}return null}(e)||function(e){if(!(0,n.N)())return null;const t=window.location.search.substring(1).split("&");for(let i=0;i<t.length;i++){const n=t[i].split("=");if(n[0].toLowerCase()==e.toLowerCase())return decodeURIComponent(n[1])}return null}(e)||t}function r(e){return e&&Object.keys(e).length>0?"?"+Object.keys(e).map((function(t){return`${t}=${encodeURIComponent(e[t])}`})).join("&"):""}},29921:function(e,t,i){i.d(t,{k:function(){return s}});var n=i(84169),o=i(82530);let r=n.jG.NavTargetUrlWithLocale;void 0!==o.env.JEST_WORKER_ID&&(n.jG.CurrentMarket||(r=r.replace("undefined","en-ca")));const s={selectPpeParameter:"oneservice_enable_ppe",renderWithMockData:"render_with_mock_data",externalUrls:{api:"https://assets.msn.com/service/community/",cnApi:"https://assets.msn.cn/service/community/",ppeApi:"https://ppe-api.msn.com/community/",guidelinePage:`${r}/community/guideline`,guidelinePageEmbed:`${r}/community/embed/guidelinepage`,profilePage:`${r}/community/profile/`,channelPage:`${r}/community/channel/`,privacySettings:`${r}/settings`,activityPage:`${r}/community/activity`,statusPage:`${r}/community/activity?profileStatus=true`,newPost:`${r}/community/post/new`,profileSettings:"https://account.microsoft.com/profile",feedbackForm:"https://forms.office.com/Pages/ResponsePage.aspx?id=v4j5cvGGr0GRqy180BHbR-V3gf69zQlBm1dJVuXA8mtURVI4UlFHMDRIR0VCWDFWNUQyQU5HVzJJQi4u",moderationEmail:"Appealsprocessor@microsoft.com"},userStateType:{existingUser:"existingUser",anonymous:"anonymous",newUser:"newUser"},userNameStatusType:{normal:"Normal",notAllow:"NotAllow",inReview:"InReview",unknown:"Unknown"},userAvatarStatusType:{normal:"Normal",notAllow:"NotAllow",inReview:"InReview",unknown:"Unknown"},accountModerationStatus:{normal:"Normal",warning:"Warning",firstStrike:"FirstStrike",secondStrike:"SecondStrike",permanentBan:"PermanentBan",ban:"Ban"},accountModerationStatusStringKeyMap:{restricted:"AccountStatusRestricted",atRisk:"AccountStatusAtRisk",warned:"AccountStatusWarned",FirstStrike:"AccountStatusActivitiesFirstStrike",SecondStrike:"AccountStatusActivitiesSecondStrike",Ban:"AccountStatusActivitiesThirdStrike",Warning:"AccountStatusActivitiesWarning"},activityModerationErrorTypeHeaderStringKeyMap:{Takedown:"ProfileActivityModerationErrorTakedownHeader",Ban:"ProfileActivityModerationErrorPermanentBanHeader",NotAllowName:"ProfileActivityModerationErrorNotAllowNameHeader",NotAllowPicture:"ProfileActivityModerationErrorNotAllowPictureHeader",ApproveUserAppeal:"ProfileActivityModerationErrorApproveUserAppealHeader",ApproveCommentAppeal:"ProfileActivityModerationErrorApproveCommentAppealHeader",ApproveProfilePicAppeal:"ProfileActivityModerationErrorApproveProfilePicAppealHeader",RejectUserAppeal:"ProfileActivityModerationErrorRejectUserAppealHeader",RejectCommentAppeal:"ProfileActivityModerationErrorRejectCommentAppealHeader",RejectProfilePicAppeal:"ProfileActivityModerationErrorRejectProfilePicAppealHeader",Warning:"ProfileActivityModerationErrorWarningHeader",FirstStrike:"ProfileActivityModerationErrorStrikeHeader",SecondStrike:"ProfileActivityModerationErrorStrikeHeader"},activityModerationErrorTypeExpiredHeaderStringKeyMap:{Warning:"ProfileActivityModerationErrorWarningExpiredHeader",FirstStrike:"ProfileActivityModerationErrorStrikeExpiredHeader",SecondStrike:"ProfileActivityModerationErrorStrikeExpiredHeader"},userAgeGroup:{under18:"Under18",above18:"Above18"},userSubType:{default:"Default",publisher:"Publisher",creator:"Creator"},activityType:{follow:"Follow",reply:"Reply",reaction:"Reaction",badge:"Achievement",moderation:"Moderation",commentDeleteAlert:"CommentDeleteAlert",profileBannedAlert:"ProfileBannedAlert",profileErrorAlert:"ProfileErrorAlert"},moderationErrorType:{takedown:"Takedown",ban:"Ban",notAllowName:"NotAllowName",notAllowPicture:"NotAllowPicture",approveUserAppeal:"ApproveUserAppeal",rejectUserAppeal:"RejectUserAppeal",approveProfilePicAppeal:"ApproveProfilePicAppeal",rejectProfilePicAppeal:"RejectProfilePicAppeal",approveCommentAppeal:"ApproveCommentAppeal",rejectCommentAppeal:"RejectCommentAppeal",warning:"Warning",firstStrike:"FirstStrike",secondStrike:"SecondStrike"},moderationTakedownReasonStringKeyMap:{"bullying-harassment":"ProfileActivityModerationTakedownReasonBullying",spam:"ProfileActivityModerationTakedownReasonSpam",violence:"ProfileActivityModerationTakedownReasonViolence",profanity:"ProfileActivityModerationTakedownReasonProfanity",abuse:"ProfileActivityModerationTakedownReasonAbuse","child-related":"ProfileActivityModerationTakedownReasonAbuse","misinformation-covid":"ProfileActivityModerationTakedownReasonMisinformation","misinformation-qanon":"ProfileActivityModerationTakedownReasonMisinformation",copyright:"ProfileActivityModerationTakedownReasonCopyright",danger:"ProfileActivityModerationTakedownReasonDanger","public-threats":"ProfileActivityModerationTakedownReasonPublicThreats",illegal:"ProfileActivityModerationTakedownReasonIllegal",terrorism:"ProfileActivityModerationTakedownReasonTerrorism",privacy:"ProfileActivityModerationTakedownReasonPrivacy",inappropriate:"ProfileActivityModerationTakedownReasonInappropriate","off-topic":"ProfileActivityModerationTakedownReasonOffTopic",impersonation:"ProfileActivityModerationTakedownReasonImpersonation","bullying-and-harassment":"ProfileActivityModerationTakedownReasonBullying","hate-speech":"ProfileActivityModerationTakedownReasonHateSpeech",suicide:"ProfileActivityModerationTakedownReasonSuicide","misinformation-us-2020":"ProfileActivityModerationTakedownReasonMisinformation","misinformation-brazil-election":"ProfileActivityModerationTakedownReasonMisinformation","misinformation-school-shooting":"ProfileActivityModerationTakedownReasonMisinformation","misinformation-russia-ukraine":"ProfileActivityModerationTakedownReasonMisinformation",trademark:"ProfileActivityModerationTakedownReasonTrademark"},moderationTakedownReasonGuidelinesListItems:{GuidelinesHarassmentPart:["GuidelinesPageGuidelinesTabAvoidPartText","GuidelinesPageGuidelinesTabAvoidPartHarassment","GuidelinesPageGuidelinesTabAvoidPartBullying"],GuidelinesRespectPart:["GuidelinesPageGuidelinesTabRespectPartText","GuidelinesPageGuidelinesTabRespectPartImpersonate","GuidelinesPageGuidelinesTabRespectPartRespectOthers","GuidelinesPageGuidelinesTabRespectPartNotShareContent"],GuidelinesAbusivePart:["GuidelinesPageGuidelinesTabReportPartText","GuidelinesPageGuidelinesTabReportPartViolent","GuidelinesPageGuidelinesTabReportPartIllegalAct","GuidelinesPageGuidelinesTabReportPartRiskTo","GuidelinesPageGuidelinesTabReportPartAbusiveText","GuidelinesPageGuidelinesTabReportPartHateSpeech"],GuidelinesDoNotPostPart:["GuidelinesPageGuidelinesTabFinalPartText","GuidelinesPageGuidelinesTabFinalPartCopywrited","GuidelinesPageGuidelinesTabFinalPartSpam"]},moderationTakedownReasonGuidelinesGroupings:{GuidelinesHarassmentPart:["ProfileActivityModerationTakedownReasonBullying"],GuidelinesRespectPart:["ProfileActivityModerationTakedownReasonMisinformation","ProfileActivityModerationTakedownReasonPrivacy","ProfileActivityModerationTakedownReasonImpersonation"],GuidelinesAbusivePart:["ProfileActivityModerationTakedownReasonViolence","ProfileActivityModerationTakedownReasonAbuse","ProfileActivityModerationTakedownReasonDanger","ProfileActivityModerationTakedownReasonPublicThreats","ProfileActivityModerationTakedownReasonChildRelated","ProfileActivityModerationTakedownReasonTerrorism","ProfileActivityModerationTakedownReasonHateSpeech","ProfileActivityModerationTakedownReasonSuicide","ProfileActivityModerationTakedownReasonIllegal","ProfileActivityModerationTakedownReasonProfanity"],GuidelinesDoNotPostPart:["ProfileActivityModerationTakedownReasonSpam","ProfileActivityModerationTakedownReasonCopyright","ProfileActivityModerationTakedownReasonTrademark"]},activityModerationErrorTypeStringKeyMap:{Takedown:"ProfileActivityModerationErrorTakedown",Ban:"ProfileActivityModerationErrorPermanentBan",NotAllowName:"ProfileActivityModerationErrorNotAllowName",NotAllowPicture:"ProfileActivityModerationErrorNotAllowPicture",ApproveUserAppeal:"ProfileActivityModerationErrorApproveUserAppeal",ApproveCommentAppeal:"ProfileActivityModerationErrorApproveCommentAppeal",ApproveProfilePicAppeal:"ProfileActivityModerationErrorApproveProfilePicAppeal",RejectUserAppeal:"ProfileActivityModerationErrorRejectUserAppeal",RejectCommentAppeal:"ProfileActivityModerationErrorRejectCommentAppeal",RejectProfilePicAppeal:"ProfileActivityModerationErrorRejectProfilePicAppeal",Warning:"ProfileActivityModerationErrorWarning",FirstStrike:"ProfileActivityModerationErrorFirstStrike",SecondStrike:"ProfileActivityModerationErrorSecondStrike"},visibleStatusType:{Normal:"Normal",DeletedByUser:"DeletedByUser",DeletedByAI:"DeletedByAI",DeletedByHI:"DeletedByHI",InReview:"InReview"},visibleStatusMap:{DeletedByUser:"VisibleStatusDeletedByUser",DeletedByAI:"VisibleStatusDeletedByAI",DeletedByHI:"VisibleStatusDeletedByHI",InReview:"VisibleStatusInReview",Default:"VisibleStatusOther"},reactionOrder:["like","love","surprised","thinking","sad","angry"],binaryReactionOrder:["upvote","downvote"],profileReportItemMap:{UserName:"ReportUserName",ProfilePicture:"ReportProfilePicture"},profilePageEmptyStates:{NoUser:"NoUser",NotSocialUser:"NotSocialUser"},reactionIconMap:{like:"EmojiLike",love:"EmojiHeart",thinking:"EmojiThinking",surprised:"EmojiSurprised",sad:"EmojiSad",angry:"EmojiAngry"},reactions:{like:"like",love:"love",thinking:"thinking",surprised:"surprised",sad:"sad",angry:"angry"},responsiveLevels:{L0:"cwtl-0",L1:"cwtl-1",L2:"cwtl-2",MobilePopup:"cwt-mobile-popup",articleOneBlock:"cwt-article-one-block"},newCommentErrorCodeMap:{400:"NewPostDeniedMsg",403:"NewPostSessionExpiredMsg",500:"NewPostWentWrongMsg",bodyTooLong:"NewPostTooLongMsg",other:"NewPostWentWrongMsg",0:"NewPostWentWrongMsg",1:"NewPostSessionExpiredMsg",4:"NewPostDeniedMsg",6:"NewPostWentWrongMsg",7:"NewPostWentWrongMsg",8:"NewPostWentWrongMsg",9:"NewPostWentWrongMsg",10:"NewPostWentWrongMsg",11:"NewPostWentWrongMsg",12:"NewPostTooManyCommentsMsg",20:"NewPostTooLongMsg",21:"NewPostMentionMsg",22:"NewPostWentWrongMsg",23:"NewPostWentWrongMsg",24:"NewPostDeniedMsg",25:"NewPostWentWrongMsg",26:"NewPostWentWrongMsg",27:"NewPostWentWrongMsg",28:"NewPostDeniedMsg",29:"NewPostDeniedMsg",30:"NewPostDeniedMsg",31:"NewPostDeniedMsg",32:{1:"NewPostDuplicatedMsg",2:"NewPostDeniedMsg",3:"NewPostDeniedMsg",4:"NewPostDeniedMsg",5:"NewPostDeniedMsg",6:"NewPostDeniedMsg",7:"NewPostDeniedMsg",8:"NewPostDeniedMsg",9:"NewPostDeniedMsg",10:"NewPostDeniedMsg",11:"NewPostDeniedMsg",12:"NewPostDeniedMsg",13:"NewPostDeniedMsg",14:"NewPostDeniedMsg",15:"NewPostDeniedMsg",16:"NewPostDeniedMsg",17:"NewPostLanguageErrorMsg",18:"NewPostURLMsg"}},newCommentErrorCodeMapDeletedByAiVersion1_1:{0:"NewCommentDeletedByAIReasonSpam",1:"NewCommentDeletedByAIReasonProfanity",2:"NewCommentDeletedByAIReasonAbuse",3:"NewCommentDeletedByAIReasonPrivacy",4:"",5:"",6:"",7:"NewCommentDeletedByAIReasonViolence",8:"",9:"NewCommentDeletedByAIReasonIllegal",10:"NewCommentDeletedByAIReasonTerrorismOrViolentExtremism",11:"NewCommentDeletedByAIReasonTerrorismOrViolentExtremism",12:"NewCommentDeletedByAIReasonCopyright",13:"",14:"",15:"",16:"NewCommentDeletedByAIReasonTrademark",17:"",18:"",19:"",20:"",21:"",22:"",23:"",24:"",25:"NewCommentDeletedByAIReasonMisinformation",26:"NewCommentDeletedByAIReasonHateSpeech",27:"NewCommentDeletedByAIReasonBullyingAndHarassment",28:"NewCommentDeletedByAIReasonSuicideAndSelfHarm",29:"",30:"",31:"",32:"NewCommentDeletedByAIReasonMisinformation",33:"",34:"",35:"NewCommentDeletedByAIReasonImpersonation"},commentsStatusType:{zero:0,minimal:1,expanded:2,notDetermined:3},theme:{default:{name:"default",disabledComponents:[]},superappBase:{name:"superapp",disabledComponents:[]},windowsBase:{name:"windows",disabledComponents:[]},superappEmbed:{name:"superapp-embed",modalComponents:["reactionbreakdowncomment","reactionbreakdowncontent","onboardingpage","onboardingthirdpartypage","onboardingunderagepage","reportmenu","profilereportmenu","copyrightform","trademarkform"],disabledComponents:["profilepage","guidelinepage","articlepage","multiloginpage","reactionbreakdowncomment","reactionbreakdowncontent","onboardingpage","onboardingthirdpartypage","onboardingunderagepage","reportmenu","profilereportmenu","copyrightform","trademarkform"]},superappFullpage:{name:"superapp-fullpage",modalComponents:["reactionbreakdowncomment","reactionbreakdowncontent","onboardingpage","onboardingthirdpartypage","onboardingunderagepage","reportmenu","profilereportmenu","copyrightform","trademarkform"],disabledComponents:["profilepage","guidelinepage","articlepage","multiloginpage","onboardingthirdpartypage"]},genericPopup:{name:"feed-popup",disabledComponents:[]}},profileVisitedLocalStorageKey:"self-profile-visited",entryPointInfo:{article:"article",articleHeader:"articleHeader",articleRightRail:"articleRightRail",publisherProfile:"publisherProfile"},supportSourceForTelemetryInfo:{tipPromotionInArticle:"SocialTipPromotionInArticle",tipPromotion:"SocialTipPromotion",tipSelection:"SocialTipSelection"},moderationSourceOverrideVerticals:["finance","sports"]}},77223:function(e,t,i){i.d(t,{B_:function(){return r}});var n=i(82530);function o(e){const t=window.location.search.substring(1).split("&"),i=[];for(let n=0;n<t.length;n++){const o=t[n].split("=");o[0].toLowerCase()==e.toLowerCase()&&i.push(o[1])}return i.length>0?i.map((e=>decodeURIComponent(e||""))).join(","):null}function r(e,t,i){const r={};["fdhead","item","rt","theme","ocid","env","oneservice_enable_ppe"].map((e=>{const t=o(e);null!==t&&(r[e]=t)}));const s=(a=r)&&Object.keys(a).length>0?"?"+Object.keys(a).map((function(e){return a[e].split(",").map((t=>t?`${e}=${encodeURIComponent(t)}`:e)).join("&")})).join("&"):"";var a;const c=void 0!==n.env.JEST_WORKER_ID?"/en-ca/":"/en-us/";t&&e.indexOf(c)>0&&(e=e.replace(c,`/${t}/`));const d=[e];return s&&-1!=e.indexOf("?")?d.push(`&${s.substring(1)}`):s&&d.push(s),d.push(i?`#comments&commentId=${i}`:""),d.join("")}}}]);