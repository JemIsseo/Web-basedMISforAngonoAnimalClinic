"use strict";(self.webpackChunk_msnews_msnews_experiences=self.webpackChunk_msnews_msnews_experiences||[]).push([["welcomeGreeting"],{23091:function(e,t,n){n.d(t,{GN:function(){return u},HB:function(){return r},Nq:function(){return p},OT:function(){return c},XV:function(){return d},k7:function(){return h},oC:function(){return l}});var o,i,r,a,s=n(11670);!function(e){e.weatherRootId="wea-greet-root",e.welcomeContainerId="i_welcome",e.weatherContainerId="i_weather",e.locationContainerId="i_location",e.moneyCardContainerId="i_finance"}(o||(o={})),function(e){e.WrapperTelemetry="welcome",e.WeatherTelemetry="weather_greeting",e.WeatherLinkTelemetry="weather_link",e.WeatherDegreeTelemetry="degree_switch",e.WeatherEditTelemetry="weathereditbtn",e.WeatherSettingTelemetry="settingdialog",e.WeatherGreetingLocationTelemetry="weathergreetinglocation",e.WeatherDetectLocation="detectlocation",e.WeatherSelectLocation="selectLocation",e.WeatherSearchLocationTelemetry="searchlocation",e.WeatherAutoSuggestTelemetry="autosuggest",e.WeatherAutoSuggestResultsTelemetry="autosuggestresults",e.WeatherDegreeTypeTelemetry="degreetype",e.WeatherFahrenheitTelemetry="fahrenheit",e.WeatherCelsiusTelemetry="celsius",e.WeatherSaveTelemetry="done",e.WeatherCancelTelemetry="close",e.WeatherVertical="weather",e.WeatherCategory="today",e.FinanceTelemetry="finance_greeting",e.FinanceGreetingClickTelemetry="finance_greeting_link",e.FinanceVertical="Finance",e.FinanceCategory="greeting",e.Dropdown="dropdown",e.DetectedLocation="detected_location",e.FollowedLocation="followed_location",e.AddLocation="add_location"}(i||(i={})),function(e){e.Gainer="positive",e.Loser="negative",e.General="general"}(r||(r={})),function(e){e.Greeting="finCntr",e.HoverCard="hvc"}(a||(a={}));const c={FinanceGreetingsShown:"FinanceGreetingShown",MoneyGreetingWatchlistUser:"MoneyGreetingWatchlistUser",PriceNotfPresent:"PriceNotfPresent",InstitutionalNotfPresent:"InstitutionalNotfPresent",EarningNotfPresent:"EarningNotfPresent",TechnicalNotfPresent:"TechnicalNotfPresent",SentimentNotfPresent:"SentimentNotfPresent",MoneyGreetingSpotlightDataFrom:"MoneyGreetingSpotlightDataFrom",MoneyGreetingSpotlightOnHover:"MoneyGreetingSpotlightOnHover",MoneyGreetingNotificationType:"MoneyGreetingNotificationType",SuggestedForYouPresent:"SuggestedForYouPresent"},l={[s.JD.PriceDrop]:c.PriceNotfPresent,[s.JD.PriceSpike]:c.PriceNotfPresent,[s.JD.InstitutionalHolding]:c.InstitutionalNotfPresent,[s.JD.EarningRelease]:c.EarningNotfPresent,[s.JD.TechnicalIndicator]:c.TechnicalNotfPresent,[s.JD.Sentiment]:c.SentimentNotfPresent},d={[s.JD.InstitutionalHolding]:"L3_Ownership",[s.JD.EarningRelease]:"L3_Earnings",[s.JD.Sentiment]:"L3_Sentiment"},u={Bullish:"bullish",Bearish:"bearish"},h={LocAccuConfirmedLocation:"LocAccuConfirmedLocation",LocAccuChangedLocation:"LocAccuChangedLocation"},p=new Set(["settings","hoverSetting","dayOfWeek","ntpCoachMarkBadgeLocalization","airQuality"])},45612:function(e,t,n){var o;n.d(t,{rW:function(){return l},VV:function(){return s},a_:function(){return a},_2:function(){return r}}),function(e){e[e.Hurricane=1]="Hurricane",e[e.NormalWeather=2]="NormalWeather",e[e.Nowcast=3]="Nowcast",e[e.SevereWeather=4]="SevereWeather",e[e["SevereWeather#Spotlight"]=5]="SevereWeather#Spotlight",e[e.GoodWeatherWeekend=6]="GoodWeatherWeekend",e[e["GoodWeatherWeekend#HalfCard"]=7]="GoodWeatherWeekend#HalfCard",e[e.Holiday=8]="Holiday",e[e.NewsHalfCard=9]="NewsHalfCard",e[e.InterestHalfCard=10]="InterestHalfCard",e[e.TomorrowV0=11]="TomorrowV0",e[e.HourlyTrend=12]="HourlyTrend",e[e.LifeIndex=13]="LifeIndex",e[e.LifeSolarTerm=14]="LifeSolarTerm",e[e.LifeHolidayPromotion=15]="LifeHolidayPromotion",e[e.CustomEditorial=16]="CustomEditorial",e[e.AlertNowcast=17]="AlertNowcast",e[e.AQICard=18]="AQICard",e[e.TeaserCard=19]="TeaserCard",e[e.TeaserHumidity=20]="TeaserHumidity",e[e.TeaserUVIndex=21]="TeaserUVIndex",e[e.TeaserDayTempChange=22]="TeaserDayTempChange",e[e.JwaPollen=23]="JwaPollen",e[e.USPollen=24]="USPollen",e[e.EUPollen=25]="EUPollen",e[e.WildFirePointCard=26]="WildFirePointCard",e[e.WildFirePointFullCard=27]="WildFirePointFullCard",e[e.TeaserCardV2=28]="TeaserCardV2",e[e.HurricaneAround=29]="HurricaneAround",e[e.HrcnEvent=30]="HrcnEvent",e[e.Promote3dCardV1=31]="Promote3dCardV1",e[e.Promote3dCardV2=32]="Promote3dCardV2",e[e.TeaserWeekSummary=33]="TeaserWeekSummary",e[e.TeaserWeekendSummary=34]="TeaserWeekendSummary",e[e.ForecastVideo=35]="ForecastVideo",e[e.TeaserPersonaSummary=36]="TeaserPersonaSummary",e[e.Storm=37]="Storm",e[e.TeaserDayTempChangeDay=38]="TeaserDayTempChangeDay"}(o||(o={}));var i=n(38156);function r(e,t,n){if(!e||!n)return;return function(e,t,n){const o=c(e,t,i.wu.Customize,i.uH.Greeting,"weather","today"),r=c(o,"weather_link",i.wu.Navigate,i.uH.Greeting,"weather","today",n.deepLink,n.currentTemperature+n.degreeSetting),a=c(o,"degree_switch",i.wu.Customize,i.uH.Greeting,"weather","today"),s=c(o,"weathereditbtn",i.wu.Customize,i.uH.Greeting,"weather","today").getMetadataTag(),l=c(o,"settingdialog",i.wu.Customize,i.uH.Greeting,"weather","today"),d=o.addOrUpdateChild({name:"dropdown",behavior:i.wu.Customize,type:i.c9.ActionButton,content:{type:i.uH.StructuredData,vertical:"weather",category:"today"}}),u=o.addOrUpdateChild({name:"detected_location",behavior:i.wu.Customize,type:i.c9.ActionButton,content:{type:i.uH.StructuredData,vertical:"weather",category:"today"}}),h=o.addOrUpdateChild({name:"followed_location",behavior:i.wu.Customize,type:i.c9.ActionButton,content:{type:i.uH.StructuredData,vertical:"weather",category:"today"}}),p=o.addOrUpdateChild({name:"add_location",behavior:i.wu.Customize,type:i.c9.ActionButton,content:{type:i.uH.StructuredData,vertical:"weather",category:"today"}}),g=l.getMetadataTag(),f=l.addOrUpdateChild({name:"detectlocation",behavior:i.wu.Customize,type:i.c9.ActionButton}).getMetadataTag(),m=l.addOrUpdateChild({name:"selectLocation",behavior:i.wu.Customize,type:i.c9.ActionButton}).getMetadataTag(),y=l.addOrUpdateChild({name:"searchlocation",behavior:i.wu.Customize,type:i.c9.Module}).getMetadataTag(),v=l.addOrUpdateChild({name:"autosuggest",behavior:i.wu.Customize,type:i.c9.InputBox}).getMetadataTag(),w=l.addOrUpdateChild({name:"autosuggestresults",behavior:i.wu.Customize,type:i.c9.DropDown}).getMetadataTag(),C=l.addOrUpdateChild({name:"degreetype",behavior:i.wu.Customize,type:i.c9.Interaction}).getMetadataTag(),x=l.addOrUpdateChild({name:"fahrenheit",behavior:i.wu.Customize,type:i.c9.ActionButton}).getMetadataTag(),b=l.addOrUpdateChild({name:"celsius",behavior:i.wu.Customize,type:i.c9.ActionButton}).getMetadataTag(),L=l.addOrUpdateChild({name:"done",behavior:i.wu.Save,content:{headline:"done",type:i.uH.Greeting,vertical:"weather",category:"today"},type:i.c9.ActionButton}).getMetadataTag(),k=l.addOrUpdateChild({name:"close",behavior:i.wu.Cancel,content:{headline:"close",type:i.uH.Greeting,vertical:"weather",category:"today"},type:i.c9.ActionButton}).getMetadataTag();return{weatherTelemetryObject:o,weatherLinkTelemetryObject:r,weatherSwitchTelemetryObject:a,weatherEditTelemetryTags:s,weatherSettingTelemetryTags:g,detectLocationTelemetryTags:f,specifyLocationTelemetryTags:m,searchLocationTelemetryTags:y,autoSuggestTelemetryTags:v,autoSuggestResultTelemetryTags:w,degreeTypeTelemetryTags:C,fahrenheitTelemetryTags:x,celsiusTelemetryTags:b,editSaveTelemetryTags:L,editCancelTelemetryTags:k,addLocation:p,followedLocation:h,detectedLocation:u,dropdown:d}}(e,"msnhp"===t.renderEnv?"WeatherTodayMiniModule":"weather_greeting",n)}function a(e,t){if(!e)return;const n=c(e,"weather_greeting",i.wu.Customize,i.uH.Greeting,"weather","today"),r={};return Object.keys(o).forEach((e=>{const o=c(n,`weather_link_${e}`,i.wu.Navigate,i.uH.Greeting,"weather","today",t.deepLink,t.currentTemperature+t.degreeSetting);r[e]=null==o?void 0:o.getMetadataTag()})),r}function s(e){if(e)return function(e){const t=c(e,"finance_greeting",i.wu.Customize,i.uH.Greeting,"Finance","greeting");return{financeTelemetryObject:t,financeGreetingClickTelemetryTags:(e,n)=>c(t,"finance_greeting_link",i.wu.Navigate,i.uH.Greeting,"Finance","greeting",e,n).getMetadataTag(),openMoneyCardClickTelemetryTag:e=>c(t,"finance_greeting_link",i.wu.More,i.uH.Greeting,"Finance","greeting","",e).getMetadataTag()}}(e)}function c(e,t,n,o,i,r,a,s){return e.addOrUpdateChild({name:t,behavior:n,content:{headline:s||t,type:o,vertical:i,category:r},overrideDestinationUrl:a||""})}const l={WeatherGreetingRotationTypes:"WeatherGreetingRotationTypes",WeatherGreetingCurrType:"WeatherGreetingCurrType"}},64830:function(e,t,n){n.r(t),n.d(t,{ToolingInfo:function(){return Ct},WelcomeGreetingWC:function(){return tt},WelcomeGreetingWCStyles:function(){return wt},WelcomeGreetingWCTemplate:function(){return pt}});var o=n(89026),i=n(63070),r=n(22506),a=n(7508),s=n(89489),c=n(83480),l=n(76679),d=n(17053),u=n(44475),h=n(87275),p=n(40260),g=n(13788),f=n(85646);var m,y=n(33940),v=n(58958),w=n(73252),C=n(41115),x=n(65337),b=n(9375),L=n(64488),k=n(1334),T=n(29422),S=n(80569),D=n(87230),W=n(86331),I=n(53076),M=n(83227),O=n(38985),_=n(59114),F=n(81368),P=n(38573),R=n(27652),$=n(92157),j=n(18257),E=n(31699),H=n(94537),G=n(42590),A=n(99452),B=n(26415),N=n(19388),U=n(62676),z=n(68364),V=n(14752),q=n(39926),Q=n(33572);!function(e){e[e.Forecast=0]="Forecast",e[e.Setting=1]="Setting",e[e.Error=2]="Error"}(m||(m={}));const K="24px",Y=1e4,J="https://assets.msn.com/weathermapdata/1/static/background/v2.0/jpg/",Z={sunnyImageUrl:"sunny.jpg",sunnyNightImageUrl:"clear_night.jpg",rainImageUrl:"rain_2.jpg",rainNightImageUrl:"rain_1.jpg",snowImageUrl:"snow_2.jpg",snowNightImageUrl:"snow_1.jpg",dustImageUrl:"duststorm_2.jpg",dustNightImageUrl:"duststorm_1.jpg",cloudyImageUrl:"cloudy_2.jpg",cloudyNightImageUrl:"cloudy_1.jpg",stormImageUrl:"thunderstorms_2.jpg",stormNightImageUrl:"thunderstorms_1.jpg",fogImageUrl:"light_fog.jpg",fogNightImageUrl:"hazy_night.jpg",sunnySunsetImageUrl:"partlysunny_sunset.jpg",cloudySunsetImageUrl:"mostcloudy_sunset.jpg",hazyImageUrl:"hazy_day.jpg",partlySunnyImageUrl:"partlysunny_day.jpg"},X={darkBg:{btnHintBackground:"rgba(225, 225, 225, 0.09)",btnHoverBackground:"rgba(255, 255, 255, 0.15)"},lightBg:{btnHintBackground:"rgba(0, 0, 0, 0.07)",btnHoverBackground:"rgba(255, 255, 255, 0.6)"}},ee="{contentType}_{contentId}_greeting";var te=n(23091),ne=n(65135),oe=n(38156),ie=n(18461),re=n(71048),ae=n(41120),se=n(23603),ce=n(92592),le=n(21256),de=n(38319),ue=n(69501),he=n(91383),pe=n(49218),ge=n(52292),fe=n(54788),me=n(19628),ye=n(29442),ve=n(51854);const we=["TempChange","WindChange","DayTemp","RainStart","RainStop","SnowStart","SnowStop","EtreeRecall"],Ce=new Map([["Nowcast",{type:"nowcast",validator:Le}],["AlertNowcast",{type:"nowcastalert",validator:function(e){const t=Le(e);if(!t)return!1;const n=ke(e);if(!n)return!1;const o={};"object"==typeof t&&(o.backgroundData=t.backgroundData,o.rotationInfo=t.rotationInfo);"object"==typeof n&&"object"==typeof n.summaryData&&(o.summaryData=n.summaryData);return o}}],["SevereWeather",{type:"severeweather",validator:ke}],["SevereWeather#Spotlight",{type:"severeweather",validator:ke}],["AQICard",{type:"aqi",validator:Te}],["AQICardNew",{type:"aqDashboard",validator:Te}],["Hurricane",{type:"hurricane",validator:Se}],["HurricaneAround",{type:"hurricane",validator:Se}],["TeaserCard",{type:null,validator:function(e){const{weatherData:t,config:n,contentData:o,isRotationalPreview:i,strings:r,mapLinkOptions:a}=e||{},s=o&&o.content&&o.content[0];if(!s||!t)return!1;const c=s.cap,l=s.moreBtnText||n.localizedStrings.seeForecastTip,d=s.capIcon,u=t.currentCondition.deepLink;let h=s.imgUrl,p=s.destUrl;h&&!h.startsWith("http")&&(h=(0,ve.d3)(t,h,u));p&&!p.startsWith("http")&&(p=(0,ve.d3)(t,p,u),h=null!=h?h:p);if(c&&l){const e=(0,ie.ld)(d,re.qF),n=Me([e],"16","");return{rotationInfo:{icon:Me([e],"24",""),text:c,footerContent:s.moreBtnText||r.seeForecastTip,footerLink:p||t.currentCondition.deepLink},summaryData:{summaryIcon:n,summaryLine1:c,summaryLink:h,summaryIconSize:16},ctaText:l,ctaLink:p}}return!1}}],["WildFirePointFullCard",{type:"wildfirepoint",validator:function(e){const{weatherData:t,strings:n,mapLinkOptions:o}=e||{};if(!t)return!1;const i=function(e,t){var n;const o=e&&e.contentData&&e.contentData[0],i=o&&o.content&&o.content[0],r=i&&i.metadata&&JSON.parse(i.metadata)||{},a=(0,ge.o8)(null===(n=null==e?void 0:e.currentCondition)||void 0===n?void 0:n.locationRaw,r),s=function(e,t){switch(null==e?void 0:e.type){case"Prescribed Fire":return t.prescribedFireTip;case"Burned Area Emergency Response":return t.postFireTip}return t.activeFireTip}(r,t);let c=t.wildfireDefaultTip;a>0&&(c=me.Ld.Format(s,{n:a}));return{metadataId:r.id,greetingWording:xe(r,t),text:`${r.name}`,size:"twolines",secondLine:c,icon:Me([(0,ie.ld)(re.MN,re.qF)],"38","")}}(t,n),r=(0,S.Z$)(t.currentLocation,t.unit,"wildfire",Object.assign(Object.assign({},o),{zoom:5,wfid:i.metadataId,subs:"wildfirepoint"})),a=(0,ie.ld)(re.ge,re.qF),s=n.seeMoreActionFireText||n.seeForecastTip,c=(0,v.Y)(),l=c?"darkBg":"lightBg",d={summaryIcon:Me([a],"16",""),summaryLine1:i.text,disableArrow:!0},u={icon:Me([a],"24",""),text:i.greetingWording||i.text,footerContent:s,footerLink:r,defaultMapPageUrl:r,mapType:he.p0.WildfirePoint};return{summaryData:d,rotationInfo:u,backgroundData:Object.assign(Object.assign({background:c?"url('https://assets.msn.com/weathermapdata/1/static/background/v2.0/WildfireBackgroundBlk.png')":"url('https://assets.msn.com/weathermapdata/1/static/background/v2.0/WildfireBackgroundLight.png')",enable1u:!0,isCustomized:!0,disablePreloadBg:!0,link:r},ie.y3[l]),X[l])}}}],["JwaPollen",{type:"pollen",validator:function(e){var t,n;const{weatherData:o,contentData:i,strings:r}=e||{},a=i&&i.content&&i.content[0];if(!o||!a)return!1;const s=function(e,t){if(!(e&&t&&t.content&&t.content[0]))return null;const n=t.content[0],o=t.id,i=(null==n?void 0:n.capIcon)||"00";let r=e.currentCondition.deepLink.replace("forecast","pollen");"wxjwatoday"!=o&&"wxjwatmr"!=o&&(r+="&pollenfrom=flyout");const a=Me([(0,ie.Re)(i,t.contenttype)],"16","");return{text:(null==n?void 0:n.cap)+" >",icon:a,link:r,position:"right"}}(o,i),c=r.seeForecastTip,l=null===(t=o.currentCondition)||void 0===t?void 0:t.deepLink;if(s&&s.text&&s.icon){const e=null===(n=/.*：(.*)。.*/g.exec(s.text))||void 0===n?void 0:n[1];if(e)return{rotationInfo:{icon:s.icon,text:e,footerContent:c,footerLink:l,defaultMapPageUrl:s.link,mapType:he.p0.Pollen}}}return{}}}],["EUPollen",{type:"pollenindex",validator:De}],["USPollen",{type:"pollenindex",validator:De}]]);function xe(e,t){return"Burned Area Emergency Response"===(null==e?void 0:e.type)?t.postFireGreeting:t.activeFireGreeting}function be(e){var t,n;let o=e.currentCondition&&e.currentCondition.normalizedSkyCode;const i=null===(n=null===(t=null==e?void 0:e.forecast)||void 0===t?void 0:t[0])||void 0===n?void 0:n.almanac,r=i&&(0,ae.Y)(new Date,new Date(i.sunrise),new Date(i.sunset)),a=new se.U(o,r,Z,J);o=a.getSunriseSunsetSkyCode();const s=a.getBackgroudImage(o);return s&&s["background-image"]?{backgroundData:Object.assign(Object.assign({disablePreloadBg:!0,background:s["background-image"],isCustomized:!0,enable1u:!0},ie.y3.darkBg),X.darkBg)}:null}function Le(e){var t,n,o,i,r,a,s,c;const{weatherData:l,config:d,contentData:u,strings:h,isRotationalPreview:p,mapLinkOptions:g}=e||{};if(!l||!l.nowcasting||!l.source)return!1;const f=l.nowcasting;if(!f.isRaining||255===f.weathertype||!f.shortSummary)return!1;const m=(0,S.Z$)(l.currentLocation,l.unit,"precipitation",g);let y=h.seeMoreActionRainTextShort||h.seeMoreActionRainTextV3;const v=m||l.currentCondition.deepLink;1===(null===(t=l.nowcasting)||void 0===t?void 0:t.weathertype)?y=h.seeMoreActionSnowTextShort||h.seeMoreActionSnowText:2===(null===(n=l.nowcasting)||void 0===n?void 0:n.weathertype)&&(y=h.seeMoreActionSleetTextShort||h.seeMoreActionSleetText);const w=fe.x.getWeatherGlyphBySymbolOrSkyCode(null===(o=null==l?void 0:l.currentCondition)||void 0===o?void 0:o.symbol,null===(i=null==l?void 0:l.currentCondition)||void 0===i?void 0:i.pvdrIcon,d.skycodeIconPath||""),C=(null===(r=l.nowcasting)||void 0===r?void 0:r.shortSummary)?l.nowcasting.shortSummary:null===(a=l.currentCondition)||void 0===a?void 0:a.shortCap,x={icon:Me([w],"24",""),text:(null===(s=null==l?void 0:l.currentCondition)||void 0===s?void 0:s.currentTemperature)+(null===(c=null==l?void 0:l.currentCondition)||void 0===c?void 0:c.degreeSetting),footerContent:y||h.seeForecastTip,footerLink:v,defaultMapPageUrl:m,mapType:he.p0.Precipitation},b=l.currentCondition&&l.currentCondition.normalizedSkyCode,L=new se.U(b,!0,Z,J),{bgImageIcon:k,animationType:T}=L.getNowcastingAnimationConfig(),D=d.enableNowcastAnimation&&T&&le.qn.has(T),W=L.getBackgroudImage(D?k:b);return{rotationInfo:x,backgroundData:Object.assign(Object.assign(Object.assign(Object.assign({disablePreloadBg:!0,isCustomized:!0,enable1u:!0,link:l.currentCondition.deepLink},W&&W["background-image"]&&{background:W["background-image"]}),D&&{animationSource:le.qn.get(T)}),ie.y3.darkBg),X.darkBg),summaryData:{summaryIcon:Me([(0,ie.ld)("waterDrop.svg",re.Mx)],"10","","weather-current-precipitation-glyph nocolor-img-precipitation"),summaryLine1:C,summaryLink:v,summaryIconSize:16}}}function ke(e){var t,n,o;const{weatherData:i,config:r,contentData:a,isRotationalPreview:s,strings:c,mapLinkOptions:l}=e||{};if(!i||!a)return!1;const d=(0,ce.Vt)(i,a);if(!d)return!1;const u=c.seeForecastTip,h=null===(t=i.currentCondition)||void 0===t?void 0:t.deepLink,p=function(e){var t,n,o;if(!e)return null;const i=(0,ye.n)(null==e?void 0:e.class,null==e?void 0:e.significance);return{alertTitle:null===(t=null==e?void 0:e.title)||void 0===t?void 0:t.replace(" - "," "),alertEvent:null===(n=null==e?void 0:e.abbreviation)||void 0===n?void 0:n[0],alertSig:null===(o=null==e?void 0:e.abbreviation)||void 0===o?void 0:o[1],alertIcon:Me([i,re.Ws],"",null==e?void 0:e.title,"icon-svg")}}(d);if(!p)return(0,z.H)(B.FLG,"alert null expcetion in severe weather content",JSON.stringify(i)),!1;i.alertsInfo=d;const g=Me([(0,ye.n)(null==d?void 0:d.class,null==d?void 0:d.significance),re.Ws],"",null==d?void 0:d.title,"icon-svg"),f=Object.assign(Object.assign(Object.assign(Object.assign({summaryIcon:p.alertIcon},p&&p.alertEvent&&{summaryLine1:p.alertEvent}),p&&p.alertSig&&{summaryLine2:null===(n=p.alertSig)||void 0===n?void 0:n.toLocaleLowerCase()}),{summaryHint:(null==d?void 0:d.title)||r.localizedStrings.miniMapSeeMore,summaryLink:(0,ce.iB)(i)}),s&&{boldUx:{curConditionRight:!0},disableArrow:!0}),m={icon:g,text:null==d?void 0:d.title,footerContent:u,footerLink:h,defaultMapPageUrl:(0,ce.iB)(i,l),mapType:he.p0.SevereWeather},y=null===(o=be(i))||void 0===o?void 0:o.backgroundData;return{summaryData:f,backgroundData:Object.assign(Object.assign({},y),{link:h}),rotationInfo:m}}function Te(e){var t,n,o,i,r,a,s;const{weatherData:c,config:l,strings:d,mapLinkOptions:u}=e||{};if(!c||!c.currentCondition||isNaN(+c.currentCondition.aqLevel)||+c.currentCondition.aqLevel<=0)return!1;if(!(0,F.Mf)(c.currentCondition.aqi)||!c.currentCondition.aqiSeverity)return!1;const h=(0,de.lv)(Number(c.currentCondition.aqi),w.Al.Locale.toLowerCase()),p="OT"===(0,de.$7)(w.Al.Locale.toLowerCase())?"US AQI":d.aqiShortName,g=(0,S.Z$)(c.currentCondition.locationRaw,c.unit,"airquality"),f=d.seeForecastTip,m=null===(t=c.currentCondition)||void 0===t?void 0:t.deepLink,y=(0,ie.ld)(me.Ld.Format(re.k4,{level:+c.currentCondition.aqLevel}),re.qF),v=(0,ie.ld)("AqiNoColor.svg",re.Mx),C=Object.assign(Object.assign({},v&&{summaryIcon:Me([v],"12","","summary-icon-svg")}),{summaryLine1:`${p||"AQI"} ${c.currentCondition.aqi}`,summaryLine2:null===(n=c.currentCondition)||void 0===n?void 0:n.aqiSeverity,summaryHint:l.localizedStrings.miniMapSeeMore,disableArrow:!0}),x={icon:Me([y],"24",""),text:null===(o=c.currentCondition)||void 0===o?void 0:o.aqiSeverity,footerContent:f,footerLink:m,defaultMapPageUrl:(0,S.Z$)(c.currentLocation,c.unit,"airquality",u),mapType:he.p0.AQI},b=Object.assign(Object.assign({background:"url('https://assets.msn.com/weathermapdata/1/static/background/v2.0/aqibackground2.png')",isCustomized:!0,disablePreloadBg:!0,link:g},ie.y3.lightBg),X.lightBg);let L={backgroundData:b,summaryData:C,rotationInfo:x};if(e.config.aqCardV2Rt&&e.isRotationalPreview){const e={boldUx:{curConditionRight:!0}};L=Object.assign(Object.assign({},L),{backgroundData:Object.assign(Object.assign({},b),{background:`url('${(0,de.sP)(h,"bg")}')`}),summaryData:Object.assign(Object.assign(Object.assign({},C),{summaryIcon:Me([(0,de.sP)(h,"icon")],"","aqi-icon","icon-svg"),summaryLine1:null===(i=c.currentCondition)||void 0===i?void 0:i.aqiSeverity,summaryLine2:void 0,disableArrow:!0}),e),customData:{adviceText1:null===(r=null==d?void 0:d.airQuality)||void 0===r?void 0:r.activityAdvice,adviceText2:(0,de.bA)(Number(c.currentCondition.aqi),null==d?void 0:d.airQuality),tooltip:null===(a=null==d?void 0:d.airQuality)||void 0===a?void 0:a.aqInfoTooltip},rotationInfo:Object.assign(Object.assign({},x),{footerContent:(0,de.gh)(Number(c.currentCondition.aqi),null===(s=l.localizedStrings)||void 0===s?void 0:s.airQuality)})})}return L}function Se(e){var t;const{weatherData:n,contentData:o,strings:i,mapLinkOptions:r}=e||{},a=o&&o.content&&o.content[0];if(!a||!n)return!1;const s=i.seeForecastTip,c=null===(t=n.currentCondition)||void 0===t?void 0:t.deepLink;return{summaryData:{summaryIcon:Me([(0,ie.ld)(re.hl,re.qF)],"16",""),summaryLine1:null==a?void 0:a.cap,disableArrow:!0},rotationInfo:{icon:Me([(0,ie.ld)(re.hl,re.qF)],"24",""),text:null==a?void 0:a.cap,footerContent:s,footerLink:c,defaultMapPageUrl:(0,S.Z$)(n.currentLocation,n.unit,"hurricane",r),mapType:he.p0.Hurricane}}}function De(e){var t;const{weatherData:n,contentData:o,strings:i}=e||{},r=o&&o.content&&o.content[0];if(!n||!r)return!1;const a=(0,ue.xh)(o.id),s=function(e,t,n,o){var i;if(!n.content||!n.content[0])return null;const r=n.content[0],a=r.capIcon||"00",s=e.currentCondition.deepLink.replace("forecast","pollen")+(o&&"&day=2"),c=Me([(0,ie.Re)(a,n.contenttype)],"16",""),l=o?t.pollenIndexTooltipTmr:t.pollenIndexTooltip;return{greetingText:r.body,text:l?me.Ld.Format(l,{level:null===(i=r.cap)||void 0===i?void 0:i.toLowerCase()}):null==r?void 0:r.body,icon:c,link:s,position:"right"}}(n,i,o,a),c=i.seeForecastTip,l=null===(t=n.currentCondition)||void 0===t?void 0:t.deepLink,d=a&&r.title||s.greetingText;return s&&d&&s.icon?{rotationInfo:{icon:s.icon,text:d,footerContent:c,footerLink:l,defaultMapPageUrl:s.link,mapType:he.p0.PollenIndex}}:{}}function We(e){var t;const n=null==e?void 0:e.weatherData,o=null===(t=null==e?void 0:e.contentData)||void 0===t?void 0:t.contenttype,i={type:null,content:be(n)},r=function(e,t){return e?e.startsWith("TeaserLife")?"LifeCard":"AQICard"===e&&t.config.aqCardV2Rt&&t.isRotationalPreview?"AQICardNew":we.includes(e)||e.startsWith("Teaser")?"TeaserCard":e:null}(o,e),a=r?Ce.get(r):null;if(a){let t=!a.validator||a.validator&&a.validator(e);return t="object"!=typeof t||t.backgroundData?t:Object.assign(Object.assign({},i.content),t),t?{type:a.type||null,content:t}:i}return i}function Ie(e,t){if(e){if(e.forecastData)for(const n of e.forecastData)n.forecastLink=(0,S.cT)(n.forecastLink,"content",t);if(e.hourlyForecast)for(const n of e.hourlyForecast)n.forecastLink=(0,S.cT)(n.forecastLink,"content",t);e.alertLink&&(e.alertLink=(0,S.cT)(e.alertLink,"content",t)),e.link&&(e.link=(0,S.cT)(e.link,"content",t)),e.defaultMapPageUrl&&(e.defaultMapPageUrl=(0,S.cT)(e.defaultMapPageUrl,"content",t)),e.backgroundData&&e.backgroundData.link&&(e.backgroundData.link=(0,S.cT)(e.backgroundData.link,"content",t)),e.summaryData&&e.summaryData.summaryLink&&(e.summaryData.summaryLink=(0,S.cT)(e.summaryData.summaryLink,"content",t))}}function Me(e,t,n,o){if((e=e.filter((e=>!!e)))&&e.length>0)return pe.dy`<img src=${e[0]} 
                     class="${o||""}"
                     height=${t} 
                     width=${t}
                     style=${"opacity:100%"}
                     alt="${n}"
                     @error=${(t,n)=>{!function(e,t){e.style.opacity="0";const n=e.getAttribute("src"),o=`Failed url links: ${n}`;ne.M0.sendAppErrorEvent(Object.assign(Object.assign({},B.WCL),{message:"couldn't load weather icon",pb:Object.assign(Object.assign({},B.WCL.pb),{customMessage:o})}));const i=t.findIndex((e=>e===n));i+1<t.length&&i>-1&&e.setAttribute("src",t[i+1])}(n.event.target,e)}}  />`}var Oe=n(45612),_e=n(16339),Fe=n(7009),Pe=n(62512);function Re(e,t,n,o,i){var r,a;const s=n.locality||n.subRegion||n.region,c=i?`${i.replace(" - "," ")}`:"",l=null===(a=null===(r=o.skycode)||void 0===r?void 0:r.children)||void 0===a?void 0:a.toString(),d=o.currentTemperature+" "+o.degreeSetting,u=function(e,t,n,o,i,r){if(e.displayWeatherHintFormat)return o?me.Ld.Format(e.displayWeatherHintFormat,{city:n,alert:o,skycode:i,temp:r,action:t.callActionHint}):me.Ld.Format(e.displayWeatherHintFormat.replace("{alert}, ","").replace(", {alert}",""),{city:n,skycode:i,temp:r,action:t.callActionHint});return null}(e,t,s,c,l,d);return u||(c?`${s}: ${c}, ${l}, ${d}`:`${s}: ${l}, ${d}`)}function $e(e,t,n){let o=t.welcomeText;if("sharedWidget"===e.renderEnv||"msnhp"===e.renderEnv||"win"===e.renderEnv){return je(e)&&(o=Ee(e,t,(new Date).getHours())),o}if(!function(e){return!(!e||!e.accountType||e.accountType!==Fe.l7.MSA&&e.accountType!==Fe.l7.AAD)}(n))return"";const i=e.isNameInGreeting?function(e,t,n){if(n){const o=n.firstName,i=n.lastName;return e.showFirstNameOnly?o:e.showLastNameOnly?i:(0,Pe.WU)(t.nameOrderingFull,o,i)}return""}(e,t,n):"";return je(e)&&(o=Ee(e,t,(new Date).getHours())),i&&i.length<=e.maxNameCharacterCount&&t.greetingFormat&&(o=(0,Pe.WU)(t.greetingFormat,o,i)),o}function je(e){let t=0;for(const n of e.greetingsList){if(t>n.startHour||n.endHour<n.startHour)return!1;t=n.endHour}return!0}function Ee(e,t,n){for(const o of e.greetingsList)if(n>=o.startHour&&n<o.endHour&&!te.Nq.has(o.displayKey))return t[o.displayKey];return t.welcomeText}const He={[he.p0.Precipitation]:"precipitation",[he.p0.AQI]:"airquality",[he.p0.Pollen]:"pollen",[he.p0.PollenIndex]:"pollenindex",[he.p0.Hurricane]:"hurricane",[he.p0.Temperature]:"temperature",[he.p0.WildfirePoint]:"wildfire"};function Ge(e,t){if(!(t.enableHovercardSevereMap&&e&&e.contentData&&e.contentData.length))return!1;const{source:n}=e;return!!(n&&n.coordinates&&n.coordinates.lat&&n.coordinates.lon)&&!!(t.enableRotateType&&Array.isArray(t.enableRotateType)&&t.enableRotateType.length)}var Ae=n(9533),Be=n(81555),Ne=n(12902);function Ue(e,t,n,o,i,r){const a=new Ne.xQ(e,{opacity:0},{duration:i,delay:o}),s=new Ne.xQ(t,{opacity:1},{duration:i,delay:0}),c=new Ne.xQ(n,{opacity:1},{duration:i,delay:0});a.onFinish=()=>{r&&r(),window.requestAnimationFrame((()=>{e.style.display="none",t.style.display="flex",n.style.display="flex",a.cancel(),s.play(),c.play()}))},a.play()}function ze(e,t,n,o){const i=new Ne.xQ(e,{opacity:0},{duration:o,delay:n}),r=new Ne.xQ(t,{opacity:1},{duration:o,delay:0});i.onFinish=()=>{window.requestAnimationFrame((()=>{e.style.display="none",t.style.display="flex",i.cancel(),r.play()}))},e&&t?i.play():t&&r.play()}var Ve=n(36569),qe=n(18536),Qe=n(64193),Ke=n(33379),Ye=n(10209),Je=n(65932),Ze=n(82423),Xe=n(4734);const et=7.2;class tt extends Qe.l{constructor(){super(...arguments),this.useTaskbarPreview=!1,this.shouldWeatherSettingsOpen=!1,this.showHiddenEditContainer=!1,this.hideLocation=!1,this.locationTooltip=!1,this.minimapLoaded=!1,this.minimapDisabled=!1,this.doneGreetingAnimation=!1,this.weatherMaxWidthStyle="",this.showLocationList=!1,this.initComponent=!0,this.trapFocus=!1,this.isVisualReady=!1,this.isFinanceGreetingLoaded=!1,this.isWeatherPopupLoaded=!1,this.financeGreetingLoadEligible=!1,this.initialWeatherDataFromFeed=!1,this.hideAlertGly=!1,this.onAppError=e=>ne.M0.sendAppErrorEvent(e),this.locationGreetingAnimationCallback=()=>{this.doneGreetingAnimation=!0,this.loadWeatherCoachMarkComponent(),this.updateWeatherMaxWidthNew()},this.updateWeatherMaxWidthNew=()=>{var e,t;if(!isNaN(this.rootMaxWidth)&&this.config){if("win"===this.config.renderEnv){if(this.doneGreetingAnimation&&this.hideLocation!==this.rootMaxWidth<=190)return this.hideLocation=this.rootMaxWidth<=190,void E.S.queueUpdate((()=>this.updateWeatherMaxWidthNew()));const e=this.getStrDisplayLength(this.shortLocation)*et+8,t=!this.hideLocation&&this.locationContainer?+(this.locationContainer.offsetWidth||e):0,n=this.rootMaxWidth-t-24-12;this.textMaxWidth=n>6?n:0,this.weatherMaxWidthStyle=`max-width: ${this.textMaxWidth}px`}if("ntp"===this.config.renderEnv){const n=((null===(t=null===(e=this.weatherData)||void 0===e?void 0:e.currentTemperature)||void 0===t?void 0:t.length)||0)*et+10||28,o=this.getStrDisplayLength(this.shortLocation)*et+8,i=27;if(this.doneGreetingAnimation){const e=o+24+i+n+36;if(this.hideLocation!==this.rootMaxWidth<=e)return this.hideLocation=this.rootMaxWidth<=e,void E.S.queueUpdate((()=>this.updateWeatherMaxWidthNew()));const t=e-o;if(this.hideAlertGly!==this.rootMaxWidth<=t)return this.hideAlertGly=this.rootMaxWidth<=t,void E.S.queueUpdate((()=>this.updateWeatherMaxWidthNew()))}const r=this.config.enbClToShowChe?14:0,a=!this.hideLocation&&this.locationContainer?+(this.locationContainer.offsetWidth||o):0,s=this.hideAlertGly||!this.alertGly||this.currentWeatherRoot&&this.currentWeatherRoot.icon?0:i,c=this.rootMaxWidth-(a+24+s+36+r);this.textMaxWidth=c>n?c:0,this.weatherMaxWidthStyle=`max-width: ${this.textMaxWidth}px; overflow: hidden;`}}},this.onOutsideClick=e=>{if(!this.showHiddenEditContainer)return;const t=null==e?void 0:e.composedPath();(null==t?void 0:t.includes(this))||this.closeFlyoutCard()},this.onKeydown=e=>{e&&e.key===H.CX&&this.closeFlyoutCard()},this.closeFlyoutCard=()=>{this.showHiddenEditContainer=!1,this.pauseRotateWeatherRoot()},this.onResize=()=>{this.isFinanceGreetingLoaded=this.getFinanceGreetingLoadedStatus()}}weatherRootInfoChanged(){this.RotateWeatherRoot()}minimapChanged(){setTimeout((()=>(0,y.mG)(this,void 0,void 0,(function*(){try{this.minimap&&!this.minimapLoaded&&(yield(0,Ye.Fg)(this.config.slots.weatherMinimapWC),this.minimapLoaded=!0)}catch(e){ne.M0.sendAppErrorEvent(Object.assign(Object.assign({},B.S6L),{message:"Failed to load mini map experience",pb:Object.assign(Object.assign({},B.S6L.pb),{customMessage:JSON.stringify(e)})})),console.error(e)}}))),0)}rootMaxWidthChanged(){this.updateWeatherMaxWidthNew()}getStrDisplayLength(e){if(!e)return 0;let t=0;for(let n=0;n<e.length;n++)e.charCodeAt(n)>=0&&e.charCodeAt(n)<=127?t+=1:t+=2;return t}get highLowTempStyle(){var e,t,n,o;const i=(((null===(t=null===(e=this.dailyCondition)||void 0===e?void 0:e.highTemp)||void 0===t?void 0:t.toString().length)||0)+((null===(o=null===(n=this.dailyCondition)||void 0===n?void 0:n.lowTemp)||void 0===o?void 0:o.toString().length)||0)+3+2+1)*et+6;return!this.textMaxWidth||this.textMaxWidth>=i}get stableWidthSytle(){if("msnhp"===this.config.renderEnv&&this.weatherRootInfo){let e=5e3;for(const t of this.weatherRootInfo)if(t&&t.text){const n=new Blob([t.text]).size;n<e&&(e=n)}if(e>0){let t=Math.ceil(e*et);return t=Math.max(100,t),t=Math.min(150,t),`width: ${t}px`}}return""}get weatherGlyphClass(){return this.showLocationLeft&&!this.hideLocation?"weather-glyph-location":"weather-glyph"}get weatherTextClass(){return this.showLocationLeft?"weather-text-location-left":this.currentWeatherRoot?"weather-text-customize":"weather-text"}get weatherUnitContainerClass(){return this.showLocationLeft?"weather-unit-container-location-left":"weather-unit-container"}setPerfMarker(e,t=performance.now()){if(!w.Al)return;const n=!0===w.Al.IsPrerender?t-(0,N.TZ)(U.DB):t;(0,N.su)(e,n)}get callRenderMarker(){return()=>{this.setPerfMarker("WeatherGreeting.Render")}}experienceConnected(){var e,t,n,o,i,r;try{if(this.setPerfMarker("WelcomeGreeting.Start"),!(0,Ke.N)())return;if((null===(e=this.config)||void 0===e?void 0:e.enableCardDataConnector)?this.welcomeGreetingDataConnector=(0,Ze.K0)(I.z.WeatherCardData):this.welcomeGreetingDataConnector=(0,Ze.K0)(I.z.WeatherData),!this.welcomeGreetingDataConnector)return void this.onAppError(Object.assign(Object.assign({},B.sq0),{message:"Welcome Greeting Weather Data Connector is not defined."}));switch(this.getWeatherData(!0),(0,Je.Uo)((null===(t=this.config)||void 0===t?void 0:t.enableCardDataConnector)?I.z.WeatherCardData:I.z.WeatherData,(e=>{this.weatherState=e,this.weatherDataUpdateTime||(this.weatherDataUpdateTime=(new Date).toLocaleString()),this.parseWeatherData(e),this.checkCoachmarkEligibility(e),this.loadWeatherCoachMarkComponent()})),this.config.renderEnv){case"ntp":if(!(0,Ze.K0)(I.z.ChromiumPageSettings))return void this.onAppError(Object.assign(Object.assign({},B.VHu),{message:"Page Chromium Data Connector is not defined."}));(0,Je.Uo)(I.z.ChromiumPageSettings,(e=>{this.chromiumPageSettingsState=e,this.isDarkMode=(0,v.Y)(),(0,C.N6)("backgroundImage",(e=>{const t="hidden"===e&&!this.isDarkMode;E.S.queueUpdate((()=>this.isLightGreeting=t))}))}));break;case"sharedWidget":this.isDarkMode=_e.gL.get(_e.Iq.IsDarkMode),this.isLightGreeting=!this.isDarkMode;break;case"msnhp":this.isDarkMode=!1,this.isLightGreeting=!this.isDarkMode;break;default:this.isDarkMode=(0,v.Y)(),this.isLightGreeting=!this.isDarkMode}this.welcomeText=this.config.disableWelcome?"":$e(this.config,this.strings,null!==(o=null===(n=this.chromiumPageSettingsState)||void 0===n?void 0:n.primaryAccountInfo)&&void 0!==o?o:{});const{locationSpecifyPlaceholder:a}=this.strings.settings;this.locationSearchPlaceholder=a,this.shortLocation=this.config.disableWelcome?"":a,this.weatherHovercardMode=0,this.weatherHoverSetting={locationMode:void 0,unitSet:void 0},"JwaPollen"==(null===(r=null===(i=this.weatherState.contentData)||void 0===i?void 0:i[0])||void 0===r?void 0:r.contenttype)||this.config.enableBottomLocationMarker||this.config.enableNavLocationMarker||(this.showLocationLeft=this.config.enableLocationLeft),this.isVisualReady||(0,Xe.F_)().then((()=>{this.isVisualReady=!0})),this.config.enableRiverZoom&&addEventListener("resize",this.onResize)}catch(e){(0,z.OO)(e,B.FLG,"WelcomeGreetingExperiencedMountError","Unknown Error of WelcomeGreetingExperiencedMountError")}}registerCoachMark(e){return(0,y.mG)(this,void 0,void 0,(function*(){this.locationGreetingElement=this.shadowRoot.getElementById("i_location"),this.locationGreetingElement&&(0,Ae.FY)(Be._.locationGreeting,this.locationGreetingElement),yield(0,Ae.h_)(Be._.locationGreeting),this.locationGreetingElement&&(D.W.getInstance().registerItemAnchorElement(e,this.locationGreetingElement),D.W.getInstance().registerConfirmCallback(e,(()=>{this.coachMarkOnScreen=!1,ne.M0.addOrUpdateTmplProperty(te.k7.LocAccuConfirmedLocation,"1")})),D.W.getInstance().registerCancelCallback(e,(()=>{this.coachMarkOnScreen=!1,this.openHoverSetting(),this.controlHiddenEdit(!0)})),D.W.getInstance().registerDismissCallback(e,(()=>{this.coachMarkOnScreen=!1})),D.W.getInstance().registerItemTriggerMessage(e,!0))}))}isCoachMarkOnScreen(){const e=(0,x.$o)().getObject("coachmarks",[]);e.length&&e.map((e=>{"locationAccuracyRevIP"===e.coachMarkKey&&(e.latestShownTimestamp>e.latestClosedTimestamp||!e.latestShownTimestamp||!e.latestClosedTimestamp)&&(this.coachMarkOnScreen=!0)}))}displayCoachMark(e){setTimeout((()=>{this.registerCoachMark(e),this.isCoachMarkOnScreen()}),2e3)}shadowDomPopulated(){if((0,Ke.N)()){if(this.welcomeGreetingDataConnector&&!this.isAnimationDone&&this.shadowRoot){this.isAnimationDone=!0;const e=this.shadowRoot.getElementById("i_welcome"),t=this.shadowRoot.getElementById("i_weather");if(this.showLocationLeft){const n=this.shadowRoot.getElementById("i_location");this.config.disableWelcome?e&&t&&n&&Ue(e,t,n,0,10,this.locationGreetingAnimationCallback):e&&t&&n&&Ue(e,t,n,this.config.greetingDuration||1500,700,this.locationGreetingAnimationCallback)}else e&&t&&function(e,t,n,o){const i=new Ne.xQ(e,{opacity:0},{duration:o,delay:n}),r=new Ne.xQ(t,{opacity:1},{duration:o,delay:0});i.onFinish=()=>{window.requestAnimationFrame((()=>{e.style.display="none",t.style.display="flex",i.cancel(),r.play()}))},i.play()}(e,t,1500,700);setTimeout((()=>{window.requestAnimationFrame((()=>{V.A.singleMark(this.getExperienceType())}))}),2200)}this.config.enableFinanceGreetings&&this.loadFinanceGreetingComponent(),this.config.enableLocationAccuracyCoachmarkRevIP&&this.showLocationCoachmarkRevIP&&!this.config.ntpCoachMark&&this.displayCoachMark(W.gz.LocationAccuracyRevIP),this.markVisuallyReady(),(0,Ae.FY)(Be._.welcomeGreeting,this.weatherGreetingViewRef)}}loadWeatherCoachMarkComponent(){return(0,y.mG)(this,void 0,void 0,(function*(){if(((e=this.config).ntpBanner||e.ntpCoachMark)&&e.useNurturingManager&&function(e,t){var n;const o=null===(n=null==e?void 0:e.profile)||void 0===n?void 0:n.sig;return!(!t.forceTriggerCoachMarkBanner&&(!o||o.ft&&o.ft.includes("vwlm")))}(this.weatherState,this.config)&&this.weatherRootLink&&this.strings.ntpCoachMarkBadgeLocalization){const{loadNtpCoachmarkBadge:e}=yield n.e("LanguageMismatchData").then(n.bind(n,56354));e(this)}var e}))}loadFinanceGreetingComponent(){return(0,y.mG)(this,void 0,void 0,(function*(){try{yield Promise.all([n.e("common-feed-libs"),n.e("experiences_welcome-greeting-wc_dist_components_finance-greeting_index_js-libs_core_dist_util-93072f")]).then(n.bind(n,13131)),this.financeGreetingLoadEligible=!0,this.isFinanceGreetingLoaded=this.getFinanceGreetingLoadedStatus()}catch(e){(0,z.OO)(e,B.sf$,"FinanceGreetingLoadingError")}}))}loadWeatherPopupComponent(){return(0,y.mG)(this,void 0,void 0,(function*(){if(!this.isWeatherPopupLoaded&&this.config.enableHovercard)try{yield Promise.all([n.e("common-feed-libs"),n.e("experiences_welcome-greeting-wc_dist_components_weather-popup_index_js-libs_core_dist_utiliti-49d563")]).then(n.bind(n,49320));const{msftWeatherSettingCard:e,msftWeatherSettingSDCard:t}=yield n.e("libs_weather-shared-wc_dist_index_js").then(n.bind(n,10523));e.define(u.j.registry),t.define(u.j.registry),this.isWeatherPopupLoaded=!0}catch(e){(0,z.OO)(e,B.ib1,"WeatherPopupLoadingError")}}))}getExperienceType(){return M.x.welcomeGreetingWC}prerenderRefresh(){var e;(0,Ke.N)()&&(this.getWeatherData(!0),null===(e=this.financeGreetingViewRef)||void 0===e||e.dispatchEvent(new Event("GreetingsPrerenderRefresh")))}RotateWeatherRoot(){if(this.pauseRotateWeatherRoot(),this.currentWeatherRoot=null,this.currentWeatherRootIdx=0,this.updateWeatherCardData(),!this.weatherRootInfo||this.weatherRootInfo.length<=1||this.showHiddenEditContainer||this.config.disableRotation)return;const e=isNaN(Number(this.config.weatherRootRotateTime))?Y:this.config.weatherRootRotateTime;this.weatherGreetingInterval=setInterval((()=>{this.currentWeatherRootIdx++,this.currentWeatherRootIdx=this.currentWeatherRootIdx%this.weatherRootInfo.length,this.currentWeatherRoot=this.weatherRootInfo[this.currentWeatherRootIdx],this.updateWeatherCardData(),this.setWeatherRotateTypeTmplProperty(this.currentWeatherRoot&&this.currentWeatherRoot.contentType||"",this.currentWeatherRootIdx)}),e)}resumeRotateWeatherRoot(){var e;if(!this.weatherRootInfo||this.weatherRootInfo.length<=1||this.config.disableRotation)return;this.currentWeatherRootIdx=null!==(e=this.currentWeatherRootIdx)&&void 0!==e?e:0,this.currentWeatherRoot=this.weatherRootInfo[this.currentWeatherRootIdx];const t=isNaN(Number(this.config.weatherRootRotateTime))?Y:this.config.weatherRootRotateTime;this.weatherGreetingInterval=setInterval((()=>{var e,t,n,o,i;this.currentWeatherRootIdx++,this.currentWeatherRootIdx=this.currentWeatherRootIdx%this.weatherRootInfo.length,this.currentWeatherRoot=this.weatherRootInfo[this.currentWeatherRootIdx],this.updateWeatherCardData(),Ie(this.weatherHoverData,me.Ld.Format(ee,{contentType:(null===(e=this.currentWeatherRoot)||void 0===e?void 0:e.contentType)||(null===(t=this.rotateDefaultData)||void 0===t?void 0:t.contentType),contentId:(null===(n=this.currentWeatherRoot)||void 0===n?void 0:n.contentId)||(null===(o=this.rotateDefaultData)||void 0===o?void 0:o.contentId)||""})),this.weatherRootLink=null===(i=this.weatherHoverData)||void 0===i?void 0:i.link,this.setWeatherRotateTypeTmplProperty(this.currentWeatherRoot&&this.currentWeatherRoot.contentType||"",this.currentWeatherRootIdx)}),t)}updateWeatherCardData(){const{backgroundData:e,summaryData:t,footerContent:n,footerLink:o,defaultMapPageUrl:i,weatherSummary:r,mapType:a,teaserCustomData:s}=this.rotateDefaultData||{};let c=this.rotateDefaultData&&this.rotateDefaultData.primaryCarousel;const l={backgroundData:e,summaryData:t,footerContent:n,footerLink:o,defaultMapPageUrl:i,weatherSummary:r,mapType:a,teaserCustomData:s};this.currentWeatherRoot&&(c=this.currentWeatherRoot&&this.currentWeatherRoot.primaryCarousel,l.backgroundData=this.currentWeatherRoot.backgroundData,l.summaryData=this.currentWeatherRoot.summaryData,l.footerContent=this.currentWeatherRoot.footerContent||this.strings.seeForecastTip,l.footerLink=this.currentWeatherRoot.footerLink,l.defaultMapPageUrl=this.currentWeatherRoot.defaultMapPageUrl,this.defaultMapPageUrl=this.currentWeatherRoot.defaultMapPageUrl,l.mapType=this.currentWeatherRoot.mapType,l.weatherSummary="",l.teaserCustomData=this.currentWeatherRoot.customData),this.primaryCarousel=c,this.weatherHoverData&&l&&(Object.assign(this.weatherHoverData,l),this.extractMinimapData(this.weatherState,l.mapType))}pauseRotateWeatherRoot(){this.weatherGreetingInterval&&(clearInterval(this.weatherGreetingInterval),this.weatherGreetingInterval=null)}setWeatherRotationTypeTmplProperty(e){e.length>=1&&ne.M0.addOrUpdateTmplProperty(Oe.rW.WeatherGreetingRotationTypes,e.join(","))}setWeatherRotateTypeTmplProperty(e,t){ne.M0.addOrUpdateTmplProperty(Oe.rW.WeatherGreetingCurrType,`n_${e||"BaseWeather"}_${t||0}`)}getWeatherRotationDuration(){const e=isNaN(Number(this.config.weatherRootRotateTime))?Y:this.config.weatherRootRotateTime;return this.weatherRootInfo&&this.weatherRootInfo.length>1?e*this.weatherRootInfo.length:0}detectedLocationFollowed(){var e;return(null===(e=this.followedLocations)||void 0===e?void 0:e.filter((e=>(0,O.eu)(e,this.detectedLocation))).length)>0}isCurrentLocation(e){var t,n;return(0,O.eu)(e,null===(t=this.weatherHoverData)||void 0===t?void 0:t.locationInfo)&&T.dP(e,null===(n=this.weatherHoverData)||void 0===n?void 0:n.locationInfo,!0)}onStartGreetingIntervalTimer(){this.config.enableLocationAccuracyCoachmarkRevIP&&this.showLocationCoachmarkRevIP&&(this.showLocationCoachmarkRevIP=!1,D.W.getInstance().setCoachMarkClosed(W.gz.LocationAccuracyRevIP))}getWeatherData(e){var t,n;return(0,y.mG)(this,void 0,void 0,(function*(){const o={partialHourly:!0};if((null===(n=null===(t=this.config)||void 0===t?void 0:t.hovercardRotateContent)||void 0===n?void 0:n.forecast)||(o.filterRule="card"),this.config.appendFdHead&&(o.additionalFdHead=this.config.appendFdHead,o.sfParams=this.config.appendFdHead),this.config.includeCookie&&(o.includeCookie=this.config.includeCookie),o.requestInfo={experience:"greeting",isStaleRefresh:e},this.welcomeGreetingDataConnector){const e="ntp"===this.config.renderEnv||"win"===this.config.renderEnv;if(!this.welcomeGreetingDataConnector.getWeatherLocationAndUnit&&e){const e=e=>new Promise((t=>setTimeout(t,e)));yield e(500)}this.initialWeatherDataFromFeed=this.welcomeGreetingDataConnector.isLocationAndUnitReusable();(yield this.welcomeGreetingDataConnector.fetchActiveStateforWeather(null,null,o))&&(this.weatherDataUpdateTime=(new Date).toLocaleString(),this.parseWeatherData(this.welcomeGreetingDataConnector.getCurrentState()))}}))}parseWeatherData(e){var t,n,o,i,r,a,s,c,l,d,u,h,p,g;if(!e||!e.currentCondition)return;this.weatherData=e.currentCondition,this.dailyCondition=e.forecast[0],this.locationMode=e.locationDetectionSetting,this.unit=e.unit,this.detectedLocation=e.profile.detectedLocation,this.followedLocations=e.profile.followedLocations,e.currentLocation&&(this.locationSearchPlaceholder=e.currentLocation.displayName,this.shortLocation=e.currentLocation.locality),"msnhp"!==this.config.renderEnv&&(null===(t=this.shortLocation)||void 0===t?void 0:t.length)>15?(this.shortLocation=`${this.locationSearchPlaceholder.substring(0,15)}…`,this.locationTooltip=!0):this.locationTooltip=!1,this.telemetryContext=(0,Oe._2)(this.telemetryObject,this.config,this.weatherData),this.greetingContentTypeTelemetry=(0,Oe.a_)(this.telemetryObject,this.weatherData),this.weatherInfoHint=Re(this.config,this.strings,e.currentLocation,this.weatherData,e.alertsInfo&&e.alertsInfo.title);let f=null,m=[];if(this.config.enableWeatherRotate||this.config.enableHovercard){if(this.useTaskbarPreview=e.previews&&Array.isArray(e.previews)&&e.previews.length>0,m=this.useTaskbarPreview?function(e,t,n){if(!Ge(e,t))return null;if(!e.previews||!Array.isArray(e.previews)||!e.previews.length)return null;const o=[];let i=0;const r={ocid:(0,b.ku)(),zoom:8};return e.previews.forEach((a=>{var s;if(!a||!a.previewType||!a.content)return;const{contentData:c,isRotationalPreview:l}=function(e,t){try{if(!(e&&e.contentData&&e.contentData.length&&t&&t.previewType))return null;const[n,o]=t.previewType.split("-"),i=n.split("_").pop();return{contentData:e.contentData[o],isRotationalPreview:"TkRt"===i}}catch(e){return null}}(e,a)||{};if(!c||!c.contenttype)return;const d=We({weatherData:e,config:t,contentData:c,isRotationalPreview:l,strings:n,mapLinkOptions:r})||{},u=null==d?void 0:d.type,h="object"==typeof(null==d?void 0:d.content)?d.content:{},{rotationInfo:p,backgroundData:g,summaryData:f,customData:m}=h,{iconUrl:y,text:v}=a.content||{},w=Me([y],"24",""),C=Object.assign(Object.assign(Object.assign({primaryCarousel:u,isRotationalPreview:l,contentIdx:i,contentType:c.contenttype,contentId:c.id,backgroundData:g,summaryData:f,customData:m},p),!p&&{footerContent:n.seeForecastTip,footerLink:null===(s=e.currentCondition)||void 0===s?void 0:s.deepLink}),{icon:w,text:v});i++,o.push(C)})),o}(e,this.config,this.strings):function(e,t,n){if(!Ge(e,t))return null;const o=e.contentData.filter((e=>e&&e.contenttype&&t.enableRotateType.includes(e.contenttype)));if(!o||!o.length)return null;const i=[];let r=0;const a={ocid:(0,b.ku)(),zoom:8};return o.unshift(o[0]),o.forEach((s=>{var c,l,d,u;const h=o.length>1&&r>0,p=We({weatherData:e,config:t,contentData:s,isRotationalPreview:h,strings:n,mapLinkOptions:a})||{},g=null==p?void 0:p.type,f="object"==typeof(null==p?void 0:p.content)?p.content:{},{rotationInfo:m,backgroundData:y,summaryData:v}=f;if(m){const n=Me([fe.x.getWeatherGlyphBySymbolOrSkyCode(null===(c=e.currentCondition)||void 0===c?void 0:c.symbol,null===(l=e.currentCondition)||void 0===l?void 0:l.pvdrIcon,t.skycodeIconPath||"")],"24",""),o=Object.assign(Object.assign({primaryCarousel:g,isRotationalPreview:h,contentIdx:r,contentType:s.contenttype,contentId:s.id,backgroundData:y,summaryData:v},m),!h&&{icon:n,text:(null===(d=e.currentCondition)||void 0===d?void 0:d.currentTemperature)+(null===(u=e.currentCondition)||void 0===u?void 0:u.degreeSetting)||""});r++,i.push(o)}})),i}(e,this.config,this.strings),Array.isArray(m)&&m.length>1){m[1]&&("severeweather"===m[1].primaryCarousel||"nowcastalert"===m[1].primaryCarousel)&&m[1].summaryData&&m[1].summaryData.summaryIcon&&(this.alertGly=m[1].summaryData.summaryIcon);const e=m.map((e=>"r_"+(null==e?void 0:e.contentType)));this.setWeatherRotationTypeTmplProperty(e)}else{const{contentType:e}=m&&m[0]||{};this.setWeatherRotationTypeTmplProperty([e||"r_BaseWeather"]),this.setWeatherRotateTypeTmplProperty(e||"BaseWeather",0)}f=m}if(this.weatherRootInfo=f,this.config.enableHovercard){this.cardSize=this.config.cardSize||"full";const t=null===(n=e.contentData)||void 0===n?void 0:n[0],f=e.unit,y=(0,b.ku)()||"",C={excludeOcid:!0,ocid:y,cvid:ne.M0.getRequestId()},x=(0,S.DF)(e.currentLocation,f,C)||(null===(o=e.currentCondition)||void 0===o?void 0:o.deepLink),L=new Ve.Q(w.Al.Locale,null===(r=null===(i=null==e?void 0:e.source)||void 0===i?void 0:i.location)||void 0===r?void 0:r.TimezoneName),k=function(e,t,n){var o,i,r;const a=[],{currentLocation:s,unit:c}=e;if((null===(o=e.forecast)||void 0===o?void 0:o.length)>1&&((null===(i=e.forecast[0].hourly)||void 0===i?void 0:i.length)||(null===(r=e.forecast[1].hourly)||void 0===r?void 0:r.length))){const o=e.forecast[0].hourly,i=o.map(((e,t)=>Object.assign(Object.assign({},e),{day:1,hour:t+1})));if(o.length<5){const t=e.forecast[1].hourly.map(((e,t)=>Object.assign(Object.assign({},e),{day:2,hour:t})));i.push(...t)}const r=i.slice(0,5),l=e=>e&&e.pvdrIcon||e&&e.icon;if(!r.every(l))return a;for(let e=0;e<r.length;e++){const o=r[e],i=new Date(o.timeStr),l=o.pvdrIcon?o.pvdrIcon:o.icon+"",d=Me([fe.x.getWeatherGlyphBySymbolOrSkyCode(o.symbol,l,n&&n.skycodeIconPath?n.skycodeIconPath:"")],K,null==o?void 0:o.cap),u={temperature:o.temperature+"",skyCodeIcon:d,hourText:t.formatHourLabel(i),hourOfDay:t.formatHour(i),forecastLink:(0,S._e)({location:s,unit:c,hour:o.hour,day:o.day}),precipitation:o.precipitation+"%"};a.push(u)}}return a}(e,L,this.config),T=function(e,t,n,o){if(!n||n.length<1)return null;const i=[t.dayOfWeek.sun,t.dayOfWeek.mon,t.dayOfWeek.tue,t.dayOfWeek.wed,t.dayOfWeek.thu,t.dayOfWeek.fri,t.dayOfWeek.sat],r=[];let a=0;for(const s of n){const n=e.dayOfWeekWithDate?(0,ie.se)(s.day,o):i[s.day.getDay()],c={lowTemperature:s.lowTemp.toString(),highTemperature:s.highTemp.toString(),skycodeIcon:Me([fe.x.getWeatherGlyphBySymbolOrSkyCode(s.symbol,s.pvdrIcon,e&&e.skycodeIconPath?e.skycodeIconPath:"")],K,""),dayOfWeek:0==a?t.dayOfWeek.today:n,forecastLink:s.deepLink};if(!(c.lowTemperature&&c.highTemperature&&c.skycodeIcon&&c.dayOfWeek&&c.forecastLink))return null;if(r.push(c),a++,a>=5)break}return r}(this.config,this.strings,e.forecast,L),D=e.currentLocation&&e.currentLocation.displayName,W=me.Ld.Format(ee,{contentType:null==t?void 0:t.contenttype,contentId:(null==t?void 0:t.id)||""}),I=this.isDarkMode?_.al.getSkyCodeDarkBackgroundGradientColors(e.currentCondition.pvdrIcon):_.al.getSkyCodeLightBackgroundGradientColors(e.currentCondition.pvdrIcon);this.cardBackgroundColor=I&&I[0];const M=e.currentCondition.isNight?"rgba(36, 36, 36, 0.2)":"rgba(36, 36, 36, 0.1)",O=e.currentCondition.isNight?"rgba(36, 36, 36, 0.1)":"none",E=null===(s=null===(a=e.currentCondition.skycode)||void 0===a?void 0:a.children)||void 0===s?void 0:s.toString(),H=E&&E.length<=18?E:null!==(l=null===(c=e.currentCondition)||void 0===c?void 0:c.shortCap)&&void 0!==l?l:E;let G=null,A=null,B=null,N=this.strings.seeForecastTip,U=x,z=x,V=null;const Y=null;let J;if(m&&m.length&&m[0])G=m[0].primaryCarousel,B=m[0].summaryData,A=m[0].backgroundData,N=m[0].footerContent||N,U=m[0].footerLink||U,z=m[0].defaultMapPageUrl,J=m[0].mapType;else{const t={ocid:y,zoom:8},n=e.contentData&&e.contentData[0]&&e.contentData[0].contenttype?e.contentData[0]:null,o=n?We({weatherData:e,config:this.config,contentData:n,isRotationalPreview:!1,strings:this.strings,mapLinkOptions:t}):{},i="object"==typeof(null==o?void 0:o.content)?o.content:{};G=null==o?void 0:o.type,B=null==i?void 0:i.summaryData,A=null==i?void 0:i.backgroundData,N=(null==i?void 0:i.ctaText)||N,U=(null==i?void 0:i.ctaLink)||`${x}`,z=null===(d=null==i?void 0:i.rotationInfo)||void 0===d?void 0:d.defaultMapPageUrl,J=null===(u=null==i?void 0:i.rotationInfo)||void 0===u?void 0:u.mapType,V=null==i?void 0:i.customData}this.extractMinimapData(e,J);const Z={titleContent:e.currentLocation&&e.currentLocation.displayName,locationInfo:e.currentLocation,locationMode:2===e.locationDetectionSetting?q.EM.SpecifyLoc:q.EM.AutoDetectLoc,weatherUnit:f,temperature:e.currentCondition.currentTemperature,precipitation:null===(p=null===(h=e.currentCondition.precipitation)||void 0===h?void 0:h.children)||void 0===p?void 0:p.toString(),precipitationLabel:this.strings.precipitationMapTooltip,aqi:(0,F.Mf)(e.currentCondition.aqi)&&e.currentCondition.aqi,aqiLabel:this.strings.aqiLabel,pvdrIcon:e.currentCondition.pvdrIcon,symbol:e.currentCondition.symbol,skycodeIcon:Me([fe.x.getWeatherGlyphBySymbolOrSkyCode(e.currentCondition.symbol,e.currentCondition.pvdrIcon,this.config.skycodeIconPath||"")],"46px",H),skycodeBackground:(0,v.Y)()?M:O,skycode:H,backgroundData:A,summaryData:B,teaserCustomData:V,footerContent:N,footerLink:U,defaultMapPageUrl:z,weatherSummary:Y,locationName:D,shortLocationName:(0,P.mH)(e.currentLocation,this.getExperienceType()),unitSetting:f===Q.ao.Fahrenheit?"°F":"°C",link:x,forecastData:T,hourlyForecast:k,showOnlyList:!(this.config.dailyForecastContent&&this.config.dailyForecastContent.includes(null==t?void 0:t.contenttype))&&Array.isArray(k)&&k.length>0,showUpdateTime:!!this.config.showUpdateTime,updateTime:this.weatherDataUpdateTime};this.rotateDefaultData=Object.assign(Object.assign({},Z),{primaryCarousel:G,contentType:null==t?void 0:t.contenttype,contentId:null==t?void 0:t.id,mapType:J}),this.weatherHoverData=Z,this.primaryCarousel=G;const{source:X,mapsMetaData:te}=e;this.showMiniMap=!!(X&&X.coordinates&&X.coordinates.lat&&X.coordinates.lon&&te),Ie(this.weatherHoverData,W),this.weatherRootLink=null===(g=this.weatherHoverData)||void 0===g?void 0:g.link,this.weatherHovercardColor=_.al.getSkyCodeLightBackgroundGradientColors(e.currentCondition&&e.currentCondition.pvdrIcon),this.telemetryHoverCardContext=(0,R.v)(this.telemetryContext.weatherTelemetryObject,this.weatherHoverData,this.strings,null,$.u,oe.uH.Greeting),this.telemetryHoverSettingContext=(0,j.OG)(this.telemetryContext.weatherTelemetryObject,this.strings,void 0,oe.uH.Greeting)}}extractMinimapData(e,t){const n=t||function(e,t){var n,o;const i="large"===t.cardSize?he.p0.Temperature:null;if(!t.enableHovercardSevereMap||!e)return null;switch(null===(o=null===(n=e.contentData)||void 0===n?void 0:n[0])||void 0===o?void 0:o.contenttype){case"AQICard":return he.p0.AQI;case"JwaPollen":return he.p0.Pollen;case"USPollen":case"EUPollen":return he.p0.PollenIndex;case"Hurricane":case"HurricaneAround":return he.p0.Hurricane;case"WildFirePointFullCard":return he.p0.WildfirePoint;case"Nowcast":case"AlertNowcast":return he.p0.Precipitation;case"SevereWeather":return he.p0.SevereWeather;default:return i}}(e,this.config);if(!n||!e.mapsMetaData||!this.config.slots||this.minimapDisabled)return this.defaultMapPageUrl="",void(this.minimap=void 0);const o=e.contentData||[];let i=0;this.currentWeatherRoot&&this.currentWeatherRoot.contentType&&(i=o.findIndex((e=>e.contenttype==this.currentWeatherRoot.contentType)));const r=o[i],a=t=>(0,S.Z$)(e.currentLocation,e.unit,t,{ocid:(0,b.ku)()||"",cvid:ne.M0.getRequestId(),zoom:8}),s=function(e,t,n,o){try{const i=He[e];let r="";if(i&&(r=o(i)),e===he.p0.SevereWeather&&t.alertsInfo){const e=t.alertsInfo,n=(0,le.lI)(e.class),i=new Date(e.created),a=e.id+i.getTime()/1e3;r=o(n)+(a?"&alertid="+a:"")}if(e===he.p0.WildfirePoint){const e=n||{},t=e.content&&e.content[0],o=t.metadata&&JSON.parse(t.metadata);o&&(r+="&subs=wildfirepoint&wfid="+o.id)}return r}catch(e){return ne.M0.sendAppErrorEvent(Object.assign(Object.assign({},B.S6L),{message:"Failed to build map URL in weather card",pb:Object.assign(Object.assign({},B.S6L.pb),{customMessage:JSON.stringify(e)})})),""}}(n,e,r,a);this.defaultMapPageUrl=s,this.minimap={mapType:n,weatherData:e,strings:this.strings,cardConfig:this.config,fallbackToTemperature:!1,isSmallCard:!1,displayContent:r,iconImageTemplate:Me,buildMapUrl:a}}loadMiniMapExperience(){return(0,y.mG)(this,void 0,void 0,(function*(){if(this.minimap&&!this.minimapLoaded&&!this.minimapDisabled)try{yield(0,Ye.Fg)(this.config.slots.weatherMinimapWC),this.minimapLoaded=!0}catch(e){ne.M0.sendAppErrorEvent(Object.assign(Object.assign({},B.S6L),{message:"Failed to build mini map props in weather card",pb:Object.assign(Object.assign({},B.S6L.pb),{customMessage:JSON.stringify(e)})})),console.error(e),this.minimapDisabled=!0,this.defaultMapPageUrl="",this.minimap=void 0}}))}checkCoachmarkEligibility(e){1==e.locationDetectionSetting&&ne.M0.addOrUpdateTmplProperty("locationAccuracyRevIPTriggered","0"),1==e.locationDetectionSetting&&this.config.enableLocationAccuracyCoachmarkRevIP&&(this.showLocationCoachmarkRevIP=!0)}onWeatherFocus(e){L.T&&this.controlHiddenEdit(!0,e)}controlHiddenEdit(e,t){this.config.enbClToShow||this.config.enbClToShowChe||this.weatherCoachMarkOnScreen||(this.loadWeatherPopupComponent(),e!=this.showHiddenEditContainer&&t&&ne.M0.sendActionEvent(t.currentTarget,oe.Aw.Hover,e?oe.wu.Show:oe.wu.Hide),this.showHiddenEditContainer=e,this.config.enableHovercard&&((0,k.Gg)(k.tk.editWelcomeGreeting,e),e?this.pauseRotateWeatherRoot():this.resumeRotateWeatherRoot()))}clickToControlHiddenEdit(e,t){return!this.config.enbClToShow&&!this.config.enbClToShowChe||(!(!this.config.enbClToShowChe||t)||(this.loadWeatherPopupComponent(),this.showHiddenEditContainer=!this.showHiddenEditContainer,e&&(ne.M0.sendActionEvent(e.currentTarget,oe.Aw.Click,this.showHiddenEditContainer?oe.wu.Show:oe.wu.Hide),e.preventDefault(),e.stopPropagation()),void(this.config.enableHovercard&&((0,k.Gg)(k.tk.editWelcomeGreeting,this.showHiddenEditContainer),this.showHiddenEditContainer?(this.pauseRotateWeatherRoot(),this.addFlyoutCardEventListener()):(this.resumeRotateWeatherRoot(),this.removeFlyoutCardEventListener())))))}focusoutHandler(e){var t,n;return"waffle-wc"===(null===(n=null===(t=null==e?void 0:e.relatedTarget)||void 0===t?void 0:t.nodeName)||void 0===n?void 0:n.toLowerCase())&&this.controlHiddenEdit(!1,e),!0}onWeatherEditClick(e){e&&(qe.u.addElement(e.currentTarget),e.preventDefault()),this.openWeatherSettings()}openWeatherSettings(e){e&&(qe.u.addElement(e.currentTarget),e.preventDefault()),this.shouldWeatherSettingsOpen=!0,this.disableSaveButton=!0,this.getWeatherData(!0),(0,k.Gg)(k.tk.editWelcomeGreeting,this.shouldWeatherSettingsOpen)}openHoverSetting(e){this.showLocationList=!1,e&&(qe.u.addElement(e.currentTarget),e.preventDefault());const t=this.welcomeGreetingDataConnector.getCurrentState();if(!t||!t.unit)return this.weatherHovercardMode=2,void ne.M0.sendAppErrorEvent(Object.assign(Object.assign({},B.FLG),{message:"Fail to get current state from connector"}));this.weatherHovercardMode=1;const n=1===t.locationDetectionSetting?q.EM.AutoDetectLoc:q.EM.SpecifyLoc;this.weatherHoverSetting={locationMode:n,unitSet:t.unit,selectedLocation:n===q.EM.SpecifyLoc?t.currentLocation:void 0,changeSignal:0,showSuggestionInTwoLines:this.config.showSuggestionInTwoLines},this.locationMode=n,this.savedWeatherHoverSetting=Object.assign(Object.assign({},this.weatherHoverSetting),{selectedLocation:this.weatherHoverSetting.selectedLocation?Object.assign({},this.weatherHoverSetting.selectedLocation):void 0})}onToggleFinanceGreeting(e){this.config.disableRotation||(e?(ze(this.weatherGreetingViewRef,this.financeGreetingViewRef,250,750),setTimeout((()=>{window.requestAnimationFrame((()=>{V.A.singleMark(this.getExperienceType())}))}),1e3)):(ze(this.financeGreetingViewRef,this.weatherGreetingViewRef,0,500),this.RotateWeatherRoot()))}addFlyoutCardEventListener(){document.addEventListener("click",this.onOutsideClick),document.addEventListener("keydown",this.onKeydown),window.addEventListener("scroll",this.closeFlyoutCard),window.addEventListener("resize",this.closeFlyoutCard)}removeFlyoutCardEventListener(){document.removeEventListener("click",this.onOutsideClick),document.removeEventListener("keydown",this.onKeydown),window.removeEventListener("scroll",this.closeFlyoutCard),window.removeEventListener("resize",this.closeFlyoutCard)}getHoverBackgroundClass(){let e="";return(this.config.enbClToShow||this.config.enbClToShowChe)&&(e=this.isLightGreeting?"light-hover-background":"dark-hover-background"),this.config.enbClcToShowUndline&&(e+=this.isLightGreeting?" light-hover-underline":" dark-hover-underline"),this.config.enbClcToShowScale&&(e+=" hover-scale"),e}getTitle(){return this.config.enbClcToShowTitle?`${this.weatherInfoHint}\n${this.strings.clickToSeeMoreString}`:this.config.enableHovercard?"":this.weatherInfoHint}getLocationTitle(){const e=this.locationTooltip?this.locationSearchPlaceholder:"";return this.config.enbClcToShowTitle?e?`${e}\n${this.strings.clickToSeeMoreString}`:`${this.weatherInfoHint}\n${this.strings.clickToSeeMoreString}`:e}getWelcomeGreetingTitle(){var e;const t=(null===(e=this.currentWeatherRoot)||void 0===e?void 0:e.text)?this.currentWeatherRoot.text:"";return this.config.enbClcToShowTitle?t?`${t}\n${this.strings.clickToSeeMoreString}`:`${this.weatherInfoHint}\n${this.strings.clickToSeeMoreString}`:t}getTempTitle(){var e,t;const n=this.dailyCondition.highTemp+(null===(e=this.weatherData)||void 0===e?void 0:e.degreeSetting)+" / "+this.dailyCondition.lowTemp+(null===(t=this.weatherData)||void 0===t?void 0:t.degreeSetting);return this.config.enbClcToShowTitle?n?`${n}\n${this.strings.clickToSeeMoreString}`:`${this.weatherInfoHint}\n${this.strings.clickToSeeMoreString}`:n}getFinanceGreetingLoadedStatus(){return this.config.enableRiverZoom?innerWidth>=1185:this.financeGreetingLoadEligible}}(0,y.gn)([(0,G.Lj)({mode:"boolean"})],tt.prototype,"canDisplayGreetingModule",void 0),(0,y.gn)([(0,G.Lj)({mode:"boolean"})],tt.prototype,"shouldAnimationStart",void 0),(0,y.gn)([(0,G.Lj)({mode:"boolean"})],tt.prototype,"isLightGreeting",void 0),(0,y.gn)([(0,G.Lj)({mode:"boolean"})],tt.prototype,"isAnimationDone",void 0),(0,y.gn)([G.Lj],tt.prototype,"weatherMetaTag",void 0),(0,y.gn)([G.Lj],tt.prototype,"weatherInfoHint",void 0),(0,y.gn)([G.Lj],tt.prototype,"welcomeText",void 0),(0,y.gn)([G.Lj],tt.prototype,"alertGly",void 0),(0,y.gn)([G.Lj],tt.prototype,"weatherRootInfo",void 0),(0,y.gn)([G.Lj],tt.prototype,"currentWeatherRoot",void 0),(0,y.gn)([G.Lj],tt.prototype,"currentWeatherRootIdx",void 0),(0,y.gn)([G.Lj],tt.prototype,"weatherRootLink",void 0),(0,y.gn)([G.Lj],tt.prototype,"locationMode",void 0),(0,y.gn)([G.Lj],tt.prototype,"unit",void 0),(0,y.gn)([G.Lj],tt.prototype,"cardSize",void 0),(0,y.gn)([A.LO],tt.prototype,"useTaskbarPreview",void 0),(0,y.gn)([(0,G.Lj)({mode:"boolean"})],tt.prototype,"shouldWeatherSettingsOpen",void 0),(0,y.gn)([G.Lj],tt.prototype,"locationSearchPlaceholder",void 0),(0,y.gn)([G.Lj],tt.prototype,"shortLocation",void 0),(0,y.gn)([A.LO],tt.prototype,"showHiddenEditContainer",void 0),(0,y.gn)([A.LO],tt.prototype,"weatherData",void 0),(0,y.gn)([A.LO],tt.prototype,"dailyCondition",void 0),(0,y.gn)([A.LO],tt.prototype,"weatherDataUpdateTime",void 0),(0,y.gn)([A.LO],tt.prototype,"showLocationLeft",void 0),(0,y.gn)([A.LO],tt.prototype,"hideLocation",void 0),(0,y.gn)([A.LO],tt.prototype,"locationTooltip",void 0),(0,y.gn)([A.LO],tt.prototype,"showLocationCoachmarkRevIP",void 0),(0,y.gn)([A.LO],tt.prototype,"coachMarkOnScreen",void 0),(0,y.gn)([A.LO],tt.prototype,"coachmarkBannerReady",void 0),(0,y.gn)([A.LO],tt.prototype,"weatherCoachMarkOnScreen",void 0),(0,y.gn)([A.LO],tt.prototype,"weatherHoverData",void 0),(0,y.gn)([A.LO],tt.prototype,"weatherHovercardColor",void 0),(0,y.gn)([A.LO],tt.prototype,"weatherHovercardMode",void 0),(0,y.gn)([A.LO],tt.prototype,"suggestedLocations",void 0),(0,y.gn)([A.LO],tt.prototype,"selectedSuggestLoc",void 0),(0,y.gn)([A.LO],tt.prototype,"telemetryContext",void 0),(0,y.gn)([A.LO],tt.prototype,"greetingContentTypeTelemetry",void 0),(0,y.gn)([A.LO],tt.prototype,"telemetryHoverCardContext",void 0),(0,y.gn)([A.LO],tt.prototype,"telemetryHoverSettingContext",void 0),(0,y.gn)([A.LO],tt.prototype,"weatherState",void 0),(0,y.gn)([A.LO],tt.prototype,"chromiumPageSettingsState",void 0),(0,y.gn)([A.LO],tt.prototype,"defaultMapPageUrl",void 0),(0,y.gn)([A.LO],tt.prototype,"minimap",void 0),(0,y.gn)([A.LO],tt.prototype,"weatherMaxWidthStyle",void 0),(0,y.gn)([A.LO],tt.prototype,"showLocationList",void 0),(0,y.gn)([A.LO],tt.prototype,"followedLocations",void 0),(0,y.gn)([A.LO],tt.prototype,"rootMaxWidth",void 0),(0,y.gn)([G.Lj],tt.prototype,"closeText",void 0),(0,y.gn)([(0,G.Lj)({mode:"boolean"})],tt.prototype,"isDarkMode",void 0),(0,y.gn)([(0,G.Lj)({mode:"boolean"})],tt.prototype,"showSuggests",void 0),(0,y.gn)([G.Lj],tt.prototype,"closeButtonTelemetryTag",void 0),(0,y.gn)([G.Lj],tt.prototype,"inputTelemetryTag",void 0),(0,y.gn)([G.Lj],tt.prototype,"userInput",void 0),(0,y.gn)([(0,G.Lj)({mode:"boolean"})],tt.prototype,"disableSaveButton",void 0),(0,y.gn)([(0,G.Lj)({mode:"boolean"})],tt.prototype,"inputFocused",void 0),(0,y.gn)([A.LO],tt.prototype,"savedWeatherHoverSetting",void 0),(0,y.gn)([A.LO],tt.prototype,"weatherHoverSetting",void 0),(0,y.gn)([A.LO],tt.prototype,"selectWeatherLocation",void 0),(0,y.gn)([A.LO],tt.prototype,"initComponent",void 0),(0,y.gn)([A.LO],tt.prototype,"trapFocus",void 0),(0,y.gn)([A.LO],tt.prototype,"columnArrangement",void 0),(0,y.gn)([A.LO],tt.prototype,"isVisualReady",void 0),(0,y.gn)([A.LO],tt.prototype,"isFinanceGreetingLoaded",void 0),(0,y.gn)([A.LO],tt.prototype,"isWeatherPopupLoaded",void 0),(0,y.gn)([A.LO],tt.prototype,"cardBackgroundColor",void 0),(0,y.gn)([A.LO],tt.prototype,"rotateDefaultData",void 0),(0,y.gn)([A.LO],tt.prototype,"primaryCarousel",void 0),(0,y.gn)([A.LO],tt.prototype,"showMiniMap",void 0),(0,y.gn)([A.lk],tt.prototype,"callRenderMarker",null);var nt=n(93703),ot=n(41472),it=n(74037);const rt=pe.dy`<span class="${e=>e.weatherTextClass}">&lrm;${e=>{var t;return null===(t=e.weatherData)||void 0===t?void 0:t.currentTemperature}}&lrm;</span><div class="${e=>e.weatherUnitContainerClass}"><span>&lrm;${e=>{var t;return null===(t=e.weatherData)||void 0===t?void 0:t.degreeSetting}}&lrm;</span></div>`,at=pe.dy`<div title="${(e,t)=>e.getTempTitle()}" style="display: flex;"><span class="${e=>e.weatherTextClass}">&nbsp;&lrm;${e=>{var t;return null===(t=e.dailyCondition)||void 0===t?void 0:t.highTemp}}&lrm;</span><div class="${e=>e.weatherUnitContainerClass}"><span>&lrm;${e=>{var t;return null===(t=e.weatherData)||void 0===t?void 0:t.degreeSetting}}&lrm;</span></div>${(0,nt.g)((e=>!e.highLowTempStyle),pe.dy`<span class="${e=>e.weatherTextClass}">...</span>`)} ${(0,nt.g)((e=>e.highLowTempStyle),pe.dy`<span class="${e=>e.weatherTextClass}">&nbsp;/&nbsp;</span><span class="${e=>e.weatherTextClass}">&lrm;${e=>{var t;return null===(t=e.dailyCondition)||void 0===t?void 0:t.lowTemp}}&lrm;</span><div class="${e=>e.weatherUnitContainerClass}"><span>&lrm;${e=>{var t;return null===(t=e.weatherData)||void 0===t?void 0:t.degreeSetting}}&lrm;</span></div>`)}</div>`,st=pe.dy`<div class="weather-greeting-text ${e=>e.weatherTextClass}" title="${(e,t)=>e.getWelcomeGreetingTitle()}" style="${e=>e.weatherMaxWidthStyle}">${e=>{var t;return null===(t=e.currentWeatherRoot)||void 0===t?void 0:t.text}}</div>`,ct=pe.dy`<div id="${"i_location"}" ${(0,ot.i)("locationContainer")} class="location-left ${e=>e.isLightGreeting?"light":"dark"}-font-color" title="${(e,t)=>e.getLocationTitle()}">${e=>e.shortLocation}</div>${(0,nt.g)((e=>!e.hideAlertGly&&e.alertGly&&(!e.currentWeatherRoot||!e.currentWeatherRoot.icon)),pe.dy`<div class="${e=>e.weatherGlyphClass} ${e=>e.isLightGreeting?"text-wrapper-image-displayed":"text-wrapper-image-hidden"}" style="margin-right: 3px;">${e=>e.alertGly}</div>`)}
${(0,nt.g)((e=>!e.currentWeatherRoot||null!==e.currentWeatherRoot.icon),pe.dy`<div class="${e=>e.weatherGlyphClass} ${e=>e.isLightGreeting?"text-wrapper-image-displayed":"text-wrapper-image-hidden"}">${(0,nt.g)((e=>e.currentWeatherRoot&&e.currentWeatherRoot.icon),pe.dy`<span class="${e=>e.isLightGreeting?"light":"dark"}-greeting-rotate-icon">${e=>{var t;return null===(t=e.currentWeatherRoot)||void 0===t?void 0:t.icon}}</span>`)} ${(0,nt.g)((e=>e.weatherData&&e.weatherData.pvdrIcon&&(!e.currentWeatherRoot||!e.currentWeatherRoot.icon)),pe.dy`<img src="${e=>{var t,n;return fe.x.getWeatherGlyphBySymbolOrSkyCode(null===(t=e.weatherData)||void 0===t?void 0:t.symbol,null===(n=e.weatherData)||void 0===n?void 0:n.pvdrIcon,e.config.skycodeIconPath||"")}}" class="icon-svg" alt="${e=>{var t,n;return null===(n=null===(t=e.weatherData)||void 0===t?void 0:t.skycode)||void 0===n?void 0:n.children}}" @load=${e=>e.callRenderMarker()}>`)}</div>`)}<div class="text-rotation ${e=>e.currentWeatherRoot&&e.currentWeatherRoot.text?"on":"off"} ${e=>e.isLightGreeting?"light":"dark"}-font-color" style="${e=>e.stableWidthSytle}">${(0,nt.g)((e=>e.currentWeatherRoot&&e.currentWeatherRoot.text&&!(!e.currentWeatherRoot.isRotationalPreview&&e.config.highLowGreetingRoot)),st)} ${(0,nt.g)((e=>e.currentWeatherRoot&&e.currentWeatherRoot.text&&!e.currentWeatherRoot.isRotationalPreview&&e.config.highLowGreetingRoot),at)}<div class="weather-temperature" style="${e=>e.weatherMaxWidthStyle}">${(0,nt.g)((e=>{var t,n;return!e.config.highLowGreetingRoot||!(null===(t=e.dailyCondition)||void 0===t?void 0:t.highTemp)||!(null===(n=e.dailyCondition)||void 0===n?void 0:n.lowTemp)}),rt)} ${(0,nt.g)((e=>{var t,n;return e.config.highLowGreetingRoot&&(null===(t=e.dailyCondition)||void 0===t?void 0:t.highTemp)&&(null===(n=e.dailyCondition)||void 0===n?void 0:n.lowTemp)}),at)}</div></div>`,lt=pe.dy`
${(0,nt.g)((e=>!e.hideAlertGly&&e.alertGly&&(!e.currentWeatherRoot||!e.currentWeatherRoot.icon)),pe.dy`<div class="${e=>e.weatherGlyphClass} ${e=>e.isLightGreeting?"text-wrapper-image-displayed":"text-wrapper-image-hidden"}" style="margin-right: 3px;">${e=>e.alertGly}</div>`)}
${(0,nt.g)((e=>!e.currentWeatherRoot||null!==e.currentWeatherRoot.icon),pe.dy`<div class="${e=>e.weatherGlyphClass} ${e=>e.isLightGreeting?"text-wrapper-image-displayed":"text-wrapper-image-hidden"}">${(0,nt.g)((e=>e.currentWeatherRoot&&e.currentWeatherRoot.icon),pe.dy`<span class="${e=>e.isLightGreeting?"light":"dark"}-greeting-rotate-icon">${e=>{var t;return null===(t=e.currentWeatherRoot)||void 0===t?void 0:t.icon}}</span>`)} ${(0,nt.g)((e=>e.weatherData&&e.weatherData.pvdrIcon&&(!e.currentWeatherRoot||!e.currentWeatherRoot.icon)),pe.dy`<img src="${e=>{var t,n;return fe.x.getWeatherGlyphBySymbolOrSkyCode(null===(t=e.weatherData)||void 0===t?void 0:t.symbol,null===(n=e.weatherData)||void 0===n?void 0:n.pvdrIcon,e.config.skycodeIconPath||"")}}" class="icon-svg" alt="${e=>{var t,n;return null===(n=null===(t=e.weatherData)||void 0===t?void 0:t.skycode)||void 0===n?void 0:n.children}}" @load=${e=>e.callRenderMarker()}>`)}</div>`)}<div class="text-rotation ${e=>e.currentWeatherRoot&&e.currentWeatherRoot.text?"on":"off"} ${e=>e.isLightGreeting?"light":"dark"}-font-color" style="${e=>e.stableWidthSytle}">${(0,nt.g)((e=>e.currentWeatherRoot&&e.currentWeatherRoot.text&&!(!e.currentWeatherRoot.isRotationalPreview&&e.config.highLowGreetingRoot)),st)} ${(0,nt.g)((e=>e.currentWeatherRoot&&e.currentWeatherRoot.text&&!e.currentWeatherRoot.isRotationalPreview&&e.config.highLowGreetingRoot),at)}<div class="weather-temperature" style="${e=>e.weatherMaxWidthStyle}">${(0,nt.g)((e=>{var t,n;return!e.config.highLowGreetingRoot||!(null===(t=e.dailyCondition)||void 0===t?void 0:t.highTemp)||!(null===(n=e.dailyCondition)||void 0===n?void 0:n.lowTemp)}),rt)} ${(0,nt.g)((e=>{var t,n;return e.config.highLowGreetingRoot&&(null===(t=e.dailyCondition)||void 0===t?void 0:t.highTemp)&&(null===(n=e.dailyCondition)||void 0===n?void 0:n.lowTemp)}),at)}</div></div>`,dt=pe.dy`<weather-popup id="weather-popup" :config=${e=>e.config} :strings=${e=>e.strings} :telemetryObject=${e=>e.telemetryObject} :currentWeatherRoot=${e=>e.currentWeatherRoot} :currentWeatherRootIdx=${e=>e.currentWeatherRootIdx} :locationMode=${e=>e.locationMode} :isDarkMode=${e=>e.isDarkMode} :unit=${e=>e.unit} :cardSize="${e=>e.cardSize}" :locationSearchPlaceholder=${e=>e.locationSearchPlaceholder} :cardBackgroundColor=${e=>e.cardBackgroundColor} :weatherHoverData=${e=>e.weatherHoverData} :primaryCarousel=${e=>e.primaryCarousel} :telemetryHoverCardContext=${e=>e.telemetryHoverCardContext} :telemetryHoverSettingContext=${e=>e.telemetryHoverSettingContext} :minimap=${e=>e.minimap} :shouldWeatherSettingsOpen=${e=>e.shouldWeatherSettingsOpen} :showHiddenEditContainer=${e=>e.showHiddenEditContainer} :showLocationList=${e=>e.showLocationList} :detectedLocation=${e=>e.detectedLocation} :followedLocations=${e=>e.followedLocations} :disableSaveButton=${e=>e.disableSaveButton} :inputFocused=${e=>e.inputFocused} :trapFocus=${e=>e.trapFocus} :coachMarkOnScreen=${e=>e.coachMarkOnScreen} :weatherCoachMarkOnScreen=${e=>e.weatherCoachMarkOnScreen} :weatherHoverSetting=${e=>e.weatherHoverSetting} :weatherHovercardMode=${e=>e.weatherHovercardMode} :welcomeGreetingDataConnector=${e=>e.welcomeGreetingDataConnector} :telemetryContext=${e=>e.telemetryContext} :savedWeatherHoverSetting=${e=>e.savedWeatherHoverSetting} :showLocationCoachmarkRevIP=${e=>e.showLocationCoachmarkRevIP} :initialWeatherDataFromFeed=${e=>e.initialWeatherDataFromFeed} :defaultMapPageUrl=${e=>e.defaultMapPageUrl} :showLocationList=${e=>e.showLocationList} :suggestedLocations=${e=>e.suggestedLocations} :initComponent=${e=>e.initComponent} :detectedLocation=${e=>e.detectedLocation} :selectedSuggestLoc=${e=>e.selectedSuggestLoc} :controlHiddenEdit=${e=>e.controlHiddenEdit.bind(e)} exportparts="wea-popup-area" />`,ut=pe.dy`<div id="${"wea-greet-root"}" class="greeting-root render-env-${e=>e.config.renderEnv}" data-t="${e=>{var t,n;return null===(n=null===(t=e.telemetryContext)||void 0===t?void 0:t.weatherTelemetryObject)||void 0===n?void 0:n.getMetadataTag()}}" ${(0,ot.i)("weatherGreetingViewRef")}><a id="${"i_weather"}" href="${e=>{var t;return e.config.staticWeatherLinkUrl?e.config.staticWeatherLinkUrl:e.weatherRootLink||(null===(t=e.weatherData)||void 0===t?void 0:t.deepLink)}}" class="weather-container text-wrapper-image-displayed ${e=>e.getHoverBackgroundClass()}" rel="noopener" target="_blank" aria-label="${e=>e.config.enableHovercard?"":e.weatherInfoHint}" aria-expanded="${e=>e.config.enableHovercard&&e.showHiddenEditContainer}" title="${(e,t)=>e.getTitle()}" @focus="${(e,t)=>e.onWeatherFocus(t.event)}" @focusout="${(e,t)=>e.focusoutHandler(null==t?void 0:t.event)}" @mouseover="${(e,t)=>e.controlHiddenEdit(!0,t.event)}" @mouseleave="${(e,t)=>e.controlHiddenEdit(!1,t.event)}" @click="${(e,t)=>e.clickToControlHiddenEdit(t.event)}" data-t="${e=>{var t,n,o,i;return(null===(t=e.currentWeatherRoot)||void 0===t?void 0:t.contentType)&&e.greetingContentTypeTelemetry?e.greetingContentTypeTelemetry[null===(n=e.currentWeatherRoot)||void 0===n?void 0:n.contentType]:null===(i=null===(o=e.telemetryContext)||void 0===o?void 0:o.weatherLinkTelemetryObject)||void 0===i?void 0:i.getMetadataTag()}}">${(0,nt.g)((e=>!e.showLocationLeft||e.hideLocation),lt)} ${(0,nt.g)((e=>e.showLocationLeft&&!e.hideLocation),ct)} ${(0,nt.g)((e=>e.config.enbClToShowChe),pe.dy`<span class="arrowDown ${e=>e.showHiddenEditContainer?"active":""} ${e=>e.isLightGreeting?"light":"dark"}-font-color" @click="${(e,t)=>e.clickToControlHiddenEdit(t.event,!0)}">${pe.dy.partial(it.Z)}</span>`)}</a><div class="text-wrapper-image-displayed ${e=>e.config.isNameInGreeting?"":"no-greeting-name"}"><span class="welcome-text ${e=>e.isLightGreeting?"light":"dark"}-font-color" id="${"i_welcome"}">${e=>e.welcomeText}</span></div>${(0,nt.g)((e=>e.isWeatherPopupLoaded),dt)}</div>`,ht=pe.dy`<div ${(0,ot.i)("financeGreetingViewRef")} class="fin-wrapper"><finance-greeting :config=${e=>e.config} :strings=${e=>e.strings} :pauseRotateWeatherRoot=${e=>e.pauseRotateWeatherRoot} :financeGreetingDelay=${e=>e.getWeatherRotationDuration()} :telemetryObject=${e=>e.telemetryObject} :showHiddenEditContainer=${e=>e.showHiddenEditContainer} :onToggleFinanceGreeting=${e=>e.onToggleFinanceGreeting.bind(e)} :hoverBackgroundClass=${e=>e.getHoverBackgroundClass()} :isLightGreeting=${e=>e.isLightGreeting} :onStartGreetingIntervalTimer=${e=>e.onStartGreetingIntervalTimer} :financeGreetingViewRef=${e=>e.financeGreetingViewRef} exportparts="visible-hovercard-container" /></div>`,pt=pe.dy` ${(0,nt.g)((e=>e.isFinanceGreetingLoaded),ht)} ${ut}
`;var gt=n(42689),ft=n(22674),mt=n(78923);const yt=mt.i`
`,vt=mt.i`
.weather-temperature{flex-direction:row-reverse;padding-right:8px}.weather-unit-container{margin-left:2px}.gr-fin .icn,.gr-fin .movi{padding:0px 8px 0px 4px}`,wt=mt.i`
:host{width:100%;--welcome-greeting-dialog-z-index:90}.light-fluent-dialog::part(control){border:rgba(0,0,0,.7);background:#FFF;color:#262626}.dark-fluent-dialog::part(control){border:1px solid #BEBEBE;background:#242424;color:#F5F5F5}fluent-dialog::part(control){transform:translate(-50%,-50%);left:50%;top:50%;width:400px;z-index:var(--welcome-greeting-dialog-z-index);position:fixed;border-radius:0px;widtg:400px;height:auto}fluent-dialog::part(positioning-region){position:absolute}.light-fluent-radio::part(checked-indicator){background:#F7F7F7}.dark-fluent-radio::part(checked-indicator){background:#242424}fluent-radio::part(control){z-index:1;transition:all 0.2s ease-in-out;width:20px;height:20px;outline:none}fluent-radio::part(checked-indicator){inset:4px}fluent-radio::part(label){overflow:hidden;box-sizing:content-box;max-height:20px;white-space:nowrap;text-overflow:ellipsis;padding-inline-start:5px}.checked::part(control){background:#8D8D8D;border-color:#1683D8}.light-checked::part(checked-indicator){background:#F7F7F7}.dark-checked::part(checked-indicator){background:#242424}.light-font-color{color:#262626;fill:#262626}.dark-font-color{color:#FFF;fill:#FFF}.greeting-root{display:flex;font-size:14px;height:50px;width:fit-content;position:relative}.greeting-root .no-greeting-name{margin-bottom:auto;margin-top:auto}.render-env-msnhp > a{font-weight:600}.render-env-msnhp #i_welcome{white-space:nowrap;font-size:14px;font-weight:600;margin-bottom:auto;margin-top:13px;padding:0px 8px 3px 0px;line-height:24px}.render-env-msnhp .light-font-color{color:rgb(0,0,0)}.render-env-win{height:46px}.render-env-win #i_location{margin-top:auto;padding-bottom:0px}.render-env-win #i_welcome{width:100px;padding-top:0px}.weather-container{display:none;padding-left:5px;padding-right:5px;text-decoration:none}.text-wrapper-image-displayed{color:#FFF;fill:#FFF}.text-wrapper-image-hidden{color:${gt.C}}.weather-glyph{float:left;height:24px;margin-bottom:auto;margin-top:auto;width:24px}.weather-glyph-location{float:left;height:24px;margin-bottom:auto;margin-top:auto;display:flex;align-items:center}.light-greeting-rotate-icon,.dark-greeting-rotate-icon{height:24px;width:24px;display:flex;align-items:center;justify-content:center}.light-greeting-rotate-icon,.dark-greeting-rotate-icon img{height:24px;width:24px}.light-greeting-rotate-icon svg{fill:#262626}.dark-greeting-rotate-icon svg{fill:#fff}.weather-glyph svg{height:24px;width:24px}.weather-temperature{self-align:center;display:flex}.weather-greeting-text{self-align:center;text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.text-rotation{display:flex}.text-rotation.off .weather-greeting-text{display:none}.text-rotation.on .weather-temperature{display:none}.weather-text-customize{font-size:16px;margin-bottom:auto;margin-top:auto;padding:3px 2px 3px 6px}.outer-container{height:60px}.location-under{display:none;font-size:14px;margin-bottom:auto;margin-top:-7px;padding:0px 4px 3px 10px;line-height:22px}.location-left{display:none;white-space:nowrap;font-size:14px;margin-bottom:auto;margin-top:13px;padding:0px 8px 3px 0px;line-height:24px}.weather-text-location-left{font-size:14px;line-height:24px;margin-bottom:auto;margin-top:auto;padding:0px 1px 0px 2px;z-index:1}.weather-text{font-size:24px;margin-bottom:auto;margin-top:auto;padding:0px 4px 3px 10px}.weather-unit-container{display:flex;padding-top:13px;width:max-content}.weather-unit-container-location-left{align-self:center;padding-bottom:3px;width:max-content;font-size:10px}.location-marker{display:none;font-size:14px;margin-bottom:auto;margin-top:10px;padding:0px 4px 3px 0px;line-height:22px}.location-text{padding:2px 0px 0px 0px}.seperator{font-size:22px;font-weight:lighter;margin-bottom:auto;margin-top:auto;padding:0px 5px 8px 3px;color:#FFF}.welcome-text{display:flex;font-size:14px;line-height:20px;margin-bottom:auto;padding-top:5px;white-space:pre-wrap;width:fit-content}.weather-alert{float:left;margin-bottom:auto;margin-top:auto;height:24px;width:24px;margin-inline-end:3px}.icon{max-height:100%;max-width:100%}.hidden-unit-container{visibility:hidden;opacity:0}.visible-unit-container{display:flex;opacity:0.75}.visible-locationcard-setting{position:inherit}.edit-button{background:transparent !important}.button{line-height:1;cursor:pointer;font-family:inherit;box-sizing:border-box;max-width:374px;display:inline-flex;justify-content:center;align-items:center;overflow:hidden;text-decoration:none;white-space:nowrap;transition:all 0.1s ease-in-out;font-size:14px;border:2px solid transparent;border-radius:2px;min-width:32px;padding:0 10px;height:32px;color:#FFFFFF;fill:#FFFFFF}.button-content-region{position:relative}.icon-inline{width:auto;height:auto}.light-edit-svg-image-displayed{fill:#262626}.dark-edit-svg-image-displayed{fill:#FFF}.dialog{position:absolute;top:0;left:0;right:0;bottom:0;width:100%;height:100%;z-index:var(--welcome-greeting-dialog-z-index)}.light-main-container{color:#262626}.dark-main-container{color:#F5F5F5}.main-container{font-size:14px;line-height:20px;margin:20px 24px;display:block;flex-direction:column;position:relative}.location-setting-label{font-size:20px;line-height:28px;margin-bottom:10px;padding:5px 0;font-weight:200}.close-button{position:absolute;margin:0;padding:0;text-decoration:none;color:transparent;height:32px;width:32px;top:0;text-align:center;outline:none;background:transparent}.clear-button{position:relative;top:50%;transform:translate(0,-50%)}.setting-location{margin-bottom:5px}.light-setting-location-textaction{background:#F7F7F7}.dark-setting-location-textaction{background:#242424}.setting-location-textaction{box-sizing:border-box;position:relative;margin:0;min-width:92px;display:flex;flex-direction:row;transition:all 0.2s ease-in-out;height:32px;border:1px solid #B6B6B6;border-radius:2px}.setting-location-input{outline:none;font-weight:600}.light-text-field{color:#262626}.dark-text-field{color:#F7F7F7}.text-field{height:calc(100% - 4px);margin:2px 1px;border:none;flex:1 0 0px;background:transparent;min-width:inherit;font-family:inherit;box-sizing:border-box;transition:all 0.2s ease-in-out;line-height:20px;font-size:14px;border-radius:2px}.text-field:disabled{background:none;border:none;box-shadow:none;cursor:not-allowed !important;opacity:0.3}.light-search-button{background:#feb632;border:1px solid #feb632;fill:#262626}.dark-search-button{background:#262626;border:1px solid #262626;fill:#F5F5F5}.search-button{height:20px;width:20px;padding:13px;margin:2px;cursor:pointer}.setting-unit{margin-bottom:30px}.setting-unit-title{margin-bottom:12px;letter-spacing:0.7px}.light-weather-save:enabled{background:#feb511 !important}.dark-weather-save:enabled{background:#006CBE !important}.weather-save{font-size:16px;line-height:24px;width:100%;height:52px;text-transform:uppercase;font-weight:600}.button:disabled{background:#BFBFBF;opacity:1}.text-action-disabled{cursor:not-allowed !important;opacity:0.3}.icon-svg{width:24px;height:24px}.weather-alert > svg{width:24px;height:24px;vertical-align:middle;max-height:100%;max-width:100%}.fin-wrapper{display:none}.arrowDown{margin-inline-start:5px;margin-top:auto;margin-bottom:auto}.arrowDown svg{height:14px}.arrowDown.active svg{transform:rotate(-180deg)}.light-hover-background:hover{background:rgba(0,0,0,0.06);border-radius:10px}.dark-hover-background:hover{background:rgba(0,0,0,0.25);border-radius:10px}.light-hover-underline:hover{text-decoration:underline;text-decoration-color:black}.dark-hover-underline:hover{text-decoration:underline;text-decoration-color:white}.hover-scale:hover{transform:scale(1.1);transform-origin:50% 0}`.withBehaviors(new ft.O(yt,vt));o.D.define(i.H.registry),r.D.define(i.H.registry),a.D.define(i.H.registry),s.D.define(i.H.registry),c.D.define(i.H.registry),l.D.define(i.H.registry),d.D.define(i.H.registry),p.To.define(u.j.registry),g.V.define(u.j.registry),f.Mt.define(u.j.registry),h.xb.define(u.j.registry);const Ct={experienceConfigSchema:undefined}},64488:function(e,t,n){n.d(t,{T:function(){return i}});var o=n(33379);let i=!1;(0,o.N)()&&(window.addEventListener("keydown",(()=>{i=!0})),window.addEventListener("mousedown",(()=>{i=!1})))},11670:function(e,t,n){var o,i,r,a,s,c;n.d(t,{I:function(){return l},aZ:function(){return C},HQ:function(){return o},hu:function(){return u},Qk:function(){return d},xn:function(){return y},Sm:function(){return g},JD:function(){return i},Kr:function(){return b},Lb:function(){return x},bj:function(){return p},GN:function(){return a},DH:function(){return r},nc:function(){return s},zn:function(){return h},v9:function(){return v},jA:function(){return m}}),function(e){e.Topstories="topstories",e.Watchlist="watchlist",e.Market="market",e.Currencies="currencies",e.Movers="movers",e.Gainers="gainers",e.Losers="losers",e.Suggested="recommend",e.SuggestedOnly="suggestedonly",e.Sentiment="sentiment",e.Search="search",e.ArticleSuggested="articlerecommend",e.ArticleMentioned="articlementioned",e.ArticleRelated="articlerelated",e.Crypto="crypto",e.wlsummary="watchlistsummary",e.PrepopulatedWL="prepopulatedwl",e.Portfolio="portfolio",e.PriceSpotlight="pricespotlight",e.Earning="earning",e.CurrencySpotlight="currencyspotlight",e.EventBrief="eventbrief"}(o||(o={})),function(e){e.EarningRelease="EarningRelease",e.InstitutionalHolding="InstitutionalHolding",e.MarketBrief="MarketBrief",e.PriceDrop="PriceDrop",e.PriceMovement="PriceMovement",e.PriceSpike="PriceSpike",e.Sentiment="Sentiment",e.TechnicalIndicator="TechnicalIndicator",e.WatchlistSummary="WatchlistSummary",e.Currency="CurrencyPair",e.EventBrief="EventBrief"}(i||(i={})),function(e){e.Gainer="positive",e.Loser="negative",e.General="general"}(r||(r={})),function(e){e.Bullish="bullish",e.Bearish="bearish"}(a||(a={})),function(e){e.Stocks="stock",e.Funds="fund",e.Commodity="future",e.Indices="index",e.ETF="etf",e.Currency="currencyPair",e.Currencies="currency",e.Cryptocurrency="cryptocurrency"}(s||(s={})),function(e){e.AfterHours="afterHours",e.PreHours="preHours",e.Regular="regular",e.Closed="closed",e.Extended="extended",e.Break="break",e.Unknown="unknown"}(c||(c={}));const l={Company:"company",Industry:"industry",Market:"market"},d={MoneyInfo:"money-sd-card",MoneyGreeting:"money-greeting",VerticalQuoteList:"vertical-quote-list",VerticalWatchlist:"vertical-watchlist",FollowButton:"follow-button",QuoteItem:"quote-item",MarketBrief:"market-brief",EventBrief:"event-brief",PriceSpotlight:"price-spotlight",SpotlightEarnings:"spotlight-earnings",WatchlistSummary:"watchlist-summary",WatchlistSummaryQuoteItem:"watchlist-summary-quote-item",SpotlightCurrency:"spotlight-currency",MSNStockChart:"msn-stock-chart",MoneyInfoStockChart:"money-info-stock-chart",SentimentSpotlight:"sentiment-spotlight",FeedsNotificationToast:"feeds-notification-toast"},u={MSNStockChart:"MSNStockChart",MoneyInfoStockChart:"MoneyInfoStockChart",MoneyInfo:"MoneyInfo",Greeting:"Greeting",VerticalQuoteList:"VerticalQuoteList",VerticalWatchlist:"VerticalWatchlist",QuoteItem:"QuoteItem",FollowButton:"FollowButton",MarketBrief:"MarketBrief",EventBrief:"EventBrief",PriceSpotlight:"PriceSpotlight",SpotlightEarnings:"SpotlightEarnings",SentimentSpotlight:"SentimentSpotlight",WatchlistSummary:"WatchlistSummary",WatchlistSummaryQuoteItem:"WatchlistSummaryQuoteItem",SpotlightCurrency:"SpotlightCurrency",FeedsNotificationToast:"FeedsNotificationToast"},h={[o.Watchlist]:d.VerticalWatchlist,[o.Market]:d.VerticalQuoteList,[o.Currencies]:d.VerticalQuoteList,[o.Movers]:d.VerticalQuoteList,[o.Gainers]:d.VerticalQuoteList,[o.Losers]:d.VerticalQuoteList,[o.Suggested]:d.VerticalQuoteList,[o.PriceSpotlight]:d.PriceSpotlight,[o.CurrencySpotlight]:d.PriceSpotlight,[o.Crypto]:d.VerticalQuoteList,[o.Topstories]:d.MarketBrief,[o.Sentiment]:d.SentimentSpotlight,[o.Earning]:d.SpotlightEarnings,[o.wlsummary]:d.WatchlistSummary,[o.EventBrief]:d.EventBrief},p={[i.PriceMovement]:o.PriceSpotlight,[i.WatchlistSummary]:o.wlsummary,[i.EarningRelease]:o.Earning,[i.TechnicalIndicator]:o.PriceSpotlight,[i.MarketBrief]:o.Topstories,[i.EventBrief]:o.EventBrief},g={MoneyInfo:"MoneyInfo",Greeting:"Greeting"};g.MoneyInfo,u.MoneyInfo,g.Greeting,u.Greeting;var f=n(59049);const m=new Map;var y;!function(e){e[e.CurrentTabId=0]="CurrentTabId",e[e.CardSize=1]="CardSize",e[e.CurrentQuoteIds=2]="CurrentQuoteIds",e[e.ChartItemDict=3]="ChartItemDict",e[e.MoneyInfoApiData=4]="MoneyInfoApiData",e[e.MoneyTabViews=5]="MoneyTabViews",e[e.MoneySDCardView=6]="MoneySDCardView",e[e.InterestMenuItems=7]="InterestMenuItems",e[e.FollowedEntities=8]="FollowedEntities",e[e.PreviewType=9]="PreviewType",e[e.SpotlightTabData=10]="SpotlightTabData",e[e.MoneyConfig=11]="MoneyConfig",e[e.RootTelemetryObject=12]="RootTelemetryObject",e[e.IsPinned=13]="IsPinned",e[e.WidgetDimension=14]="WidgetDimension",e[e.WidgetSize=15]="WidgetSize",e[e.toggleInterestManager=16]="toggleInterestManager",e[e.interestOptions=17]="interestOptions",e[e.QuoteItemDict=18]="QuoteItemDict",e[e.WatchlistIds=19]="WatchlistIds",e[e.CurrentPageIndex=20]="CurrentPageIndex",e[e.FooterMaxPages=21]="FooterMaxPages",e[e.NewsListItems=22]="NewsListItems",e[e.isMoversTabAdded=23]="isMoversTabAdded",e[e.CardType=24]="CardType",e[e.IsGA=25]="IsGA",e[e.showNotificationText=26]="showNotificationText",e[e.showNotificationInterval=27]="showNotificationInterval",e[e.EnableHoverTelemetry=28]="EnableHoverTelemetry"}(y||(y={}));const v=e=>{const t=new f.v(`moneyInfoAppState_${e}`);return t.set(y.FollowedEntities,[]),t.set(y.toggleInterestManager,!1),t.set(y.interestOptions,void 0),t.set(y.showNotificationText,!0),t};m.set(g.MoneyInfo,v(g.MoneyInfo));var w=n(62602);class C extends w.Z{}const x={moneyVertical:"finance",moneyCategory:"money",moneyCard:"MoneyCard",moneyCryptoCard:"MoneyCryptoCard",moneyPreWlCard:"MoneyPreWlCard",moneyMarketBriefCard:"MoneyMarketBriefCard",headerLinkClick:"money_header",landingPageLinkClick:"money_landing_page",seeMoreClick:"see_more",seeWatchlistClick:"see_watchlist",quoteItemClick:"money_stock",recommendQuoteItemClick:"recommend_money_stock",quoteAddedToWatchlist:"quote_add_to_watchlist",quoteRemovedFromWatchlist:"quote_remove_from_watchlist",quoteAddedConfirmationShown:"quote_add_confirmation",newsLandingPageLinkClick:"news_landing_page",listsLandingPageLinkClick:"lists_landing_page",wlPromoLandingPageLinkClick:"see_watchlist_promo",wlSummaryLandingPageLinkClick:"see_watchlist_summary",learnCryptoItemClick:"see_crypto_learn",addWatchListPageShown:"MoneyAddWatchlistCard",goBackViewClick:"go_back_view",addedToWatchlistFromSearchPage:"add_to_watchlist",moneyAutoSuggestion:"money_auto_suggestion",menuCustomizationClick:"moneycard_customization",menuSearchAndAddSymbolClick:"moneycard_customization_add_watchlist",menuDataProviderClick:"moneycard_customization_data_provider",menuLearnSuggClick:"moneycard_customization_learn_sugg",menuHideClick:"moneycard_customization_hide",menuMoreClick:"moneycard_customization_more",menuDismissOpenClick:"menu_dismiss_open_click",menuDismissCloseClick:"menu_dismiss_close_click",menuDismissInvestClick:"menu_dismiss_invest_click",menuDismissMarketClick:"menu_dismiss_market_click",menuDismissCryptoClick:"menu_dismiss_crypto_click",menuDismissHideClick:"menu_dismiss_hide_click",menuDismissCancelClick:"menu_dismiss_calcel_click",carouselPreviousClick:"money_carousel_previous",carouselNextClick:"money_carousel_next",quoteOverlay:"quote_overlay",closeQuoteOverlay:"close_quote_overlay",seeDetailsOverlay:"see_details_overlay",MoneyNotificationToast:"MoneyNotificationToast",MoneyNotificationToastLink:"MoneyNotificationToastLink",MoneyNotificationToastDismiss:"MoneyNotificationToastDismiss"},b={moneyUserInterestedInNews:"MoneyUserInterestedInNews",moneyCardWatchlistUsers:"MoneyWatchlistUsers",moneyUserGroup:"MoneyUserGroup",moneyCardNotifications:"MoneyCardNotifications",moneyPortfolioUser:"MoneyPortfolioUser",moneyCardFirstTab:"MoneyCardFirstTab",moneyCardCurrentTab:"MoneyCardCurrentTab",moneyCardCurrentSize:"MoneyCardCurrentSize",moneyCardTabsCount:"MoneyCardTabsCount",moneySpotlightUXTriggered:"moneySpotlightUXTriggered",moneySpotlightPreviewType:"moneySpotlightPreviewType",moneyCardSpotlightDataFrom:"moneyCardSpotlightDataFrom",moneyMarketBriefCardPresent:"moneyMarketBriefCardPresent",moneyCardSuggestedOnlyTabPresent:"moneyCardSuggestedOnlyTabPresent",moneyCardRegularCardAdded:"moneyCardRegularCardAdded",FinanceWatchlistPopup:"FinanceWatchlistPopup",FinanceUserGroup:"FinanceUserGroup",FinanceWatchlistSource:"FinanceWatchlistSource",FinancePrefix:"Fin_",FinanceUserSignIn:"FinanceUserSignIn",FinanceMeControl:"FinanceMeControl",FinanceSignInInconsistent:"FinanceSignInInconsistent",FinanceSignInType:"FinanceSignInType",FinanceTraceId:"FinanceTraceId",FinanceWatchlistHash:"FinanceWatchlistHash",FinanceWatchlistCount:"FinanceWatchlistCount"}},62602:function(e,t,n){var o;n.d(t,{Z:function(){return i},N:function(){return o}}),function(e){e._1x_1y="_1x_1y",e._1x_2y="_1x_2y",e._1x_3y="_1x_3y",e._1x_4y="_1x_4y",e._1x_5y="_1x_5y",e._2x_1y="_2x_1y",e._2x_2y="_2x_2y",e._2x_3y="_2x_3y",e._2x_4y="_2x_4y",e._2x_6y="_2x_6y",e._3x_1y="_3x_1y",e._3x_2y="_3x_2y",e._4x_1y="_4x_1y",e._4x_2y="_4x_2y",e._5x_1y="_5x_1y",e._5x_2y="_5x_2y"}(o||(o={}));class i{constructor(e){this.transformerProvider=e}}},52292:function(e,t,n){n.d(t,{F$:function(){return f},Yu:function(){return p},o8:function(){return m},sn:function(){return g}});var o=n(30854),i=n(68913),r=n(84169);const a=[3,8];Object.assign({temperatureTile:"temperature",precipitationNonNowcast:"precipitation",wildfirepoint:"wildfire"},r.jG.isMobile?{airqualitystation:"airquality"}:{});var s,c;!function(e){e.TC="TC",e.TD="TD",e.TS="TS",e.H1="H1",e.H2="H2",e.H3="H3",e.H4="H4",e.H5="H5",e.STS="STS",e.TY="TY",e.STY="STY",e.SuperTY="SuperTY",e.VST="VST",e.VT="VT"}(s||(s={})),function(e){e.Observation="Observation",e.Current="Current",e.Forecast="Forecast"}(c||(c={}));const l="Point",d="Polygon",u="Forecast",h="Current";function p(e){const t=""+(e||"")||"0";return t.length<2?"0"+t:t}function g(e,t,n,o,i,r){let s=6;if(!e||!e[0])return s;const c=o/2,d=n/2,p=i||n,g=r||o,f=function(e){if(!e||!e[0]||!e[0].features)return[];const t=[];return e[0].features.forEach(((e,n)=>{var o;if(!e||t.length>=2)return!1;const i=e.geometry||{},r=i.coordinates,a=null===(o=e.properties)||void 0===o?void 0:o.dataType;i.type!==l||a!==h&&a!==u||t.push({index:n,coordinates:r})})),t}(e);if(0===f.length)return s;const m={offsetX:1,offsetY:1};f.forEach((e=>{const t=Math.abs(e.coordinates[0]-d);m.offsetX=t>m.offsetX?t:m.offsetX;const n=Math.abs(e.coordinates[1]-c);m.offsetY=n>m.offsetY?n:m.offsetY}));const y=p/2/m.offsetX,v=g/2/m.offsetY;let w=0;if((y>2&&v>2||y<1||v<1)&&(w=y<v?y:v),0!=w){const e=Math.floor(Math.log2(w))+t;s=(C=e)<=a[0]?a[0]:C>=a[1]?a[1]:C||6}var C;return s}function f(e,t=6,n,r,a){const s=a.lat,c=a.lon,u=function(e){const t=[];return(e||[]).forEach((e=>{if(e.displayType!==o.jF.ImageContent||!e.imgUrl)try{const n=e.metadata&&JSON.parse(e.metadata);t.push(Object.assign(Object.assign({},n),{title:e.title||""}))}catch(e){return}})),t}(e);return u.forEach((e=>{(e.features||[]).forEach((e=>{const o=t,a=(e||{}).geometry||{},u=a.coordinates||[];let h;if(a.type===l)h=(i.b.latLonsToPixelLandingPage([u],s,c,n,r,o)||[])[0];else if(a.type===d){const e=u.reduce(((e,t)=>e.concat(t)),[]);h=e&&Array.isArray(e[0])?i.b.latLonsToPixelLandingPage(e,s,c,n,r,o):i.b.latLonsToPixelLandingPage(u,s,c,n,r,o)}else h=i.b.latLonsToPixelLandingPage(u,s,c,n,r,o);a.oldCoords=a.coordinates,a.coordinates=h}))})),u}function m(e,t){return e&&t.lat&&t.lon?i.b.convertKm2Mile(i.b.getDistance(Number(e.latitude),Number(e.longitude),t.lat,t.lon)):0}},13788:function(e,t,n){n.d(t,{V:function(){return _},T:function(){return f}});var o=n(39926),i=n(53131),r=n(27782),a=n(16549),s=n(3490),c=n(22674),l=n(22798),d=n(78923),u=n(29717),h=n(72174);const p=d.i`
    .weather-nowcast {
        text-align: left;
    }
    .weather-manual-rotate-wrapper::part(previous-flipper) {
        left: 0px;
    }
    .weather-manual-rotate-wrapper::part(next-flipper) {
        right: 0px;
    }
`,g=d.i`
    .weather-nowcast {
        text-align: right;
    }
    .weather-manual-rotate-wrapper::part(previous-flipper) {
        left: 284px;
    }
    .weather-manual-rotate-wrapper::part(next-flipper) {
        right: 284px;
    }
`,f=d.i`
        ${h.R}

        .weather-container {
            padding: 0px;
        }

        .weather-title {
            height: 40px;
            width: 100%;
            padding: 0px 16px;
            box-sizing: border-box;
        }

        .weather-header {
            padding: 16px 0px 8px 0px;
            margin-top: 0px;
        }

        .weather-pen-btn {
            display: flex;
            flex-direction: row;
            justify-content: space-between;
            z-index: 2;
            margin-top: 12px;
            margin-inline: 4px 0px;
        }

        .weather-forecast-region-container {
            height: 150px;
        }

        .weather-forecast {
            padding: 0 16px 0px;
        }

        .weather-forecast-update-time {
            display: block;
            height: 18px;
            line-height: 18px;
            font-size: 10px;
            padding: 0 16px;
            overflow: hidden;
            opacity: 0.6;
        }

        .weather-forecast-item-npro {
            height: 111px;
        }

        .weather-forecast-day {
            margin-top: 8px;
            height: 15px;
            font-family: ${i.S};
            font-weight: 400;
        }

        .weather-forecast-item svg {
            margin: 12px 0px 8px 0px;
            width: 18px;
            height: 18px;
        }

        .weather-forecast-high {
            font-size: ${r.c};
            line-height: ${a.v};
            margin-bottom: 4px;
        }

        .weather-forecast-low {
            font-size: ${r.c};
            line-height: ${a.v};
            margin-bottom: 2px;
        }

        .weather-footer-provider {
            font-size: ${s.G};
            line-height: ${a.s};
            padding-top: 6px;
            margin-inline-end: 24px;
        }

        .weather-footer {
            margin-top: 0;
            height: 40px;
            overflow: hidden;
        }

        .weather-alertmap-container {
            margin: 0px 16px;
        }

        .weather-alertmap {
            height: 117px;
            margin: 4px 0px;
            position: relative;
        }

        .weather-severealert-info {
            display: flex;
            text-decoration: none;
            color: var(--textStyle);
            fill: var(--textStyle);
        }

        .weather-severealert-info:hover {
            text-decoration: underline;
        }

        .weather-severealert-info-empty {
            min-height: 20px;
        }

        .weather-severealert-icon {
            margin: 0px 4px;
        }

        .weather-severealert-text {
            font-size: 12px;
            font-weight: 600;
        }

        .weather-nowcast-container {
            margin: 0px 16px;
        }

        .weather-nowcast-chart {
            height: 118px;
            width: 268px;
            margin-top: 3px;
        }

        .weather-nowcast {
            max-width: none;
        }

        .weather-trend-container {
            margin: 14px 24px;
        }

        .weather-auto-rotate-fstpage {
            width: 100%;
        }

        .weather-auto-rotate-sndpage {
            width: 100%;
        }

        /* styles for init rotation */
        .weather-auto-rotate > * {
            position: absolute;
            top: 101%;
            left: 0;
            animation: calc(var(--animate-interval) * 2s) autoplay_init infinite
                ease-in-out;
        }

        .weather-auto-rotate > *:nth-child(1) {
            animation-delay: calc((var(--start-delay) - var(--animate-interval)) * 1s);
            animation-fill-mode: forwards;
        }

        .weather-auto-rotate > *:nth-child(2) {
            animation-delay: calc(var(--start-delay) * 1s);
        }

        .weather-auto-rotate-run > * {
            animation-play-state: running;
        }

        .weather-auto-rotate-pause > * {
            animation-play-state: paused;
        }

        .weather-manual-rotate-wrapper::part(tablist) {
            position: absolute;
            top: 145px;
            left: 50%;
            transform: translate(-50%, -50%);
            padding: 0px;
        }

        .weather-manual-rotate-wrapper::part(previous-flipper) {
            top: 60px;
            position: absolute;
        }

        .weather-manual-rotate-wrapper::part(next-flipper) {
            top: 60px;
            position: absolute;
        }

        ::slotted(fluent-button[slot="weather-pen-btn"]) {
            min-width: 24px;
            width: 24px;
            height: 24px;
        }

    `.withBehaviors(new c.O(p,g),(0,u.vF)(d.i`
                .weather-edit svg {
                    fill: ${l.H.ButtonText};
                }
            `));var m=n(49218),y=n(93703),v=n(89150),w=n(46663),C=n(81563),x=n(1932),b=n(66070);const L=m.dy`<a class="weather-severealert-info ${e=>e.weatherData.alertEvent&&e.weatherData.alertSig?"":"weather-severealert-info-empty"}" part="weather-severealert-info" title="${e=>{var t;return(null===(t=e.weatherData)||void 0===t?void 0:t.alertHint)||""}}" href="${e=>{var t;return(null===(t=e.weatherData)||void 0===t?void 0:t.alertLink)||e.weatherData.link}}" target="_blank" data-t="${e=>e.t("alertTextTelemetryTag")}"><div class="weather-severealert-icon" part="weather-severealert-icon">${e=>e.weatherData.alertIcon}</div><span class="weather-severealert-text">${e=>e.weatherData.alertEvent} ${e=>e.weatherData.alertSig}</span></a>`,k=m.dy` ${(0,y.g)((e=>"SevereWeather"!==e.currentContentType),L)} ${(0,y.g)((e=>"SevereWeather"===e.currentContentType),m.dy`<a class="weather-severealert-info weather-severealert-info-empty"></a>`)}
`,T=m.dy`<div class="weather-forecast-update-time" style="padding: 0;">${e=>e.weatherData.updateTime}</div>`,S=m.dy`${e=>(0,C.Ot)(e.minimapWce,{properties:{cardType:"welcomegreeting",params:e.minimap,unit:e.weatherData.unitSetting,defaultMapPageUrl:e.weatherData.defaultMapPageUrl,target:e.target}})}`,D=m.dy`${e=>void 0!==e.currentContentIdx&&e.weatherData.weatherContentData&&e.weatherData.weatherContentData.length>e.currentContentIdx?m.dy`<div class="weather-alertmap-container">${e=>e.weatherData.showUpdateTime&&e.weatherData.updateTime?T:k}<div class="weather-alertmap">${S}</div></div>`:m.dy`<div class="weather-alertmap-container">${e=>e.weatherData.showUpdateTime&&e.weatherData.updateTime?T:L}<div class="weather-alertmap">${S}</div></div>`}`,W=m.dy`<div class="weather-footer" part="weather-footer"><fluent-anchor class="sd-action" part="sd-action" style=" --textStyle: var(--neutral-foreground-rest); --hintBackground: var(--weather-card-cta-background); --hoverBackground: var(--weather-card-cta-hover-background);" href="${e=>{var t;return void 0!==e.currentContentIdx&&e.weatherData.weatherContentData&&e.weatherData.weatherContentData.length>e.currentContentIdx&&(null===(t=e.weatherData.weatherContentData[e.currentContentIdx])||void 0===t?void 0:t.footerLink)?e.weatherData.weatherContentData[e.currentContentIdx].footerLink:e.weatherData.link}}" target=${e=>e.target} data-t="${e=>e.t("seeForecastTelemetryTag")}" @focusout="${(e,t)=>e.focusoutHandler(null==t?void 0:t.event)}"><div>${e=>{var t;return void 0!==e.currentContentIdx&&e.weatherData.weatherContentData&&e.weatherData.weatherContentData.length>e.currentContentIdx&&(null===(t=e.weatherData.weatherContentData[e.currentContentIdx])||void 0===t?void 0:t.footerContent)?e.weatherData.weatherContentData[e.currentContentIdx].footerContent:e.weatherData.footerContent}} ${w.w}</div></fluent-anchor></div>`,I=m.dy`<div class="weather-forecast-container"><div class="weather-forecast-update-time">${(0,y.g)((e=>e.weatherData.showUpdateTime&&e.weatherData.updateTime),m.dy` ${e=>e.weatherData.updateTime} `)}</div><ul class="weather-forecast" part="weather-forecast">${(0,v.rx)((e=>e.weatherData.forecastData),x.K,{positioning:!0})}</ul></div>`,M=m.dy` ${(0,y.g)((e=>!e.minimap&&!!e.weatherData.forecastData&&e.weatherData.forecastData.length||e.showForecastList()),I)} ${(0,y.g)((e=>e.minimap),D)}
`,O=m.dy` ${(0,y.g)((e=>e.weatherData),m.dy`<div class="weather-container" part="weather-container"><div class="weather-title" part="weather-title">${b.AO}</div><div class="weather-forecast-region-container">${(0,y.g)((e=>!!e.rotateConfig&&"static"==e.rotateConfig.rotateMode),M)}</div>${W}</div>`)}
`,_=o.xI.compose({name:"msft-weather-card-greeting",template:O,styles:f,shadowOptions:{delegatesFocus:!0}})},33572:function(e,t,n){n.d(t,{qu:function(){return h},P3:function(){return g},ao:function(){return p}});var o=n(33940),i=n(39926),r=n(28904),a=n(42590),s=n(99452),c=n(94537),l=n(38985),d=n(29422);const u={saveTelemetryTag:"saveButton",cancelTelemetryTag:"cancelButton",fahrenheitTelemetryTag:"fahrenheitRadio",celsiusTelemetryTag:"celsiusRadio",inputTelemetryTag:"locationSearchInput",searchClearTelemetryTag:"searchClear",suggestTelemetryTag:"locationSuggest",detectLocationTelemetryTag:"detectLocationButton"};var h,p;!function(e){e[e.Success=1]="Success",e[e.Failure=2]="Failure"}(h||(h={})),function(e){e[e.Fahrenheit=1]="Fahrenheit",e[e.Celsius=2]="Celsius"}(p||(p={}));class g extends r.H{constructor(){super(...arguments),this.showSuggests=!1,this.inputFocused=!1,this.inputClearFocused=!1,this.handleDocumentKeydown=e=>{if(e.defaultPrevented||!this.settingData)return;const t=this.userQuery&&this.settingData.suggestedLocations&&this.settingData.suggestedLocations.length>0;if(!t&&("v3"!==this.locationModeV2||this.userQuery))return;let n=this.settingData.suggestedLocations?this.settingData.suggestedLocations.length:0;this.userQuery||(n=1);const o=this.settingData.suggestedLocations||[];switch(e.key){case c.iF:e.preventDefault(),e.stopPropagation(),null==this.activeSuggestIndex||this.activeSuggestIndex<0||this.activeSuggestIndex>=n-1?this.activeSuggestIndex=0:this.activeSuggestIndex=this.activeSuggestIndex+1;break;case c.SB:null==this.activeSuggestIndex||this.activeSuggestIndex<=0||this.activeSuggestIndex>n-1?this.activeSuggestIndex=n-1:this.activeSuggestIndex=this.activeSuggestIndex-1,e.preventDefault(),e.stopPropagation();break;case c.kL:case c.BI:null!=this.activeSuggestIndex&&this.activeSuggestIndex>=0&&this.activeSuggestIndex<n&&(t?this.selectSuggestLocation(o[this.activeSuggestIndex]):this.detectCurrentLocation(),this.activeSuggestIndex=-1,e.preventDefault());break;case c.oM:this.showSuggests=!1;break;case c.CX:e.preventDefault(),this.handleClearClick();break;default:return}},this.handleClickOutside=e=>{e.defaultPrevented||this.suggestList&&!this.suggestList.contains(e.target)&&(this.showSuggests=!1)}}get isAlwaysDetectLocation(){return this.settingData.locationMode==i.EM.AutoDetectLoc}get showDetectButton(){return this.settingData.locationMode===i.EM.SpecifyLoc&&0==(2&(this.settingData.changeSignal||0))&&!this.shouldShowAlertIcon()}handleInputForSuggest(e){0==this.showSuggests&&(this.showSuggests=!0),this.inputFocused=!0,e&&e.preventDefault(),this.inputControl&&(this.userQuery!==this.inputControl.value&&(this.userQuery=this.inputControl.value),this.inputControl.value&&(this.$emit("suggest",this.inputControl.value),this.settingData.selectedLocation&&this.settingData.selectedLocation.displayName!==this.inputControl.value&&this.$emit("select",null)))}handleClickOnLocationInput(e){this.handleInputForSuggest(e)}handleFocusOnLocationInput(e){this.handleInputForSuggest(e)}handleInputBlur(){this.inputFocused=!1}detectedLocationFollowed(){var e;return!(!this.followedLocations||!this.detectedLocation)&&(null===(e=this.followedLocations)||void 0===e?void 0:e.filter((e=>(0,l.eu)(e,this.detectedLocation||{}))).length)>0}isCurrentLocation(e){return(0,l.eu)(e,this.currentLocation||{})&&d.dP(e,this.currentLocation||{})}focusoutHandler(e){return this.$emit("weatherFocusout",e),!0}detectCurrentLocation(){this.$emit("setLocationMode",i.EM.SpecifyLoc),this.$emit("detectLocation"),this.showSuggests=!1}getSelectedName(){var e;const t=(null===(e=this.settingData.selectedLocation)||void 0===e?void 0:e.displayName)||"";return this.inputControl&&t&&(this.inputControl.value=t),t}selectSuggestLocation(e,t){this.inputControl&&e&&(this.inputControl.value=`${e.displayName}`),t&&t.preventDefault(),this.$emit("setLocationMode",i.EM.SpecifyLoc),this.$emit("select",e),this.showSuggests=!1,this.isWidget||this.saveSetting();const n=this.settingData.unitSet==p.Fahrenheit?this.fahrenheitRaido:this.celsiusRaido;n&&n.focus()}chooseLocationMode(e){if(e.defaultPrevented||!e.target)return;e.preventDefault(),this.showSuggests=!1;const t=parseInt(e.target.value);this.$emit("setLocationMode",t),this.inputControl&&(this.inputControl.value="")}clickOnSwitchLocationMode(){this.switchLocationMode()}keyDownOnSwitchLocationMode(e){const t=e.code.toLocaleLowerCase();if("space"!==t&&"enter"!==t)return!0;this.switchLocationMode()}switchLocationMode(){this.showSuggests=!1;const e=this.settingData.locationMode===i.EM.SpecifyLoc?i.EM.AutoDetectLoc:i.EM.SpecifyLoc;this.$emit("setLocationMode",e),this.inputControl&&(this.inputControl.value="")}chooseWeatherUnit(e){if(e.defaultPrevented||!e.target)return;e.preventDefault(),this.showSuggests=!1;const t=parseInt(e.target.value);this.$emit("setUnitMode",t)}cancelSetting(){this.$emit("cancel"),this.inputControl&&(this.inputControl.value="")}saveSetting(){this.$emit("save"),this.inputControl&&(this.inputControl.value="")}connectedCallback(){super.connectedCallback(),this.layout||(this.layout="half"),this.focus(),this.addEventListener("keydown",this.handleDocumentKeydown),document.addEventListener("click",this.handleClickOutside)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("keydown",this.handleDocumentKeydown),document.removeEventListener("click",this.handleClickOutside)}shouldShowSuggests(){if(!this.showSuggests)return!1;if(!this.userQuery)return!0;return!!(this.userQuery&&this.settingData.suggestedLocations&&this.settingData.suggestedLocations.length>0)||!!this.searchNoResult}shouldShowDetectLocation(){var e,t,n,o;return!(void 0!==(null===(t=null===(e=this.inputControl)||void 0===e?void 0:e.value)||void 0===t?void 0:t.length)&&0!==(null===(o=null===(n=this.inputControl)||void 0===n?void 0:n.value)||void 0===o?void 0:o.length)||this.userQuery||!this.detectedLocation)}locationFollowed(e){return!!this.followedLocations&&this.followedLocations.filter((t=>(0,l.eu)(e,t))).length>0}shouldShowAlertIcon(){return!1}shouldShowClearButton(){return this.settingData.locationMode!==i.EM.AutoDetectLoc&&((this.inputFocused||this.inputClearFocused||this.showSuggests)&&!!this.userQuery||!!this.settingData.selectedLocation)}handleClearClick(){this.$emit("select",null),this.userQuery="",this.inputControl&&(this.inputControl.value="",this.inputControl.focus()),this.showSuggests=!0}handleClearFocusChange(e){this.inputClearFocused=e}handleUnitClick(e){setTimeout((()=>{e?this.fahrenheitRaido&&this.fahrenheitRaido.focus():this.celsiusRaido&&this.celsiusRaido.focus()}),0)}t(e){return function(e,t){const n=e&&u[t];if(!n)return"";const o=e[n];return o.getMetadata?o.getMetadataTag():""}(this.telemetry,e)}}(0,o.gn)([a.Lj],g.prototype,"layout",void 0),(0,o.gn)([a.Lj],g.prototype,"editHeader",void 0),(0,o.gn)([a.Lj],g.prototype,"cardType",void 0),(0,o.gn)([a.Lj],g.prototype,"detectLocationLabel",void 0),(0,o.gn)([a.Lj],g.prototype,"specifyLocationLabel",void 0),(0,o.gn)([a.Lj],g.prototype,"detectLocationActionLabel",void 0),(0,o.gn)([a.Lj],g.prototype,"specifyLocationActionButton",void 0),(0,o.gn)([a.Lj],g.prototype,"searchPlaceHolder",void 0),(0,o.gn)([a.Lj],g.prototype,"searchClearButtonLabel",void 0),(0,o.gn)([a.Lj],g.prototype,"searchNoResult",void 0),(0,o.gn)([a.Lj],g.prototype,"unitsTitle",void 0),(0,o.gn)([a.Lj],g.prototype,"locationTitle",void 0),(0,o.gn)([a.Lj],g.prototype,"fahrenheitLabel",void 0),(0,o.gn)([a.Lj],g.prototype,"celsiusLabel",void 0),(0,o.gn)([a.Lj],g.prototype,"saveButtonCont",void 0),(0,o.gn)([a.Lj],g.prototype,"cancelButtonCont",void 0),(0,o.gn)([a.Lj],g.prototype,"locationModeV2",void 0),(0,o.gn)([a.Lj],g.prototype,"isWidget",void 0),(0,o.gn)([a.Lj],g.prototype,"isGreeting",void 0),(0,o.gn)([a.Lj],g.prototype,"detectedLocation",void 0),(0,o.gn)([a.Lj],g.prototype,"currentLocation",void 0),(0,o.gn)([a.Lj],g.prototype,"followedLocations",void 0),(0,o.gn)([s.LO],g.prototype,"settingData",void 0),(0,o.gn)([s.LO],g.prototype,"activeSuggestIndex",void 0),(0,o.gn)([s.LO],g.prototype,"showSuggests",void 0),(0,o.gn)([s.LO],g.prototype,"inputFocused",void 0),(0,o.gn)([s.LO],g.prototype,"inputClearFocused",void 0),(0,o.gn)([s.LO],g.prototype,"userQuery",void 0),(0,o.gn)([s.LO],g.prototype,"telemetry",void 0),(0,o.gn)([s.LO],g.prototype,"sdCardData",void 0)},25389:function(e,t,n){var o,i=this&&this.__extends||(o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},o(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var r=n(79951),a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mode=r.AnimationMode.animateFrom,t}return i(t,e),t}(r.default);t.default=a},73157:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var o=n(97611),i=function(){function e(e){var t=this;this.pause=function(){(0,o.invokeFunctionForEach)(t.animations,"pause")},this.finish=function(){(0,o.invokeFunctionForEach)(t.animations,"finish")},this.cancel=function(){(0,o.invokeFunctionForEach)(t.animations,"cancel")},this.animations=e}return Object.defineProperty(e.prototype,"onFinish",{get:function(){return this._onFinish},set:function(e){var t=this;this._onFinish=e;var n=this.getLongestAnimation();if("function"==typeof n.onFinish){var o=n.onFinish;n.onFinish=function(){o(),t._onFinish()}}else n.onFinish=this._onFinish},enumerable:!1,configurable:!0}),e.prototype.play=function(){(0,o.invokeFunctionForEach)(this.animations,"play")},e.prototype.reverse=function(){(0,o.invokeFunctionForEach)(this.animations,"reverse")},e.prototype.getLongestAnimation=function(){var e=this;return this.animations.reduce((function(t,n){var o=e.getAnimationDuration(t.effectTiming);return e.getAnimationDuration(n.effectTiming)>=o?n:t}))},e.prototype.getAnimationDuration=function(e){var t=e.duration,n="string"==typeof t?parseFloat(t):t;return(e.delay||0)+(n||0)},e}();t.default=i},19444:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var o=n(97611),i=function(){function e(e){var t=this;this.play=function(){t.applySequencedCallback(t.animations,"play")},this.reverse=function(){t.applySequencedCallback(t.animations.reverse(),"reverse")},this.pause=function(){(0,o.invokeFunctionForEach)(t.animations,"pause")},this.finish=function(){(0,o.invokeFunctionForEach)(t.animations,"finish")},this.cancel=function(){(0,o.invokeFunctionForEach)(t.animations,"cancel")},this.animations=e}return e.prototype.applySequencedCallback=function(e,t){var n=this,o=e.length;o<=0||(e.forEach((function(e,i){e.onFinish=i<o-1?n.animations[i+1][t]:n.onFinish||void 0})),e[0][t]())},e}();t.default=i},10098:function(e,t,n){var o,i=this&&this.__extends||(o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},o(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var r=n(79951),a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mode=r.AnimationMode.animateTo,t}return i(t,e),t}(r.default);t.default=a},79951:function(e,t){var n;Object.defineProperty(t,"__esModule",{value:!0}),t.AnimationMode=void 0,function(e){e[e.animateTo=0]="animateTo",e[e.animateFrom=1]="animateFrom"}(n=t.AnimationMode||(t.AnimationMode={}));var o=function(){function e(e,t,n){var o=this;this.effectTiming={fill:"forwards",iterations:1,duration:500},this._keyframes=[],this.play=function(){o.ensureAnimationObjectExists(),o.animation.play()},this.pause=function(){o.ensureAnimationObjectExists(),o.animation.pause()},this.finish=function(){o.ensureAnimationObjectExists(),o.animation.finish()},this.cancel=function(){o.ensureAnimationObjectExists(),o.animation.cancel()},this.reverse=function(){o.ensureAnimationObjectExists(),o.animation.reverse()},this.addKeyframes=function(e){o._keyframes.push(e)},this.animationTarget=e,n&&(this.effectTiming=Object.assign({},this.effectTiming,n)),t&&(t.transformOrigin&&(e.style.transformOrigin=t.transformOrigin),t.transformStyle&&(e.style.transformStyle=t.transformStyle)),this.options=t||{}}return Object.defineProperty(e.prototype,"onFinish",{get:function(){return this._onFinish},set:function(e){this._onFinish=e,this.animation&&(this.animation.onfinish=e)},enumerable:!1,configurable:!0}),e.prototype.ensureAnimationObjectExists=function(){void 0===this.animation&&this.createAnimationObject()},e.prototype.createAnimationObject=function(){this.animation=new Animation(this.keyframeEffect,document.timeline),void 0!==this.onFinish&&(this.animation.onfinish=this.onFinish),void 0!==this.onCancel&&(this.animation.oncancel=this.onCancel)},e.prototype.getPropertiesToAnimate=function(){var t=this;return Object.keys(e.propertyMap).filter((function(n){return e.propertyMap[n].reduce((function(e,n){return void 0!==t.options[n]||e}),!1)}))},e.prototype.normalizeInitialValue=function(e,t){if(void 0!==t){var n="0.01";switch(e){case"transform":var o=t.match(/matrix\((.+)\)/);if(Array.isArray(o)){var i=o[1].split(",").map((function(e,o){return 0===parseFloat(t)&&(0===o||3===o)?n:e}));return"matrix(".concat(i.join(","),")")}break;case"opacity":return 0===parseFloat(t)?n:t}return t}},e.prototype.getInitialKeyframeValues=function(){var e=this;if(!(this.animationTarget instanceof HTMLElement)||"undefined"==typeof window)return{};var t=this.getPropertiesToAnimate(),n=window.getComputedStyle(this.animationTarget),o={};return t.forEach((function(t){o[t]=e.normalizeInitialValue(t,n[t])})),o},e.prototype.formatTransformFunction=function(t,n){if(-1===e.propertyMap.transform.indexOf(t))return"";switch(t){case"x":case"y":t="translate".concat(t.toUpperCase()),n="number"==typeof n?n=this.pixelify(n):n;break;case"rotate":n="".concat(n.toString(),"deg");break;case"scale":0===n&&(n=.01)}return"string"!=typeof n&&(n=n.toString()),"".concat(t,"(").concat(n,")")},e.prototype.pixelify=function(e){return"".concat(e,"px")},e.prototype.getOptionKeyframeValues=function(){var t=this,n=this.getPropertiesToAnimate(),o={};return n.forEach((function(n){o[n]=e.propertyMap[n].map((function(e){var n=t.options[e];if(void 0===n)return null;switch(e){case"opacity":return n.toString();case"top":case"right":case"bottom":case"left":return"number"==typeof n?t.pixelify(n):n;default:return t.formatTransformFunction(e,n)}})).filter((function(e){return Boolean(e)})).join(" ")})),o},e.prototype.getOptionKeyframes=function(){var e=[this.getInitialKeyframeValues(),this.getOptionKeyframeValues()];return this.mode===n.animateFrom?e.reverse():e},e.prototype.sortOffsets=function(e){return e.sort((function(e,t){var n=parseFloat(e),o=parseFloat(t);return n<o?-1:n>o?1:0}))},e.prototype.consolidateKeyframes=function(e){var t=[];return e.forEach((function(e){e.forEach((function(e,n){var o=e.offset;void 0===o&&(o=0===n?0:1,e.offset=o);var i=o.toString();t[i]=void 0===t[i]?e:Object.assign(t[i],e)}))})),this.sortOffsets(Object.keys(t)).map((function(e){return t[e]}))},Object.defineProperty(e.prototype,"keyframes",{get:function(){return this.consolidateKeyframes(this._keyframes.concat([this.getOptionKeyframes()]))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"keyframeEffect",{get:function(){return new KeyframeEffect(this.animationTarget,this.keyframes,this.effectTiming)},enumerable:!1,configurable:!0}),e.propertyMap={opacity:["opacity"],transform:["x","y","rotate","scale"],top:["top"],left:["left"],bottom:["bottom"],right:["right"]},e}();t.default=o},2792:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.navPane=t.exponentialReversed=t.fastInFortySevenPercent=t.exponential=t.fastInOut=t.fastOut=t.fastIn=t.appToApp=t.backToApp=t.drillIn=t.easeIn=t.easeOutSmooth=t.easeOut=t.linear=void 0,t.linear=[[0,0],[1,1]],t.easeOut=[[0,0],[.58,1]],t.easeOutSmooth=[[0,.35],[.15,1]],t.easeIn=[[.25,.1],[.25,1]],t.drillIn=[[.17,.17],[0,1]],t.backToApp=[[.5,0],[.6,1]],t.appToApp=[[.5,0],[1,.9]],t.fastIn=[[.1,.9],[.2,1]],t.fastOut=[[.9,.1],[1,.2]],t.fastInOut=[[.8,0],[.2,1]],t.exponential=[[.1,.25],[.75,.9]],t.fastInFortySevenPercent=[[.11,.5],[.24,.96]],t.exponentialReversed=[[.25,.1],[.9,.75]],t.navPane=[[.1,.7],[.1,1]]},30444:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.cubicBezier=t.formatCubicBezier=void 0;var o=n(2792);function i(e){if(!Array.isArray(e)||!Array.isArray(e[0])||!Array.isArray(e[1]))return"";var t=e[0],n=e[1];return"cubic-bezier(".concat(t[0],", ").concat(t[1],", ").concat(n[0],", ").concat(n[1],")")}t.formatCubicBezier=i,t.cubicBezier=function(e){return e in o?i(o[e]):""}},42230:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.fadeOut=t.fadeIn=t.applyFade=t.fadeEffectTiming=t.fadeOutKeyframes=t.fadeInKeyframes=void 0;var o=n(10098);function i(e,n,i){void 0===i&&(i={});var r=Object.assign({},t.fadeEffectTiming,i),a=new o.default(e,null,r);return a.addKeyframes(n),a}t.fadeInKeyframes=[{opacity:"0.01"},{opacity:"1"}],t.fadeOutKeyframes=[{opacity:"1"},{opacity:"0"}],t.fadeEffectTiming={easing:"linear",duration:500},t.applyFade=i,t.fadeIn=function(e,n){return void 0===n&&(n={}),i(e,t.fadeInKeyframes,n)},t.fadeOut=function(e,n){return void 0===n&&(n={}),i(e,t.fadeOutKeyframes,n)}},12902:function(e,t,n){t.xQ=void 0;var o=n(10098);t.xQ=o.default,n(25389).default,n(73157).default,n(19444).default,n(79951).default;var i=n(42230);var r=n(30444);n(91876).default,n(33416).default,n(27440).default},56345:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var o=n(58514),i=n(97533),r=function(){function e(){var e=this;this.subscriptions=[],this.scrollDistance=0,this.requestFrame=function(){e.requestedFrame&&cancelAnimationFrame(e.requestedFrame),e.requestedFrame=requestAnimationFrame(e.update)},this.lastScrollY=(0,i.default)(),this.update=this.update.bind(this)}return e.prototype.subscribe=function(e,t){e instanceof HTMLElement&&"function"==typeof t&&!this.isSubscribed(e,t)&&(0===this.subscriptions.length&&window.addEventListener("scroll",this.requestFrame),this.subscriptions.push({element:e,callback:t,inView:(0,o.default)(e)}))},e.prototype.unsubscribe=function(e,t){this.subscriptions=this.subscriptions.filter((function(n){return!(e===n.element&&t===n.callback)})),0===this.subscriptions.length&&window.removeEventListener("scroll",this.requestFrame)},e.prototype.update=function(){var e=(0,i.default)();this.scrollDistance=e-this.lastScrollY,this.lastScrollY=e},e.prototype.isSubscribed=function(e,t){return!!this.subscriptions.filter((function(n){return e===n.element&&t===n.callback})).length},e}();t.default=r},91876:function(e,t,n){var o,i=this&&this.__extends||(o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},o(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var r=n(58514),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.update=function(){var t=this;e.prototype.update.call(this),this.subscriptions.forEach((function(e){var n=(0,r.default)(e.element);n&&e.callback(t.scrollDistance),n!==e.inView&&(e.inView=n)}))},t}(n(56345).default);t.default=a},33416:function(e,t,n){var o,i=this&&this.__extends||(o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},o(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var r=n(58514),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.update=function(){var t=this;e.prototype.update.call(this),this.subscriptions.forEach((function(e,n){var o=(0,r.default)(e.element);o&&!e.inView&&e.callback(t.scrollDistance),o!==e.inView&&(e.inView=o)}))},t}(n(56345).default);t.default=a},27440:function(e,t,n){var o,i=this&&this.__extends||(o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},o(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var r=n(58514),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.update=function(){var t=this;e.prototype.update.call(this),this.subscriptions.forEach((function(e,n){var o=(0,r.default)(e.element);!o&&e.inView&&e.callback(t.scrollDistance),o!==e.inView&&(e.inView=o)}))},t}(n(56345).default);t.default=a},97611:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.invokeFunctionForEach=void 0,t.invokeFunctionForEach=function(e,t){e.forEach((function(e){return e[t]()}))}},58514:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.getBoundingClientRect();return t.bottom>=0&&t.right>=0&&t.top<=window.innerHeight&&t.left<=window.innerWidth}},97533:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return"undefined"==typeof window?NaN:void 0!==window.scrollY?window.scrollY:window.pageYOffset}}}]);