"use strict";(self.webpackChunk_msnews_msnews_experiences=self.webpackChunk_msnews_msnews_experiences||[]).push([["breakingNewsWC"],{65987:function(e,n,i){i.r(n),i.d(n,{BreakingNewsWC:function(){return L},BreakingNewsWCStyles:function(){return S},BreakingNewsWCTemplate:function(){return C},ToolingInfo:function(){return O}});var t,a=i(33940),r=i(68364),s=i(26415),o=i(14752),l=i(42590),d=i(99452),g=i(83227),h=i(65135),c=i(64193),p=i(54256),w=i(84169),b=i(73252);function m(e){if(!e)throw new Error("No data passed to schema transformer");const n=e;let i;if(function(e){return(null==e?void 0:e.headlines)&&e.headlines instanceof Array&&e.headlines.length>=2&&e.headlines[0].title.indexOf(t.BreakingNewsTitle)>-1&&e.headlines[1].title.indexOf(t.BreakingNewsHeadline)>-1}(n)&&(i=n),!i)throw new Error("Unable to find an acceptable document");return i}!function(e){e.BreakingNewsTitle="Breaking News Title",e.BreakingNewsHeadline="Breaking News Headline"}(t||(t={}));const u={path:["v1","cms","api","amp"]};function f(e){return(0,a.mG)(this,void 0,void 0,(function*(){const n=e.contentId;if(!n)throw new Error(`Unable to find content id in ${b.Al?b.Al.Locale:""} config`);const i=new URLSearchParams(window.location.search),t=i.get("forceBreakingNews"),a="1"===i.get("noDateBN")||t,r=(e=>{const n=new URL("/breakingnews/",w.jG.ContentServiceUrlBase),i=[...u.path];return i.push("article"),i.push(e),n.pathname+=i.join("/"),n})(t||n),s=yield fetch(r.href);if(!s.ok)throw new Error(`Error in Response: ${s.statusText}`);let o=function(e){const n=(e.headlines[2].kicker||"").split("/").pop(),i=e._lastPublishedDateTime?new Date(e._lastPublishedDateTime):new Date,t={validId:n.startsWith("ar-"),id:n,startDate:i,endDate:new Date(i.getTime()+36e5),type:"Breaking"};return{headlineLead:e.headlines[0].kicker,headline:e.headlines[1].kicker,headlineLink:e.headlines[2].kicker,metadata:t}}(m(yield s.json()));if(o.headline&&o.headlineLead||!e.staticBanner||(o=function(e){const n=new Date(e.startTime),i=new Date(e.endTime);return{headlineLead:e.headlineLead,headline:e.headline,headlineLink:e.url,metadata:{validId:null!=e.id,id:e.id,startDate:new Date(n.getTime()+6e4*n.getTimezoneOffset()),endDate:new Date(i.getTime()+6e4*i.getTimezoneOffset()),type:e.type}}}(e.staticBanner)),a&&o&&o.metadata){const e=new Date;o.metadata.startDate=e,o.metadata.endDate=new Date(e.getTime()+36e5)}return o}))}var k=i(65337),v=i(38156);var x=i(19388),y=i(32717);class L extends c.l{constructor(){super(...arguments),this.breakingNewsStorageKey="breakingNewsDismissed",this.breakingNewsNoKey="breakingNewsNoKey",this.newsExpiration60Min=36e5,this.bannerType="Breaking"}experienceConnected(){this.loadState=0,this.config.disabled||(this.showDismiss=!this.config.disableDismiss,this.config.prerenderRefresh?(0,y.eC)().then((()=>{this.fetchData()})):this.config.prerenderRefreshAfterTTVR?(0,y.eC)().then((()=>(0,x.e3)().then((()=>{this.fetchData()})))):this.fetchData())}fetchData(){return(0,a.mG)(this,void 0,void 0,(function*(){this.loadState=1;try{let e=yield f(this.config);if(this.config.showBeyondEndDate&&(e.metadata.endDate=null),!this.isValid(e))return this.loadState=2,this.markVisuallyReady(-1),void this.cleanupLocalStorage();this.telemetryObject&&(e=function(e,n){let i;i=n.headlineLead?n.headlineLead&&n.headline?n.headlineLead+": "+n.headline:n.headlineLead:"";const t=e.addOrUpdateChild({name:"Link",behavior:v.wu.Navigate,content:{headline:i},type:v.c9.ActionButton}),a=e.addOrUpdateChild({name:"Dismiss",behavior:v.wu.Hide,content:{headline:i},type:v.c9.ActionButton});return Object.assign(Object.assign({},n),{linkTelemetryTags:t.getMetadataTag(),dismissTelemetryTags:a.getMetadataTag()})}(this.telemetryObject,e)),this.breakingNewsData=e,this.bannerType=this.breakingNewsData.metadata.type;let n=!1;this.headline&&this.headlineLead&&(this.config.tmplValue&&h.M0.addOrUpdateTmplProperty(this.config.tmplValue,this.bannerType),h.M0.addOrUpdateTmplProperty("BreakingNewsBannerDisplay","1"),n=!0),this.loadState=2,this.markVisuallyReady(n?void 0:-1)}catch(e){this.loadState=3,this.markVisuallyReady(-1),(0,r.OO)(e,s.yMR,"BreakingNewsWCContentFetchFailed",`Unknown Error of BreakingNewsWCContentFetchFailed for content id: ${this.config.contentId}`)}this.cleanupLocalStorage(),o.A.singleMark(this.getExperienceType())}))}isValid(e){var n;if(!this.showDismiss)return!0;if(this.config.showBeyondEndDate)return!0;let i=!0;const t=e.metadata,a=this.getBNLocalStorage();if(t.validId&&t.id){if(a[t.id]||t.endDate.getTime()<(new Date).getTime())return!1}else{const e=(null===(n=a[this.breakingNewsNoKey])||void 0===n?void 0:n.endDate)||null,t=new Date;if(e){i=!(new Date(e).getTime()>t.getTime())}}return i}cleanupLocalStorage(){const e=(new Date).getTime(),n=[],i=this.getBNLocalStorage();Object.keys(i).forEach((t=>{const a=i[t];new Date(a.endDate).getTime()<e&&n.push(t)})),n.forEach((e=>{delete i[e]})),this.updateBNLocalStorage(i)}getExperienceType(){return g.x.breakingNewsWC}get headline(){var e,n;return null!==(n=null===(e=this.breakingNewsData)||void 0===e?void 0:e.headline)&&void 0!==n?n:""}get headlineLead(){var e,n;return null!==(n=null===(e=this.breakingNewsData)||void 0===e?void 0:e.headlineLead)&&void 0!==n?n:""}get headlineLink(){var e,n;return null!==(n=null===(e=this.breakingNewsData)||void 0===e?void 0:e.headlineLink)&&void 0!==n?n:""}get linkTelemetryTags(){var e,n;return null!==(n=null===(e=this.breakingNewsData)||void 0===e?void 0:e.linkTelemetryTags)&&void 0!==n?n:{}}get dismissTelemetryTags(){var e,n;return null!==(n=null===(e=this.breakingNewsData)||void 0===e?void 0:e.dismissTelemetryTags)&&void 0!==n?n:{}}get bannerTypeClass(){return(0,p.A)(this.isMobileBreakingNews?"mobile-breaking-news":"breaking-news",this.isMobileBreakingNews||"Breaking"!=this.bannerType?"":"color-breaking","Event"==this.bannerType?"color-event":"")}dismissBannerHandler(e,n){var i;const t=this.getBNLocalStorage(),a=null===(i=this.breakingNewsData)||void 0===i?void 0:i.metadata,r=a.endDate?a.endDate.toISOString():void 0;if(a.validId&&a.id)t[a.id]={startDate:a.startDate.toISOString(),endDate:r};else if(a.startDate)t[this.breakingNewsNoKey]={startDate:a.startDate.toISOString(),endDate:r};else{const e=new Date;t[this.breakingNewsNoKey]={startDate:(new Date).toISOString(),endDate:new Date(e.getTime()+this.newsExpiration60Min)}}this.updateBNLocalStorage(t),this.breakingNewsData=null}cardClickOnMobileBreakingNews(e,n){this.navigateToURLCallbackOnMobile(e.headlineLink)}getBNLocalStorage(){return JSON.parse((0,k.$o)().getItem(this.breakingNewsStorageKey)||"{}")||{}}updateBNLocalStorage(e){(0,k.$o)().setItem(this.breakingNewsStorageKey,JSON.stringify(e))}}(0,a.gn)([(0,l.Lj)({mode:"boolean"})],L.prototype,"isMobileBreakingNews",void 0),(0,a.gn)([d.LO],L.prototype,"loadState",void 0),(0,a.gn)([d.LO],L.prototype,"breakingNewsData",void 0),(0,a.gn)([d.lk],L.prototype,"headline",null),(0,a.gn)([d.lk],L.prototype,"headlineLead",null),(0,a.gn)([d.lk],L.prototype,"headlineLink",null),(0,a.gn)([d.lk],L.prototype,"linkTelemetryTags",null),(0,a.gn)([d.lk],L.prototype,"dismissTelemetryTags",null);var D=i(49218),T=i(93703);const B=D.dy`<div role="alert" id="breakingNewsBanner" part="breaking-news" class="${e=>e.bannerTypeClass} ${e=>e.config.enableRiverZoom?"river-zoom":""}"><div class="breaking-news-content"><a target="_blank" href="${e=>e.headlineLink||null}" class="headline-link" data-t="${e=>e.linkTelemetryTags}"><div class=headline"><span class="text text-bold">${e=>e.headlineLead}${e=>e.headlineLead&&e.headlineLink?":  ":" "}</span><span class="text">${e=>e.headline}</span></div></a></div>${(0,T.g)((e=>e.showDismiss),D.dy`<div class="breaking-news-hide"><fluent-button class="breaking-news-hide-btn" data-t="${e=>e.dismissTelemetryTags}" @click=${(e,n)=>e.dismissBannerHandler&&e.dismissBannerHandler(e,n.event)} aria-label="${e=>e.strings.dismissLabel}" role="button" title="${e=>e.strings.dismissLabel}" id="breakinNewsHideBtn"><svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M11.4587 4.39737L11.5355 4.46449C11.804 4.73297 11.8264 5.15437 11.6027 5.44835L11.5355 5.52515L9.06066 8.00002L11.5355 10.4749C11.804 10.7434 11.8264 11.1648 11.6027 11.4588L11.5355 11.5356C11.267 11.804 10.8456 11.8264 10.5517 11.6027L10.4749 11.5356L8 9.06068L5.52513 11.5356C5.25664 11.804 4.83524 11.8264 4.54127 11.6027L4.46447 11.5356C4.19598 11.2671 4.17361 10.8457 4.39734 10.5517L4.46447 10.4749L6.93934 8.00002L4.46447 5.52515C4.19598 5.25666 4.17361 4.83526 4.39734 4.54129L4.46447 4.46449C4.73295 4.196 5.15435 4.17363 5.44832 4.39737L5.52513 4.46449L8 6.93936L10.4749 4.46449C10.7434 4.196 11.1648 4.17363 11.4587 4.39737Z"></path></svg></fluent-button></div>`)}</div>`,N=D.dy`<div role="alert" id="breakingNewsBanner" part="breaking-news" class=${e=>e.bannerTypeClass}><a @click=${(e,n)=>e.headlineLink&&e.cardClickOnMobileBreakingNews(e,n.event)} target="_blank" href="${e=>e.headlineLink||null}" class="mobile-headline-link" data-t="${e=>e.linkTelemetryTags}"><div class="mobile-breaking-news-title">${e=>e.headlineLead}${e=>e.headlineLead&&e.headlineLink?":  ":" "}</div><div class="mobile-breaking-news-content ellipsis">${e=>e.headline}</div></a><fluent-button class="mobile-breaking-news-hide-btn" data-t="${e=>e.dismissTelemetryTags}" @click=${(e,n)=>e.dismissBannerHandler&&e.dismissBannerHandler(e,n.event)} aria-label="${e=>e.strings.dismissLabel}" role="button" title="${e=>e.strings.dismissLabel}" id="breakinNewsHideBtn"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4.2097 4.3871L4.29289 4.29289C4.65338 3.93241 5.22061 3.90468 5.6129 4.2097L5.70711 4.29289L12 10.585L18.2929 4.29289C18.6834 3.90237 19.3166 3.90237 19.7071 4.29289C20.0976 4.68342 20.0976 5.31658 19.7071 5.70711L13.415 12L19.7071 18.2929C20.0676 18.6534 20.0953 19.2206 19.7903 19.6129L19.7071 19.7071C19.3466 20.0676 18.7794 20.0953 18.3871 19.7903L18.2929 19.7071L12 13.415L5.70711 19.7071C5.31658 20.0976 4.68342 20.0976 4.29289 19.7071C3.90237 19.3166 3.90237 18.6834 4.29289 18.2929L10.585 12L4.29289 5.70711C3.93241 5.34662 3.90468 4.77939 4.2097 4.3871L4.29289 4.29289L4.2097 4.3871Z" fill="#FFFFFF"></path></svg></fluent-button></div>`,C=D.dy`
${(0,T.g)((e=>2===e.loadState&&e.headline&&e.headlineLead&&!e.isMobileBreakingNews),B)}
${(0,T.g)((e=>2===e.loadState&&e.headline&&e.headlineLead&&e.breakingNewsData&&e.isMobileBreakingNews),N)}
`;var F=i(78923),$=i(88828);const S=F.i` .breaking-news{display:flex;flex-direction:row;align-items:center;min-height:38px;grid-template-columns:1fr;overflow:hidden;border-radius:2px;padding:0px 12px 0px 16px;color:#fff;text-align:center;margin-bottom:10px}.breaking-news a{color:inherit;text-decoration:unset}.breaking-news a:link:hover{text-decoration:underline}.headline{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.text{color:inherit;cursor:inherit;font-size:16px}.text-bold{font-weight:800;text-transform:uppercase}.breaking-news-content{display:flex;flex-direction:column;justify-content:space-around;text-decoration:none;width:100%;&:hover:{text-decoration:underline;text-decoration-color:#FFFFFF}}.breaking-news-hide-btn{display:flex;flex-direction:row;align-items:center;background:transparent;color:rgb(255,255,255)}.mobile-breaking-news{display:flex;background-color:rgb(209,52,56);box-shadow:0px 0px 0.8px rgba(0,0,0,0.13),0px 2px 10px rgba(0,0,0,0.08);border-radius:12px;box-sizing:border-box;flex:1;flex-direction:column;color:#FFFFFF;margin:0px auto 16px;padding:16px;position:relative;width:var(--news-width,361px)}.color-breaking{background-color:rgb(168,5,5)}.color-event{background-color:#00529B}a.mobile-headline-link,a.mobile-headline-link:hover,a.mobile-headline-link:visited,a.mobile-headline-link:link,a.mobile-headline-link:active,a.mobile-headline-link:focus{text-decoration:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mobile-breaking-news-title{font-style:normal;font-weight:700;font-size:14px;line-height:16px;text-transform:uppercase;color:#FFFFFF}.mobile-breaking-news-content{font-style:normal;font-weight:400;font-size:14px;line-height:16px;color:#FFFFFF;margin-top:4px;margin-right:28px}.ellipsis{text-overflow:ellipsis;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;overflow:hidden}.mobile-breaking-news-hide-btn{position:absolute;top:0;right:0;margin-top:8px;margin-right:8px;background:transparent;color:#FFFFFF}.mobile-breaking-news-hide-btn svg{width:24px;height:24px}@media (min-width:1133px) and (max-width:1256px){.riverZoom{transform:scale(0.9)}}@media (min-width:${(0,$.sZ)(3).toString()}px) and (max-width:1132px){.riverZoom{transform:scale(0.8)}}@media (min-width:856px) and (max-width:948px){.riverZoom{transform:scale(0.9)}}@media (min-width:${(0,$.sZ)(2).toString()}px) and (max-width:855px){.riverZoom{transform:scale(0.84)}}`,O={experienceConfigSchema:undefined}},74613:function(e,n,i){i.r(n),i.d(n,{PoweredbyLegendWC:function(){return c},PoweredbyLegendWCStyles:function(){return x},PoweredbyLegendWCTemplate:function(){return m},ToolingInfo:function(){return y}});var t=i(33940),a=i(64193),r=i(58958),s=i(42590),o=i(54256),l=i(65135),d=i(26415),g=i(84169),h=i(83227);class c extends a.l{experienceConnected(){this.reportStringsError()}reportStringsError(){const{poweredBy:e,provider:n}=this.strings,i=g.jG.CurrentMarket&&g.jG.CurrentMarket.valueOf();e&&n||l.M0.sendAppErrorEvent(Object.assign(Object.assign({},d.BZ0.PoweredByLegendInvalidConfig),{message:`Config for ${i} does not have the required config properties.`}))}getExperienceType(){return h.x.poweredByLegendWC}wrapperClassComputed(){return(0,o.A)("legend-tagline-wrapper",["footer-legend",this.config.renderAsFooter],["footer-legend-dark-on",(0,r.Y)()])}}(0,t.gn)([(0,s.Lj)({mode:"boolean"})],c.prototype,"hidePoweredBy",void 0);var p=i(49218),w=i(93703);const b=p.dy`<span class="legend-font legend-powered-by order-3">${e=>e.strings.poweredByWrap}</span>`,m=p.dy`<div class="${e=>e.hidePoweredBy?"legend-hidden-wrapper":""} ${e=>e.wrapperClassComputed()}"><span class="legend-font legend-powered-by" style="order: ${e=>e.config.reverseOrder?2:1};">${e=>e.strings.poweredBy}</span><span class="legend-font legend-provider" style="order: ${e=>e.config.reverseOrder?1:2};">${e=>e.strings.provider}</span>${(0,w.g)((e=>e.strings.poweredByWrap),b)}</div>`;var u=i(78923),f=i(42689),k=i(74449);const v="edge"===g.jG.AppType,x=u.i` .legend-font{font-size:12px;line-height:16px}.order-3{order:3}.legend-provider{font-weight:600;margin-left:4px;color:${v?f.C:k.Q}}.legend-powered-by{font-weight:400;margin-left:4px;color:${k.Q}}.legend-tagline-wrapper{align-items:baseline;display:flex;flex-direction:row;opacity:1;overflow:hidden;transition:visibility 0.2s linear,opacity 0.2s linear;visibility:visible;white-space:nowrap;margin-bottom:${v?"4px":"0"}}.legend-hidden-wrapper{opacity:0;visibility:hidden}.footer-legend{border-radius:2px 2px 0px 0px;box-shadow:0px 0px 9.2px rgb(0 0 0 / 11%),0px 12.8px 28.8px rgb(0 0 0 / 13%);bottom:0px;min-width:68px;margin:0;width:auto;position:fixed;padding:5px 10px;right:25px;z-index:600;background:#F7F7F7;color:#717171}.footer-legend-dark-on{background:#3B3B3B;color:#8D8D8D}`,y={experienceConfigSchema:undefined}},54256:function(e,n,i){function t(...e){return e.reduce(((e,n)=>{const i=e.length?" ":"",a=Array.isArray(n)&&n[1]?t.call(null,n[0]):"function"==typeof n?n():"string"==typeof n?n:"";return a.length?e+i+a:e}),"")}i.d(n,{A:function(){return t}})}}]);