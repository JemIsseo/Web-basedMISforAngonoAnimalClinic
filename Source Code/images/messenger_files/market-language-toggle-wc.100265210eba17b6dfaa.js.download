"use strict";(self.webpackChunk_msnews_msnews_experiences=self.webpackChunk_msnews_msnews_experiences||[]).push([["market-language-toggle-wc"],{34519:function(e,t,n){n.r(t),n.d(t,{MarketLanguageToggleWC:function(){return k},MarketLanguageToggleWCStyles:function(){return M},MarketLanguageToggleWCTemplate:function(){return p},ToolingInfo:function(){return x}});var i=n(33940),o=n(31699),a=n(99452),s=n(83227),r=n(38156);const l="MarketLanguageToggleWC",c="ToggleButton";var g=n(64193),d=n(41115),u=n(65135);class k extends g.l{constructor(){super(...arguments),this.forceHide=!1,this.isOnImage=!1,this.isDarkMode=!1,this.isFixed=!1,this.darkModeQuery=matchMedia("(prefers-color-scheme:dark)"),this.onScroll=()=>{this.config.disableHideOnScroll||((window.pageYOffset||document.documentElement.scrollTop)>30&&this.config.enableMarketLanguageToggle2||(window.pageYOffset||document.documentElement.scrollTop)>60&&this.config.enableMarketLanguageToggle3?this.forceHide=!0:this.forceHide=!1)}}experienceConnected(){var e;window.addEventListener("scroll",this.onScroll),this.isDarkMode=!!(null===(e=this.darkModeQuery)||void 0===e?void 0:e.matches),this.iconClass=this.isOnImage?"light":"dark",(0,d.N6)("backgroundImage",(e=>{const t="displayed"===e;o.S.queueUpdate((()=>{this.isOnImage=t||this.isDarkMode,this.iconClass=this.isOnImage?"light":"dark"}))})),this.darkModeQuery.addEventListener("change",(e=>{this.isDarkMode=!!(null==e?void 0:e.matches)})),this.TelemetryConstants=(e=>{if(!e)return;const t=e.contract,n=(null==t||t.ext,e.addOrUpdateChild({name:l}));return{componentRoot:e,marketLanguageToggle:n.addOrUpdateChild({name:c,action:r.Aw.Click,destinationUrl:"",content:{headline:l,type:r.uH.Settings}})}})(this.telemetryObject)}disconnectedCallback(){this.darkModeQuery.removeEventListener("change",(e=>{this.isDarkMode=!!(null==e?void 0:e.matches)}))}getExperienceType(){return s.x.marketLanguageToggleWC}shadowDomPopulated(){this.markVisuallyReady()}switchToSettingPage(){this.isFixed}handleToggleIcon(e,t){t&&u.M0.sendActionEvent(t.currentTarget,r.Aw.Click,r.wu.Click),this.onMarketValueChange(e)}}(0,i.gn)([a.LO],k.prototype,"localeMarket",void 0),(0,i.gn)([a.LO],k.prototype,"forceHide",void 0),(0,i.gn)([a.LO],k.prototype,"isOnImage",void 0),(0,i.gn)([a.LO],k.prototype,"iconClass",void 0),(0,i.gn)([a.LO],k.prototype,"isDarkMode",void 0),(0,i.gn)([a.LO],k.prototype,"isFixed",void 0),(0,i.gn)([a.LO],k.prototype,"TelemetryConstants",void 0);var h=n(49218),m=n(93703);const p=h.dy`<div id="marketLanguageToggle" class="marketLanguageToggle ${e=>e.isFixed?"isFixed":""} ${e=>e.isOnImage?"image-enable":""}">${(0,m.g)((e=>e.config.enableMarketLanguageToggle3&&!e.forceHide),h.dy`<fluent-button class="switchToButton ${e=>e.iconClass}" tabindex=-1 data-t="${e=>e.TelemetryConstants&&e.TelemetryConstants.marketLanguageToggle.getMetadataTag()}" @click=${(e,t)=>e.handleToggleIcon(e.localeMarket&&e.localeMarket.id,t.event)}>${e=>e.config&&e.config.localizedStrings&&e.config.localizedStrings.switch.replace("{0}","")}</fluent-button>`)} ${(0,m.g)((e=>!e.forceHide),h.dy`<fluent-button class="languageButton ${e=>e.config.enableMarketLanguageToggle3?"treatment3":""} ${e=>e.iconClass}" title=${e=>e.config.enableMarketLanguageToggle2?e.localeMarket&&e.localeMarket.displayString:e.config&&e.config.localizedStrings&&e.config.localizedStrings.switch.replace("{0}",e.localeMarket&&e.localeMarket.displayString)} aria-label=${e=>e.config.enableMarketLanguageToggle2?e.localeMarket&&e.localeMarket.displayString:e.config&&e.config.localizedStrings&&e.config.localizedStrings.switch.replace("{0}",e.localeMarket&&e.localeMarket.displayString)} data-t="${e=>e.TelemetryConstants&&e.TelemetryConstants.marketLanguageToggle.getMetadataTag()}" @click=${(e,t)=>e.handleToggleIcon(e.localeMarket&&e.localeMarket.id,t.event)}>${e=>e.localeMarket&&e.localeMarket.displayString}</fluent-button>`)}</div>`;var f=n(78923),T=n(42689),y=n(35680),C=n(22674);const L=f.i` #marketLanguageToggle.isFixed{right:30px;align-items:end}`,v=f.i` #marketLanguageToggle.isFixed{align-items:start;text-overflow:ellipsis;left:30px}`,M=f.i`
:host{border-radius:6px}.languageButton{background:transparent;color:white;font-size:small;border-radius:2px}.languageButton.treatment3{margin-top:-10px}.switchToButton{background:transparent;color:white;font-size:small;margin-bottom:-5px}#marketLanguageToggle{display:flex;flex-direction:column;margin-inline-end:-6px;align-items:end;border-radius:2px}#marketLanguageToggle.isFixed{display:flex;flex-direction:column;top:75px;position:fixed}.switchToButton.dark::part(content),.languageButton.dark::part(content){color:${T.C}}.marketLanguageToggle:hover{background-color:${y.Xi}}.marketLanguageToggle.image-enable:hover{background:rgba(17,17,17,0.8)}`.withBehaviors(new C.O(L,v)),x={experienceConfigSchema:undefined}},78038:function(e,t,n){n.r(t),n.d(t,{OneTrustCookieConsentDataConnector:function(){return g},OneTrustCookieConsentDataReducer:function(){return d},ToolingInfo:function(){return u}});var i=n(29815),o=n(72344),a=n(67462),s=n(52144),r=n(64434),l=n(94537),c=n(63439);class g extends c.e{constructor(e,t,n,i,o,s,r){super(e,t,n,i,o,s,r),this.handleUserAction=e=>{this.incrementCookieValue()>this.config.numActionsBeforeBlocking&&(this.transitionToBlockingBanner(),this.removeUserActionEventListeners())},this.incrementCookieValue=()=>{const e=(0,a.ej)(g.numUserActionsCookieName);let t=0;return e&&(t=parseInt(e)),(0,a.sq)(g.numUserActionsCookieName,(t+1).toString(),g.cookieExpirationInDays,g.cookieDomain,"/",!0),t+1},this.onClick=e=>{this.isValidClick(e)&&this.handleUserAction(e)},this.isValidClick=e=>this.isTargetElementALink(e)||this.isTargetElementAButton(e),this.isTargetElementALink=e=>{const t=e.target&&e.target.closest("a");return!(!t||!t.href)},this.isTargetElementAButton=e=>!(!e.target||!e.target.closest("button")),this.onKeyDown=e=>{this.isValidKeyboardAction(e)&&this.handleUserAction(e)},this.isValidKeyboardAction=e=>{const t=this.isTargetElementALink(e),n=this.isTargetElementAButton(e),i=e.target&&e.target.classList&&[...e.target.classList].filter((e=>-1!==e.indexOf("carousel_sequenceIndicator"))).length>0;return t&&e.key===l.kL||n&&(e.key===l.kL||e.key===l.BI)||i&&(e.key===l.BE||e.key===l.mr)},this.initializeBannerBehavior()}initializeBannerBehavior(){if(!this.isConsentRequired())return;const e=(0,a.ej)(g.numUserActionsCookieName);0===this.config.numActionsBeforeBlocking||e&&parseInt(e)>this.config.numActionsBeforeBlocking?window.addEventListener("load",(()=>this.transitionToBlockingBanner())):this.registerUserActionEventListeners()}isConsentRequired(){return s.A.get(s.U.CookieConsentProvider)===i.i.OneTrustBanner&&s.A.get(s.U.CookieConsentStatus)===o._.Required}transitionToBlockingBanner(){const e=document.getElementsByClassName("onetrust-pc-dark-filter")[0];e&&e.classList&&(e.classList.remove("ot-hide"),e.style.zIndex=`${r.K.CookieWall+1}`)}registerUserActionEventListeners(){document.body.addEventListener("click",this.onClick),document.body.addEventListener("keydown",this.onKeyDown)}removeUserActionEventListeners(){document.body.removeEventListener("click",this.onClick),document.body.removeEventListener("keydown",this.onKeyDown)}}g.numUserActionsCookieName="numac",g.cookieDomain="msn.com",g.cookieExpirationInDays=365;class d{reduce(e,t){return{}}}const u={experienceConfigSchema:{}}}}]);