"use strict";(self.webpackChunk_msnews_msnews_experiences=self.webpackChunk_msnews_msnews_experiences||[]).push([["pill-wc"],{22633:function(t,e,o){o.r(e),o.d(e,{PillDesignProps:function(){return a},PillWC:function(){return T},PillWCStyles:function(){return Q},PillWCTemplate:function(){return O},Placement:function(){return s},ToolingInfo:function(){return Z}});var i=o(69593),r=o(63070);var l,s,n=o(33940);!function(t){t.Refresh="Refresh",t.ScrollForMore="ScrollForMore"}(l||(l={})),function(t){t.top="top",t.topOfFeed="topOfFeed",t.bottom="bottom",t.aboveFeed="above"}(s||(s={}));const a={top:16,bottom:32,height:32,largeHeight:38,width:150,largeWidth:168,widthWithCloseButton:165,blackFill:"#212121",whiteFill:"#FFFFFF",hoverColorWithCloseButton:"#0481E0",closeButtonHoverColor:"#036AC4"};var c=o(17769),p=o(73252),d=o(84169),h=o(9533),u=o(81555),g=o(91608),m=o(99452),v=o(53076),f=o(12108),b=o(83227),w=o(65135),C=o(64193),x=o(23344),y=o(43037),F=o(32717),k=o(65932);class T extends C.l{constructor(){super(...arguments),this.lastScrollY=0,this.scrollDismissPix=600,this._placementHandler=(0,c.k)(this.placementHandler.bind(this),0),this._scrollDismissHandler=(0,c.k)(this.scrollDismissHandler.bind(this),0),this._scrollForMoreScrollDismissHandler=(0,c.k)(this.scrollForMoreScrollDismissHandler.bind(this),0),this.setActivityTimer=t=>{if(!this.absoluteTimerDone)return;this.activityTimer&&window.clearTimeout(this.activityTimer);const e=()=>{this.setActivityListener(!1),this.renderPill(Object.assign(Object.assign({},this.config),{id:"1",pillType:l.Refresh,onClick:(t,e)=>this.clickHandler(t,e)})),this.absoluteTimerDone=!1,this.lastScrollY=window.scrollY,window.addEventListener("scroll",this._scrollDismissHandler),this.config.isControl||window.addEventListener("scroll",this._placementHandler)};t?e():this.activityTimer=window.setTimeout(e,this.config.refreshTime&&this.config.refreshTime.activityTimeInMs||15e3)},this.renderScrollForMore=()=>{this.renderPill(Object.assign(Object.assign({},this.config),{id:"2",pillType:l.ScrollForMore,onClick:(t,e)=>this.clickHandlerForScrollMore(t,e)})),this.lastScrollY=window.scrollY,window.addEventListener("scroll",this._scrollForMoreScrollDismissHandler)},this.setActivityListener=t=>{const e=["click","scroll"];t?e.forEach((t=>window.addEventListener(t,(()=>this.setActivityTimer(!1))))):e.forEach((t=>window.removeEventListener(t,(()=>this.setActivityTimer(!1)))))}}get bottomShowBreakpoint(){return this.pageHeight-this.topStickyBreakpoint}resetAbsoluteTimer(){this.activityTimer&&window.clearTimeout(this.activityTimer),this.setAbsoluteTimer(),this.pillDataProps=null,window.removeEventListener("scroll",this._placementHandler),window.removeEventListener("scroll",this._scrollDismissHandler),this.config.placement===s.bottom&&(this.isShow=!1)}experienceConnected(){this.setRenderPillCallback((t=>{this.config.isControl||(this.pillDataProps=t,this.placementHandler()),this.config.placement===s.bottom&&(0,y.WL)(this.isShow),this.updateTmplAndSendClientLog(t.pillType)})),this.isEnterpriseAudience=this.getIsEnterprise(),(0,F.eC)().then((()=>{!this.config.forceRefreshForStalePrerender&&(null===p.Al||void 0===p.Al?void 0:p.Al.IsPrerender)||this.setAbsoluteTimer(),this.config.enableScrollForMore&&(0,k.Uo)(v.z.ChromiumPageSettings,(t=>{this.currentSetting=t.selectedFeedDisplaySetting,"peek"===this.currentSetting&&this.renderScrollForMore()})),this.config.isControl||(this.initPlacement(),(0,g.Jx)((t=>{this.topStickyBreakpoint=t,this.placementHandler()})))}))}shadowDomPopulated(){(0,h.FY)(u._.pillWC,this.shadowRoot)}initPlacement(){this.topStickyBreakpoint=this.getTopBreakpoint(),this.pageHeight=document.documentElement.clientHeight,window.addEventListener("resize",(()=>this.pageHeight=document.documentElement.clientHeight))}renderPill(t){this.renderPillCallback&&this.renderPillCallback(t)}setRenderPillCallback(t){this.renderPillCallback=t}placementHandler(){switch(this.config.placement){case s.top:return void(0===this.topStickyBreakpoint?this.isSticky=!0:this.isSticky=scrollY>this.topStickyBreakpoint&&this.getDesktopFeedRect().top<=g.FQ+g.A$);case s.bottom:return void(this.isShow=scrollY+this.bottomShowBreakpoint>a.bottom+a.height+g.FQ+g.A$);case s.aboveFeed:default:return}}setAbsoluteTimer(t=!1,e=0){this.absoluteTimerDone=!1,this.absoluteTimer&&window.clearTimeout(this.absoluteTimer);const o=t=>{this.absoluteTimerDone=!0,this.setActivityTimer(t),this.setActivityListener(!0)};if(t)o(!0);else{const t=e||this.config.refreshTime&&this.config.refreshTime.absoluteTimeInMs||3e5;this.absoluteTimer=window.setTimeout((()=>o(!1)),t)}}clickHandler(t,e){return(0,n.mG)(this,void 0,void 0,(function*(){e&&t&&(this.scrollToShowFeed(),this.showSpinner=!0,yield t.refreshCallback(),this.resetAbsoluteTimer(),this.showSpinner=!1,this.refreshButtonRef&&w.M0.sendActionEvent(this.refreshButtonRef),w.M0.sendPageView({page:{name:"IAR",isAutoRefresh:!1}}))}))}clickHandlerForScrollMore(t,e){e&&t&&(this.scrollToShowFeed(),this.pillDataProps=null,this.scrollForMoreButtonRef&&w.M0.sendActionEvent(this.scrollForMoreButtonRef))}scrollDismissHandler(){Math.abs(window.scrollY-this.lastScrollY)>this.scrollDismissPix&&(this.resetAbsoluteTimer(),w.M0.sendClientLogEvent({message:"Refresh stories is dismissed by scrolling",type:"information"}))}scrollForMoreScrollDismissHandler(){Math.abs(window.scrollY-this.lastScrollY)>this.scrollDismissPix&&(this.pillDataProps=null,window.removeEventListener("scroll",this._scrollForMoreScrollDismissHandler),w.M0.sendClientLogEvent({message:"Scroll for more is dismissed by scrolling",type:"information"}))}clickContentDismissHandler(t){var e;const o=(null===(e=null==t?void 0:t.path)||void 0===e?void 0:e.length)?t.path.map((t=>t.tagName)):[];o.includes("MSFT-FEED-LAYOUT")&&"MSFT-FEED-LAYOUT"!==o[0]&&(this.resetAbsoluteTimer(),w.M0.sendClientLogEvent({message:"Refresh stories is dismissed by clicking content card",type:"information"}))}clickButtonDismissHandler(t,e){if(e){const t={absoluteTimeInMs:144e5,activityTimeInMs:1e3};this.config.refreshTime=t}this.resetAbsoluteTimer(),t.preventDefault()}isStickyChanged(t,e){this.isEnterpriseAudience&&this.config.placement===s.top&&this.enterpriseResizeHandler(e)}isShowChanged(t,e){this.config.placement===s.bottom&&((0,y.WL)(e),this.isEnterpriseAudience&&this.config.placement===s.bottom&&this.enterpriseResizeHandler(e))}enterpriseResizeHandler(t){const e=()=>{const t=this.getDesktopFeedRect();this.layoutProp={layoutLeft:t.left,layoutWidth:t.width}};t?(e(),window.addEventListener("resize",e)):window.removeEventListener("resize",e)}scrollToShowFeed(){const t=this.getTopBreakpoint();(t||0===t)&&window.scrollTo({top:t,behavior:"smooth"})}getIsEnterprise(){return d.jG.CurrentRequestTargetScope&&d.jG.CurrentRequestTargetScope.audienceMode===f.F.Enterprise}getExperienceType(){return b.x.pillWC}getTopBreakpoint(){return(0,x.Nu)("top")||0}updateTmplAndSendClientLog(t){switch(t){case l.Refresh:w.M0.addOrUpdateTmplProperty("RefreshPillRender","1"),w.M0.sendClientLogEvent({message:"Refresh pill is rendered",type:"information"});break;case l.ScrollForMore:w.M0.addOrUpdateTmplProperty("ScrollInsPillRender","1"),w.M0.sendClientLogEvent({message:"scroll for more pill is rendered",type:"information"})}}}(0,n.gn)([m.LO],T.prototype,"pillDataProps",void 0),(0,n.gn)([m.LO],T.prototype,"isSticky",void 0),(0,n.gn)([m.LO],T.prototype,"isShow",void 0),(0,n.gn)([m.LO],T.prototype,"layoutProp",void 0),(0,n.gn)([m.LO],T.prototype,"pageHeight",void 0),(0,n.gn)([m.LO],T.prototype,"topStickyBreakpoint",void 0),(0,n.gn)([m.LO],T.prototype,"showSpinner",void 0),(0,n.gn)([m.LO],T.prototype,"currentSetting",void 0),(0,n.gn)([m.lk],T.prototype,"bottomShowBreakpoint",null);var S=o(49218),$=o(41472),H=o(93703),M=o(545),B=o(38156),D=o(60483);const L=()=>new D.D({name:"RefreshStoriesPill",behavior:B.wu.Navigate}).getMetadataTag(),P=()=>new D.D({name:"ScrollMoreButton",behavior:B.wu.More}).getMetadataTag(),E=()=>new D.D({name:"closePillButton",behavior:B.wu.Close}).getMetadataTag(),A=t=>S.dy`<fluent-button class="close" tabindex="0" title="${t.strings.clickToCloseTooltip}" data-t="${()=>E()}" @click="${(t,e)=>t.clickButtonDismissHandler(e.event,t.config.dynamicFeedTopPlacementFlight)}">${S.dy.partial(M.Z)}</fluent-button>`,R=t=>S.dy`<div class="pill-root-wrapper ${t=>`${t.config.placement||""} ${t.config.color||""} ${t.config.placement===s.top&&t.isSticky?"pill_sticky":""} ${t.config.placement===s.topOfFeed&&" pill_top_of_feed pill_sticky top"} ${t.config.placement!==s.bottom||t.isShow?"":"hide"} ${t.config.usingLayouts?"layouts":""} ${t.config.stickyHeaderDisabled?"no_header":""} `}"><output role="alert" aria-label="${t.strings.refreshButtonAriaLabel}">${(t=>{return S.dy`<fluent-button class="pill-root" part="pill-root" tabindex="0" title="${t.strings.clickToRefreshTooltip}" data-t="${()=>L()}" @click="${(e,{event:o})=>{var i;return null===(i=t.pillDataProps)||void 0===i?void 0:i.onClick(e,o)}}" data-customhandled="true" ${(0,$.i)("refreshButtonRef")}><div class="pill-content">${(0,H.g)((t=>t.showSpinner),S.dy`<fluent-progress-ring class="spinner"></fluent-progress-ring><span class="text">${t.strings.spinnerText}</span>`)} ${(0,H.g)((t=>!t.showSpinner),S.dy` ${S.dy.partial((e="12",o="white"===t.config.color?a.blackFill:a.whiteFill,`<svg width="${e}" height="${e}" viewBox="0 0 12 12" fill="${o}" xmlns="http://www.w3.org/2000/svg"><path d="M7.59962 0.222652C8.24805 0.398433 8.8418 0.672847 9.38086 1.0459C9.91992 1.41894 10.3838 1.86035 10.7725 2.37011C11.1611 2.87988 11.4629 3.44433 11.6777 4.06347C11.8926 4.68261 12 5.32812 12 6C12 6.55078 11.9287 7.08203 11.7861 7.59375C11.6436 8.10547 11.4424 8.58398 11.1826 9.02929C10.9229 9.4746 10.6104 9.87988 10.2451 10.2451C9.87988 10.6103 9.47461 10.9228 9.0293 11.1826C8.58399 11.4424 8.10547 11.6435 7.59375 11.7861C7.08203 11.9287 6.55078 12 6 12C5.44922 12 4.91797 11.9287 4.40625 11.7861C3.89453 11.6435 3.41601 11.4424 2.9707 11.1826C2.52539 10.9228 2.12012 10.6103 1.75488 10.2451C1.38965 9.87988 1.07715 9.4746 0.817383 9.02929C0.557617 8.58398 0.356447 8.10644 0.213867 7.59668C0.0712892 7.08691 0 6.55469 0 6C0 5.45312 0.0722656 4.92188 0.216797 4.40625C0.361328 3.89063 0.567383 3.40527 0.83496 2.95019C1.10254 2.49512 1.42773 2.08105 1.81054 1.70801C2.19336 1.33496 2.625 1.01562 3.10546 0.75H1.5V0H4.49999V3H3.74999V1.25976C3.29296 1.47851 2.87988 1.75293 2.51074 2.08301C2.1416 2.41308 1.82617 2.78418 1.56445 3.19629C1.30273 3.60839 1.10156 4.05273 0.960936 4.52929C0.820311 5.00586 0.749999 5.49609 0.749999 6C0.749999 6.48046 0.812499 6.94433 0.937499 7.39159C1.0625 7.83886 1.23926 8.25683 1.46777 8.6455C1.69629 9.03417 1.9707 9.38867 2.29101 9.70898C2.61133 10.0293 2.96582 10.3037 3.35449 10.5322C3.74316 10.7607 4.16015 10.9375 4.60546 11.0625C5.05078 11.1875 5.51562 11.25 6 11.25C6.48046 11.25 6.94433 11.1875 7.39159 11.0625C7.83886 10.9375 8.25683 10.7607 8.6455 10.5322C9.03417 10.3037 9.38867 10.0293 9.70898 9.70898C10.0293 9.38867 10.3037 9.03417 10.5322 8.6455C10.7607 8.25683 10.9375 7.83984 11.0625 7.39453C11.1875 6.94922 11.25 6.48437 11.25 6C11.25 5.41406 11.1553 4.8496 10.9658 4.30664C10.7764 3.76367 10.5117 3.26953 10.1719 2.82422C9.83203 2.37891 9.42675 1.99316 8.95605 1.66699C8.48535 1.34082 7.96679 1.09961 7.40039 0.943359L7.59962 0.222652Z"/></svg>`))}<span class="text">${t.strings.refreshStoriesText}</span>`)}</div></fluent-button>`;var e,o})(t)}</output>${A}</div>`,_=t=>S.dy`<div class="scroll-for-more-pill-root scrollmore-pos"><output class="scroll-more-output" role="alert" aria-label="${t.strings.scrollForMoreButtonAriaLabel}">${(t=>S.dy`<fluent-button class="scroll-more-button" part="pill-root" tabindex="0" title="${t.strings.clickToShowMoreTooltip}" data-t="${()=>P()}" @click="${(e,{event:o})=>{var i;return null===(i=t.pillDataProps)||void 0===i?void 0:i.onClick(e,o)}}" data-customhandled="true" ${(0,$.i)("scrollForMoreButtonRef")}><div class="pill-content">${S.dy.partial('<svg width="15" height="16" viewBox="0 0 15 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14.7931 9.26536C15.0778 8.96443 15.0645 8.48974 14.7636 8.20511C14.4627 7.92049 13.988 7.93371 13.7034 8.23464L8.74824 13.4737V0.75C8.74824 0.335786 8.41246 0 7.99824 0C7.58403 0 7.24824 0.335786 7.24824 0.75V13.476L2.29098 8.23464C2.00636 7.93371 1.53167 7.92049 1.23074 8.20511C0.929802 8.48974 0.916581 8.96443 1.20121 9.26536L7.27065 15.6826C7.42793 15.8489 7.62804 15.9489 7.83683 15.9826C7.88882 15.994 7.94283 16 7.99824 16C8.05583 16 8.11191 15.9935 8.16578 15.9812C8.37158 15.9462 8.56848 15.8467 8.72369 15.6826L14.7931 9.26536Z" fill="white"/></svg>')}<span class="scroll-text">${t.config.enableScrollAltText?t.strings.scrollForMoreAltText:t.strings.scrollForMoreText}</span></div></fluent-button>`)(t)}</output></div>`,O=S.dy`${t=>(null==t?void 0:t.pillDataProps)?S.dy` ${t=>{switch(t.pillDataProps.pillType){case l.Refresh:return R(t);case l.ScrollForMore:return"peek"===t.currentSetting?_(t):void 0;default:return}}}
`:""}`;var z=o(22674),W=o(29717),Y=o(64434),I=o(78923);const j=()=>g.FQ+g.A$+a.top+"px",U=I.i` .close{right:0}`,V=I.i` .close{left:0}`,N=I.i` .scroll-for-more-pill-root{background:#0F6CBD}.scroll-for-more-pill-root:hover{background:#115EA3}.scroll-more-button:active{background:#0C3B5E}`,G=I.i` .scroll-for-more-pill-root{background:#115EA3}.scroll-for-more-pill-root:hover{background:#0F6CBD}.scroll-more-button:active{background:#0C3B5E}`,Q=I.i` :host{--commonHeaderTop:146px;--commonHeaderStackedTop:199px}.pill-root-wrapper{box-sizing:border-box;z-index:${Y.K.Nav.toString()};
        max-width: 95%;
        display: flex;
        flex-direction: row;
        justify-content: center;
        align-items: center;
        border-radius: 20px;

        position: var(--position);
        top: var(--top);
        left: var(--left, 50%);
        bottom: var(--bottom);
        height: var(--height, ${a.height+"px"});transform:var(--transform,translate(-50%,0));margin:var(--margin);border:var(--border,1px solid #000000);box-shadow:var(--boxShadow,0px 6px 4px rgba(0,0,0,0.25));background:var(--bgColor);color:var(--color,#000000)}.pill-root-wrapper:hover{background:var(--hoverBgColor,#F2f2F2)}div.pill_sticky{position:fixed}div.pill_top_of_feed.layouts{top:40px !important}div.pill_sticky.layouts{top:${j()}}div.pill_sticky.layouts.no_header{top:16px}div.hide{display:none}.top{--position:absolute;--top:${a.top+"px"}}.bottom{--position:fixed;--top:auto;--bottom:${a.bottom+"px"}}.above{--position:sticky;--left:auto;--margin:8px auto 12px auto;--transform:none}.above.layouts{--top:${j()}}.white{--bgColor:#FFFFFF}.blue{--bgColor:#0078D4;--color:#FFFFFF;--border:none;--boxShadow:0px 4px 4px rgba(0,0,0,0.25);--hoverBgColor:#006CBE}.channel-theme-color{--bgColor:var(--channelBtnBgColor,#0078D4);--color:#FFFFFF;--border:none;--boxShadow:0px 4px 4px rgba(0,0,0,0.25);--hoverBgColor:var(--channelBtnBgColor,#006CBE)}.large{--width:${a.largeWidth+"px"};
        --height: ${a.largeHeight+"px"};--border:1px solid rgba(0,0,0,0.49);--boxShadow:0px 4px 4px rgba(0,0,0,0.25);--fontSize:16px;--lineHeight:22px;--hoverBgColor:#F7F7F7;--contentMarginBottom:6px}output{width:100%}fluent-button{font-size:var(--fontSize,12px);line-height:var(--lineHeight,16px);color:var(--color,#000000);background-color:unset}.pill-root{min-width:var(--width,${a.width+"px"})}.pill-content{display:flex;justify-content:center;align-items:center;vertical-align:middle}fluent-button .text{vertical-align:middle;margin-inline-start:4px}fluent-button svg{width:unset;height:unset;vertical-align:middle}fluent-button::part(control){display:inline-block;padding:0px 2px}fluent-button::part(content){margin-bottom:var(--contentMarginBottom,3px)}@media (max-width:956px){div.pill_sticky{top:var(--commonHeaderStackedTop)}.above{--top:var(--commonHeaderStackedTop)}}@media (min-width:956px){div.pill_sticky{top:var(--commonHeaderTop)}.above{--top:var(--commonHeaderTop)}}.spinner{display:inline-block;width:14px;margin:0px;vertical-align:middle;position:relative;top:1px}.large .spinner{width:18px}.pill-root-wrapper{--width:${a.widthWithCloseButton+"px"}}.pill-root-wrapper:hover{background:${a.hoverColorWithCloseButton}}output fluent-button::part(control){padding:0 34px 0 32px}.close{display:none;width:32px;height:100%;text-align:center;border-radius:50%;position:absolute}:host(:hover) .close,:host(:focus-within) .close{display:inline-block;background:${a.closeButtonHoverColor}}.close svg{vertical-align:middle}.white:hover{background:#F2f2F2}.white:hover .close{background:rgba(16,16,16,0.2)}.scroll-for-more-pill-root{z-index:${Y.K.Nav.toString()};
        max-width: 95%;
        display: flex;
        flex-direction: row;
        justify-content: center;
        align-items: center;
        border-radius: 100px;
        gap: 4px;

        position: var(--position);
        top: var(--top);
        left: var(--left, 50%);
        bottom: var(--bottom);
        height: var(--height, ${a.height+"px"});transform:var(--transform,translate(-50%,0));color:#FFFFFF}.scrollmore-pos{position:fixed;bottom:16px}.scroll-more-button{font-size:14px;line-height:20px;background-color:unset;color:#FFFFFF;border-radius:100px}output.scroll-more-output fluent-button::part(control){padding:5px 15px}.scroll-text{margin-inline-start:9px;font-weight:600}`.withBehaviors(new z.O(U,V),(0,W.Uu)(G),(0,W.zw)(N)),Z={experienceConfigSchema:undefined};i.D.define(r.H.registry)},43037:function(t,e,o){o.d(e,{WL:function(){return l},mY:function(){return s}});let i=!0;const r=[];function l(t){i=t;for(const t of r)t(i)}function s(t){r.push(t)}}}]);