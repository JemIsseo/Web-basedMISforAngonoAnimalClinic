"use strict";(self.webpackChunk_msnews_msnews_experiences=self.webpackChunk_msnews_msnews_experiences||[]).push([["mobile-app-upsell"],{62349:function(e,t,a){a.r(t),a.d(t,{MobileAppUpsell:function(){return f},MobileAppUpsellStyles:function(){return E},MobileAppUpsellTemplate:function(){return I},ToolingInfo:function(){return Q}});var n=a(17053),o=a(63070),i=a(89026);var l=a(33940),s=a(1334),r=a(41115),d=a(31699),p=a(99452),c=a(65135),h=a(38156),g=a(94537),u=a(83227),y=a(26415),m=a(64193);class f extends m.l{constructor(){super(...arguments),this.showHeaderIcon=!1,this.isOnImage=!1,this.showFlyout=!1,this.isDarkMode=!1,this.darkModeQuery=matchMedia("(prefers-color-scheme:dark)"),this.handleOpen=()=>{this.showFlyout=!0,c.M0.addOrUpdateTmplProperty("mobupsellshown","3"),document.addEventListener("mouseup",this.handleOutsideClick),document.addEventListener("keydown",this.handleKeypress),(0,s.Gg)(s.tk.mobileAppUpsell,this.showFlyout)},this.handleClose=()=>{this.showFlyout=!1,document.removeEventListener("mouseup",this.handleOutsideClick),document.removeEventListener("keydown",this.handleKeypress),(0,s.Gg)(s.tk.mobileAppUpsell,this.showFlyout)},this.handleKeypress=e=>{(null==e?void 0:e.key)===g.CX?(c.M0.sendActionEvent(e.target,h.Aw.KeyPress,h.wu.Close),this.handleClose()):(null==e?void 0:e.key)===g.kL&&(null==e||e.preventDefault(),this.toggleFlyout())},this.handleOutsideClick=e=>{if(e.target.instanceId===u.x.mobileAppUpsell)return;const t=e.composedPath();(null==t?void 0:t.includes(this))||this.handleClose()},this.onFlyoutEvent=(e,t)=>{this.showFlyout&&e!==s.tk.mobileAppUpsell&&t&&this.handleClose()}}experienceConnected(){var e;this.config.enableHeaderIcon?(this.showHeaderIcon=!0,this.isDarkMode=!!(null===(e=this.darkModeQuery)||void 0===e?void 0:e.matches),(0,r.N6)("backgroundImage",(e=>{const t="displayed"===e;d.S.queueUpdate((()=>{this.isOnImage=t}))})),this.darkModeQuery.addEventListener("change",(e=>{this.isDarkMode=!!(null==e?void 0:e.matches)})),c.M0.addOrUpdateTmplProperty("mobupsellshown","1"),this.populateTelemetryTags(),this.config.enableFlyout&&this.config.flyoutCampaignType&&(0,s.WW)(this.onFlyoutEvent),this.markVisuallyReady()):this.markVisuallyReady()}disconnectedCallback(){(0,s.St)(this.onFlyoutEvent),document.removeEventListener("keydown",this.handleKeypress),document.removeEventListener("mouseup",this.handleOutsideClick),this.darkModeQuery.removeEventListener("change",(e=>{this.isDarkMode=!!(null==e?void 0:e.matches)}))}getExperienceType(){return u.x.mobileAppUpsell}populateTelemetryTags(){if(this.telemetryObject)if(this.config.enableFlyout&&this.config.flyoutCampaignType){if(this.headerIconClickOpenFlyoutTelemetryTag=this.telemetryObject.addOrUpdateChild({name:"PhoneIconAppUpsell",action:h.Aw.Click,behavior:h.wu.Open,content:{type:h.uH.App,headline:"PhoneIconAppUpsell"}}).getMetadataTag(),this.headerIconClickCloseFlyoutTelemetryTag=this.telemetryObject.addOrUpdateChild({name:"PhoneIconAppUpsell",action:h.Aw.Click,behavior:h.wu.Close,content:{type:h.uH.App,headline:"PhoneIconAppUpsell"}}).getMetadataTag(),"DownloadQR"===this.config.flyoutCampaignType){if(!this.config.lightQRImageCmsUrl||!this.config.darkQRImageCmsUrl)return void c.M0.sendAppErrorEvent(Object.assign(Object.assign({},y.hq4),{message:`Missing flyout images for campaign type ${this.config.flyoutCampaignType}`}));this.downloadQrContentViewTelemetryTag=this.telemetryObject.addOrUpdateChild({name:"PhoneIconAppUpsellQR",content:{headline:"PhoneIconAppUpsellQR"}}).getMetadataTag()}else if("DownloadRewards"===this.config.flyoutCampaignType){if(!this.config.lightRewardsImageCmsUrl||!this.config.darkRewardsImageCmsUrl)return void c.M0.sendAppErrorEvent(Object.assign(Object.assign({},y.hq4),{message:`Missing flyout images for campaign type ${this.config.flyoutCampaignType}`}));this.rewardsFlyoutContentViewTelemetryTag=this.telemetryObject.addOrUpdateChild({name:"PhoneIconAppUpsellRewards",content:{headline:"PhoneIconAppUpsellRewards"}}).getMetadataTag(),this.rewardsFlyoutButtonClickTelemetryTag=this.telemetryObject.addOrUpdateChild({name:"sendlink",action:h.Aw.Click,behavior:h.wu.Navigate,content:{type:h.uH.App,headline:"sendlink"}}).getMetadataTag()}}else this.headerIconClickTelemetryTag=this.telemetryObject.addOrUpdateChild({name:"PhoneIconAppUpsell",action:h.Aw.Click,behavior:h.wu.Navigate,content:{type:h.uH.App,headline:"PhoneIconAppUpsell"}}).getMetadataTag()}toggleFlyout(){this.showFlyout=!this.showFlyout,this.showFlyout?this.handleOpen():this.handleClose()}}(0,l.gn)([p.LO],f.prototype,"showHeaderIcon",void 0),(0,l.gn)([p.LO],f.prototype,"isOnImage",void 0),(0,l.gn)([p.LO],f.prototype,"showFlyout",void 0),(0,l.gn)([p.LO],f.prototype,"isDarkMode",void 0);var w=a(49218),b=a(93703);const x=w.dy`<a class="privacy-statement-link text" aria-label="${e=>e.strings.privacyStatementLinkAriaLabel}" href="https://go.microsoft.com/fwlink/?LinkId=521839" target="_blank">${e=>e.strings.privacyStatementLinkText}</a>`,v=w.dy`<div class="mobile-icon">${w.dy.partial('<svg width="14" height="20" viewBox="0 0 10 16"><path d="M4 12a.5.5 0 0 0 0 1h2a.5.5 0 0 0 0-1H4ZM2 0a2 2 0 0 0-2 2v12c0 1.1.9 2 2 2h6a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2ZM1 2a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2Z"/></svg>')}</div>`,k=w.dy`<div id="download-qr-flyout-container" class="flyout-container" aria-label="${e=>e.strings.downloadQrCampaign.ariaLabel}"
data-t="${e=>e.downloadQrContentViewTelemetryTag}"><div id="download-qr-img" style="background-image: url(${e=>e.isDarkMode?e.config.darkQRImageCmsUrl:e.config.lightQRImageCmsUrl})" class="campaign-image ${e=>e.isDarkMode?"dark-image":"light-image"}"></div><div class="flyout-text-container"><span id="text-primary" class="text flyout-text-primary">${e=>e.strings.downloadQrCampaign.secondaryText}</span><span id="text-secondary" class="text flyout-text-secondary">${e=>e.strings.downloadQrCampaign.primaryText}</span></div></div>`,C=w.dy`<div id="download-rewards-flyout-container" class="flyout-container" aria-label="${e=>e.strings.downloadRewardsCampaign.ariaLabel}"
data-t="${e=>e.rewardsFlyoutContentViewTelemetryTag}"><div id="download-rewards-img" style="background-image: url(${e=>e.isDarkMode?e.config.darkRewardsImageCmsUrl:e.config.lightRewardsImageCmsUrl})" class="campaign-image ${e=>e.isDarkMode?"dark-image":"light-image"}"></div><div class="flyout-text-container"><span id="text-primary" class="text flyout-text-primary">${e=>e.strings.downloadRewardsCampaign.primaryText}</span><span id="text-secondary" class="text flyout-text-secondary">${e=>e.strings.downloadRewardsCampaign.secondaryText}</span>${x}</div><fluent-anchor role="link" id="rewards-flyout-button" appearance="stealth" class="button" href=${e=>e.config.appDownloadPageLinkFromRewardsFlyout} aria-label="${e=>e.strings.downloadRewardsCampaign.buttonAriaLabel}" tabindex="0" target="_blank" data-t="${e=>e.rewardsFlyoutButtonClickTelemetryTag}">${e=>e.strings.downloadRewardsCampaign.buttonText}</fluent-anchor></div>`,T=w.dy`<div class="button-holder"><fluent-anchor role="link" appearance="stealth" class="app-download-button ${e=>e.isOnImage?"img":""}" href=${e=>e.config.appDownloadPageLink} tabindex="0" target="_blank" aria-label="${e=>e.strings.accessibility.headerIconAriaLabel}" data-t="${e=>e.headerIconClickTelemetryTag}">${v}</fluent-anchor></div>`,$=w.dy`<div class="button-with-flyout-holder"><fluent-button role="button" appearance="stealth" class="app-download-button ${e=>e.isOnImage?"img":""}" tabindex="0" aria-label="${e=>e.strings.accessibility.headerIconAriaLabel}" aria-expanded="${e=>e.showFlyout}" @click=${e=>e.toggleFlyout()} @keypress="${(e,t)=>e.handleKeypress(t.event)}" data-t="${e=>e.showFlyout?e.headerIconClickCloseFlyoutTelemetryTag:e.headerIconClickOpenFlyoutTelemetryTag}">${v}</fluent-button>${(0,b.g)((e=>e.showFlyout&&"DownloadQR"===e.config.flyoutCampaignType),k)} ${(0,b.g)((e=>e.showFlyout&&"DownloadRewards"===e.config.flyoutCampaignType),C)}</div>`,I=w.dy` ${(0,b.g)((e=>e.showHeaderIcon&&(!e.config.enableFlyout||!e.config.flyoutCampaignType)),T)} ${(0,b.g)((e=>e.showHeaderIcon&&e.config.enableFlyout&&e.config.flyoutCampaignType),$)}
`;var F=a(35680),O=a(42689),U=a(27460),A=a(26738),M=a(22674),L=a(78923);const R=L.i`
.flyout-container{right:0px}`,D=L.i`
.flyout-container{left:0px}`,E=L.i` .app-download-button::part(control){padding-right:2px;padding-left:2px}.app-download-button{background-color:transparent;width:max-content}.app-download-button:focus{border:none;outline:none}.app-download-button:hover{background-color:${F.Xi}}.app-download-button.img:hover{background-color:rgba(17,17,17,0.8)}.img .mobile-icon{fill:white}.mobile-icon{fill:${O.C}}.mobile-icon svg{height:18px;width:14px}.mobile-icon{display:flex;float:left}@media screen and (-ms-high-contrast:active){.mobile-icon svg{fill:currentColor}}#download-qr-img{height:182px;width:316px}#download-rewards-img{height:182px;width:316px}.button-with-flyout-holder{position:relative}.flyout-container{background:${U.s};position:absolute;display:flex;flex-direction:column;justify-content:space-between;align-items:center;padding:12px;gap:12px;width:316px;border:1px solid transparent;border-radius:6px}#download-qr-flyout-container{height:249px}#download-rewards-flyout-container{height:309px}.flyout-text-primary{font-family:inherit;font-style:normal;font-weight:600;font-size:14px;line-height:18px;flex:none;order:0;flex-grow:0}.flyout-text-secondary{width:316px;font-family:inherit;font-style:normal;font-weight:400;font-size:12px;line-height:16px;flex:none;order:1;flex-grow:0}.privacy-statement-link{width:316px;height:13px;font-family:inherit;font-style:normal;font-weight:400;font-size:10px;line-height:13px;color:#0066FF;flex:none;order:2;flex-grow:0}.flyout-text-container{display:flex;flex-direction:column;align-items:flex-start;padding:0px;gap:6px;flex:none;order:1;flex-grow:0}a.privacy-statement-link{text-decoration:none;font-size:11px;color:${A.go}}#rewards-flyout-button{color:white;justify-content:center;align-items:center;width:316px;height:32px;background:#0066FF;border-radius:999px;flex:none;order:3;flex-grow:0}`.withBehaviors(new M.O(R,D)),Q={experienceConfigSchema:undefined};n.D.define(o.H.registry),i.D.define(o.H.registry)}}]);